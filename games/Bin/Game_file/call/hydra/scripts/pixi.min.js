/*!
 * pixi.js - v4.5.1
 * compiled sat, 22 apr 2017 13:51:40 utc
 *
 * pixi.js is licensed under the mit license.
 * http://www.opensource.org/licenses/mit-license
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.pixi=t()}}(function(){var t;return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var h=new error("cannot find module '"+s+"'");throw h.code="module_not_found",h}var l=r[s]={exports:{}};e[s][0].call(l.exports,function(t){var r=e[s][1][t];return i(r?r:t)},l,l.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){"use strict";"use restrict";function n(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}var i=32;r.int_bits=i,r.int_max=2147483647,r.int_min=-1<<i-1,r.sign=function(t){return(t>0)-(t<0)},r.abs=function(t){var e=t>>i-1;return(t^e)-e},r.min=function(t,e){return e^(t^e)&-(t<e)},r.max=function(t,e){return t^(t^e)&-(t<e)},r.ispow2=function(t){return!(t&t-1||!t)},r.log2=function(t){var e,r;return e=(t>65535)<<4,t>>>=e,r=(t>255)<<3,t>>>=r,e|=r,r=(t>15)<<2,t>>>=r,e|=r,r=(t>3)<<1,t>>>=r,e|=r,e|t>>1},r.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},r.popcount=function(t){return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24},r.counttrailingzeros=n,r.nextpow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},r.prevpow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},r.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,27030>>>t&1};var o=new array(256);!function(t){for(var e=0;e<256;++e){var r=e,n=e,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;t[e]=n<<i&255}}(o),r.reverse=function(t){return o[255&t]<<24|o[t>>>8&255]<<16|o[t>>>16&255]<<8|o[t>>>24&255]},r.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},r.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),t=65535&(t|t>>>16),t<<16>>16},r.interleave3=function(t,e,r){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),t|r<<2},r.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),t=1023&(t|t>>>16),t<<22>>22},r.nextcombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},{}],2:[function(t,e,r){"use strict";function n(t,e,r){r=r||2;var n=e&&e.length,o=n?e[0]*r:t.length,a=i(t,0,o,r,!0),u=[];if(!a)return u;var h,l,d,f,p,v,y;if(n&&(a=c(t,e,a,r)),t.length>80*r){h=d=t[0],l=f=t[1];for(var g=r;g<o;g+=r)p=t[g],v=t[g+1],p<h&&(h=p),v<l&&(l=v),p>d&&(d=p),v>f&&(f=v);y=math.max(d-h,f-l)}return s(a,u,r,h,l,y),u}function i(t,e,r,n,i){var o,s;if(i===a(t,e,r,n)>0)for(o=e;o<r;o+=n)s=m(o,t[o],t[o+1],s);else for(o=r-n;o>=e;o-=n)s=m(o,t[o],t[o+1],s);return s&&t(s,s.next)&&(c(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var r,n=t;do if(r=!1,n.steiner||!t(n,n.next)&&0!==x(n.prev,n,n.next))n=n.next;else{if(c(n),n=e=n.prev,n===n.next)return null;r=!0}while(r||n!==e);return e}function s(t,e,r,n,i,c,d){if(t){!d&&c&&v(t,n,i,c);for(var f,p,y=t;t.prev!==t.next;)if(f=t.prev,p=t.next,c?u(t,n,i,c):a(t))e.push(f.i/r),e.push(t.i/r),e.push(p.i/r),c(t),t=p.next,y=p.next;else if(t=p,t===y){d?1===d?(t=h(t,e,r),s(t,e,r,n,i,c,2)):2===d&&l(t,e,r,n,i,c):s(o(t),e,r,n,i,c,1);break}}}function a(t){var e=t.prev,r=t,n=t.next;if(x(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(_(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&x(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,e,r,n){var i=t.prev,o=t,s=t.next;if(x(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,h=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,l=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,c=g(a,u,e,r,n),d=g(h,l,e,r,n),f=t.nextz;f&&f.z<=d;){if(f!==t.prev&&f!==t.next&&_(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&x(f.prev,f,f.next)>=0)return!1;f=f.nextz}for(f=t.prevz;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&_(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&x(f.prev,f,f.next)>=0)return!1;f=f.prevz}return!0}function h(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!t(i,o)&&w(i,n,n.next,o)&&s(i,o)&&s(o,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(o.i/r),c(n),c(n.next),n=t=o),n=n.next}while(n!==t);return n}function l(t,e,r,n,i,a){var u=t;do{for(var h=u.next.next;h!==u.prev;){if(u.i!==h.i&&b(u,h)){var l=p(u,h);return u=o(u,u.next),l=o(l,l.next),s(u,e,r,n,i,a),void s(l,e,r,n,i,a)}h=h.next}u=u.next}while(u!==t)}function c(t,e,r,n){var s,a,u,h,l,c=[];for(s=0,a=e.length;s<a;s++)u=e[s]*n,h=s<a-1?e[s+1]*n:t.length,l=i(t,u,h,n,!1),l===l.next&&(l.steiner=!0),c.push(m(l));for(c.sort(d),s=0;s<c.length;s++)f(c[s],r),r=o(r,r.next);return r}function d(t,e){return t.x-e.x}function f(t,e){if(e=p(t,e)){var r=p(e,t);o(r,r.next)}}function p(t,e){var r,n=e,i=t.x,o=t.y,s=-(1/0);do{if(o<=n.y&&o>=n.next.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>s){if(s=a,a===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===s)return r.prev;var u,h=r,l=r.x,c=r.y,d=1/0;for(n=r.next;n!==h;)i>=n.x&&n.x>=l&&_(o<c?i:s,o,l,c,o<c?s:i,o,n.x,n.y)&&(u=math.abs(o-n.y)/(i-n.x),(u<d||u===d&&n.x>r.x)&&s(n,t)&&(r=n,d=u)),n=n.next;return r}function v(t,e,r,n){var i=t;do null===i.z&&(i.z=g(i.x,i.y,e,r,n)),i.prevz=i.prev,i.nextz=i.next,i=i.next;while(i!==t);i.prevz.nextz=null,i.prevz=null,y(i)}function y(t){var e,r,n,i,o,s,a,u,h=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,n=r,a=0,e=0;e<h&&(a++,n=n.nextz,n);e++);for(u=h;a>0||u>0&&n;)0===a?(i=n,n=n.nextz,u--):0!==u&&n?r.z<=n.z?(i=r,r=r.nextz,a--):(i=n,n=n.nextz,u--):(i=r,r=r.nextz,a--),o?o.nextz=i:t=i,i.prevz=o,o=i;r=n}o.nextz=null,h*=2}while(s>1);return t}function g(t,e,r,n,i){return t=32767*(t-r)/i,e=32767*(e-n)/i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function m(t){var e=t,r=t;do e.x<r.x&&(r=e),e=e.next;while(e!==t);return r}function _(t,e,r,n,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(n-a)-(r-s)*(e-a)>=0&&(r-s)*(o-a)-(i-s)*(n-a)>=0}function b(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!e(t,e)&&s(t,e)&&s(e,t)&&o(t,e)}function x(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function t(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,r,n){return!!(t(t,e)&&t(r,n)||t(t,n)&&t(r,e))||x(t,e,r)>0!=x(t,e,n)>0&&x(r,n,t)>0!=x(r,n,e)>0}function e(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&w(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function s(t,e){return x(t.prev,t,t.next)<0?x(t,e,t.next)>=0&&x(t,t.prev,e)>=0:x(t,e,t.prev)<0||x(t,t.next,e)<0}function o(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do r.y>o!=r.next.y>o&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}function p(t,e){var r=new r(t.i,t.x,t.y),n=new r(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function m(t,e,r,n){var i=new r(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function c(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevz&&(t.prevz.nextz=t.nextz),t.nextz&&(t.nextz.prevz=t.prevz)}function r(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevz=null,this.nextz=null,this.steiner=!1}function a(t,e,r,n){for(var i=0,o=e,s=r-n;o<r;o+=n)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}e.exports=n,n.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,s=math.abs(a(t,0,o,r));if(i)for(var a=0,u=e.length;a<u;a++){var h=e[a]*r,l=a<u-1?e[a+1]*r:t.length;s-=math.abs(a(t,h,l,r))}var c=0;for(a=0;a<n.length;a+=3){var d=n[a]*r,f=n[a+1]*r,p=n[a+2]*r;c+=math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===s&&0===c?0:math.abs((c-s)/s)},n.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r}},{}],3:[function(t,e,r){"use strict";function n(){}function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(){this._events=new n,this._eventscount=0}var s=object.prototype.hasownproperty,a="~";object.create&&(n.prototype=object.create(null),(new n).__proto__||(a=!1)),o.prototype.eventnames=function(){var t,e,r=[];if(0===this._eventscount)return r;for(e in t=this._events)s.call(t,e)&&r.push(a?e.slice(1):e);return object.getownpropertysymbols?r.concat(object.getownpropertysymbols(t)):r},o.prototype.listeners=function(t,e){var r=a?a+t:t,n=this._events[r];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new array(o);i<o;i++)s[i]=n[i].fn;return s},o.prototype.emit=function(t,e,r,n,i,o){var s=a?a+t:t;if(!this._events[s])return!1;var u,h,l=this._events[s],c=arguments.length;if(l.fn){switch(l.once&&this.removelistener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,n),!0;case 5:return l.fn.call(l.context,e,r,n,i),!0;case 6:return l.fn.call(l.context,e,r,n,i,o),!0}for(h=1,u=new array(c-1);h<c;h++)u[h-1]=arguments[h];l.fn.apply(l.context,u)}else{var d,f=l.length;for(h=0;h<f;h++)switch(l[h].once&&this.removelistener(t,l[h].fn,void 0,!0),c){case 1:l[h].fn.call(l[h].context);break;case 2:l[h].fn.call(l[h].context,e);break;case 3:l[h].fn.call(l[h].context,e,r);break;case 4:l[h].fn.call(l[h].context,e,r,n);break;default:if(!u)for(d=1,u=new array(c-1);d<c;d++)u[d-1]=arguments[d];l[h].fn.apply(l[h].context,u)}}return!0},o.prototype.on=function(t,e,r){var n=new i(e,r||this),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventscount++),this},o.prototype.once=function(t,e,r){var n=new i(e,r||this,(!0)),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventscount++),this},o.prototype.removelistener=function(t,e,r,i){var o=a?a+t:t;if(!this._events[o])return this;if(!e)return 0===--this._eventscount?this._events=new n:delete this._events[o],this;var s=this._events[o];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||(0===--this._eventscount?this._events=new n:delete this._events[o]);else{for(var u=0,h=[],l=s.length;u<l;u++)(s[u].fn!==e||i&&!s[u].once||r&&s[u].context!==r)&&h.push(s[u]);h.length?this._events[o]=1===h.length?h[0]:h:0===--this._eventscount?this._events=new n:delete this._events[o]}return this},o.prototype.removealllisteners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&(0===--this._eventscount?this._events=new n:delete this._events[e])):(this._events=new n,this._eventscount=0),this},o.prototype.off=o.prototype.removelistener,o.prototype.addlistener=o.prototype.on,o.prototype.setmaxlisteners=function(){return this},o.prefixed=a,o.eventemitter=o,"undefined"!=typeof e&&(e.exports=o)},{}],4:[function(e,r,n){!function(e){var n=/iphone/i,i=/ipod/i,o=/ipad/i,s=/(?=.*\bandroid\b)(?=.*\bmobile\b)/i,a=/android/i,u=/(?=.*\bandroid\b)(?=.*\bsd4930ur\b)/i,h=/(?=.*\bandroid\b)(?=.*\b(?:kfot|kftt|kfjwi|kfjwa|kfsowi|kfthwi|kfthwa|kfapwi|kfapwa|kfarwi|kfaswi|kfsawi|kfsawa)\b)/i,l=/iemobile/i,c=/(?=.*\bwindows\b)(?=.*\barm\b)/i,d=/blackberry/i,f=/bb10/i,p=/opera mini/i,v=/(crios|chrome)(?=.*\bmobile\b)/i,y=/(?=.*\bfirefox\b)(?=.*\bmobile\b)/i,g=new regexp("(?:nexus 7|bntv250|kindle fire|silk|gt-p1000)","i"),m=function(t,e){return t.test(e)},_=function(t){var e=t||navigator.useragent,r=e.split("[fban");if("undefined"!=typeof r[1]&&(e=r[0]),r=e.split("twitter"),"undefined"!=typeof r[1]&&(e=r[0]),this.apple={phone:m(n,e),ipod:m(i,e),tablet:!m(n,e)&&m(o,e),device:m(n,e)||m(i,e)||m(o,e)},this.amazon={phone:m(u,e),tablet:!m(u,e)&&m(h,e),device:m(u,e)||m(h,e)},this.android={phone:m(u,e)||m(s,e),tablet:!m(u,e)&&!m(s,e)&&(m(h,e)||m(a,e)),device:m(u,e)||m(h,e)||m(s,e)||m(a,e)},this.windows={phone:m(l,e),tablet:m(c,e),device:m(l,e)||m(c,e)},this.other={blackberry:m(d,e),blackberry10:m(f,e),opera:m(p,e),firefox:m(y,e),chrome:m(v,e),device:m(d,e)||m(f,e)||m(p,e)||m(y,e)||m(v,e)},this.seven_inch=m(g,e),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},b=function(){var t=new _;return t.class=_,t};"undefined"!=typeof r&&r.exports&&"undefined"==typeof window?r.exports=_:"undefined"!=typeof r&&r.exports&&"undefined"!=typeof window?r.exports=b():"function"==typeof t&&t.amd?t("ismobile",[],e.ismobile=b()):e.ismobile=b()}(this)},{}],5:[function(t,e,r){"use strict";function n(t){if(null===t||void 0===t)throw new typeerror("object.assign cannot be called with null or undefined");return object(t)}function i(){try{if(!object.assign)return!1;var t=new string("abc");if(t[5]="de","5"===object.getownpropertynames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+string.fromcharcode(r)]=r;var n=object.getownpropertynames(e).map(function(t){return e[t]});if("0123456789"!==n.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").foreach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===object.keys(object.assign({},i)).join("")}catch(t){return!1}}var o=object.getownpropertysymbols,s=object.prototype.hasownproperty,a=object.prototype.propertyisenumerable;e.exports=i()?object.assign:function(t,e){for(var r,i,u=n(t),h=1;h<arguments.length;h++){r=object(arguments[h]);for(var l in r)s.call(r,l)&&(u[l]=r[l]);if(o){i=o(r);for(var c=0;c<i.length;c++)a.call(r,i[c])&&(u[i[c]]=r[i[c]])}}return u}},{}],6:[function(t,e,r){var n=new arraybuffer(0),i=function(t,e,r,i){this.gl=t,this.buffer=t.createbuffer(),this.type=e||t.array_buffer,this.drawtype=i||t.static_draw,this.data=n,r&&this.upload(r)};i.prototype.upload=function(t,e,r){r||this.bind();var n=this.gl;t=t||this.data,e=e||0,this.data.bytelength>=t.bytelength?n.buffersubdata(this.type,e,t):n.bufferdata(this.type,t,this.drawtype),this.data=t},i.prototype.bind=function(){var t=this.gl;t.bindbuffer(this.type,this.buffer)},i.createvertexbuffer=function(t,e,r){return new i(t,t.array_buffer,e,r)},i.createindexbuffer=function(t,e,r){return new i(t,t.element_array_buffer,e,r)},i.create=function(t,e,r,n){return new i(t,e,r,n)},i.prototype.destroy=function(){this.gl.deletebuffer(this.buffer)},e.exports=i},{}],7:[function(t,e,r){var n=t("./gltexture"),i=function(t,e,r){this.gl=t,this.framebuffer=t.createframebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=r||100};i.prototype.enabletexture=function(t){var e=this.gl;this.texture=t||new n(e),this.texture.bind(),this.bind(),e.framebuffertexture2d(e.framebuffer,e.color_attachment0,e.texture_2d,this.texture.texture,0)},i.prototype.enablestencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createrenderbuffer(),t.bindrenderbuffer(t.renderbuffer,this.stencil),t.framebufferrenderbuffer(t.framebuffer,t.depth_stencil_attachment,t.renderbuffer,this.stencil),t.renderbufferstorage(t.renderbuffer,t.depth_stencil,this.width,this.height)}},i.prototype.clear=function(t,e,r,n){this.bind();var i=this.gl;i.clearcolor(t,e,r,n),i.clear(i.color_buffer_bit)},i.prototype.bind=function(){var t=this.gl;t.bindframebuffer(t.framebuffer,this.framebuffer)},i.prototype.unbind=function(){var t=this.gl;t.bindframebuffer(t.framebuffer,null)},i.prototype.resize=function(t,e){var r=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploaddata(null,t,e),this.stencil&&(r.bindrenderbuffer(r.renderbuffer,this.stencil),r.renderbufferstorage(r.renderbuffer,r.depth_stencil,t,e))},i.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteframebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},i.creatergba=function(t,e,r,o){var s=n.fromdata(t,null,e,r);s.enablenearestscaling(),s.enablewrapclamp();var a=new i(t,e,r);return a.enabletexture(s),a.unbind(),a},i.createfloat32=function(t,e,r,o){var s=new n.fromdata(t,o,e,r);s.enablenearestscaling(),s.enablewrapclamp();var a=new i(t,e,r);return a.enabletexture(s),a.unbind(),a},e.exports=i},{"./gltexture":9}],8:[function(t,e,r){var n=t("./shader/compileprogram"),i=t("./shader/extractattributes"),o=t("./shader/extractuniforms"),s=t("./shader/generateuniformaccessobject"),a=function(t,e,r){this.gl=t,this.program=n(t,e,r),this.attributes=i(t,this.program);var a=o(t,this.program);this.uniforms=s(t,a)};a.prototype.bind=function(){this.gl.useprogram(this.program)},a.prototype.destroy=function(){},e.exports=a},{"./shader/compileprogram":14,"./shader/extractattributes":16,"./shader/extractuniforms":17,"./shader/generateuniformaccessobject":18}],9:[function(t,e,r){var n=function(t,e,r,n,i){this.gl=t,this.texture=t.createtexture(),this.mipmap=!1,this.premultiplyalpha=!1,this.width=e||-1,this.height=r||-1,this.format=n||t.rgba,this.type=i||t.unsigned_byte};n.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelstorei(e.unpack_premultiply_alpha_webgl,this.premultiplyalpha);var r=t.videowidth||t.width,n=t.videoheight||t.height;n!==this.height||r!==this.width?e.teximage2d(e.texture_2d,0,this.format,this.format,this.type,t):e.texsubimage2d(e.texture_2d,0,0,0,this.format,this.type,t),this.width=r,this.height=n};var i=!1;n.prototype.uploaddata=function(t,e,r){this.bind();var n=this.gl;if(t instanceof float32array){if(!i){var o=n.getextension("oes_texture_float");if(!o)throw new error("floating point textures not available");i=!0}this.type=n.float}else this.type=n.unsigned_byte;n.pixelstorei(n.unpack_premultiply_alpha_webgl,this.premultiplyalpha),e!==this.width||r!==this.height?n.teximage2d(n.texture_2d,0,this.format,e,r,0,this.format,this.type,t||null):n.texsubimage2d(n.texture_2d,0,0,0,e,r,this.format,this.type,t||null),this.width=e,this.height=r},n.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activetexture(e.texture0+t),e.bindtexture(e.texture_2d,this.texture)},n.prototype.unbind=function(){var t=this.gl;t.bindtexture(t.texture_2d,null)},n.prototype.minfilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texparameteri(e.texture_2d,e.texture_min_filter,t?e.linear_mipmap_linear:e.nearest_mipmap_nearest):e.texparameteri(e.texture_2d,e.texture_min_filter,t?e.linear:e.nearest)},n.prototype.magfilter=function(t){var e=this.gl;this.bind(),e.texparameteri(e.texture_2d,e.texture_mag_filter,t?e.linear:e.nearest)},n.prototype.enablemipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generatemipmap(t.texture_2d)},n.prototype.enablelinearscaling=function(){this.minfilter(!0),this.magfilter(!0)},n.prototype.enablenearestscaling=function(){this.minfilter(!1),this.magfilter(!1)},n.prototype.enablewrapclamp=function(){var t=this.gl;this.bind(),t.texparameteri(t.texture_2d,t.texture_wrap_s,t.clamp_to_edge),t.texparameteri(t.texture_2d,t.texture_wrap_t,t.clamp_to_edge)},n.prototype.enablewraprepeat=function(){var t=this.gl;this.bind(),t.texparameteri(t.texture_2d,t.texture_wrap_s,t.repeat),t.texparameteri(t.texture_2d,t.texture_wrap_t,t.repeat)},n.prototype.enablewrapmirrorrepeat=function(){var t=this.gl;this.bind(),t.texparameteri(t.texture_2d,t.texture_wrap_s,t.mirrored_repeat),t.texparameteri(t.texture_2d,t.texture_wrap_t,t.mirrored_repeat)},n.prototype.destroy=function(){var t=this.gl;t.deletetexture(this.texture)},n.fromsource=function(t,e,r){var i=new n(t);return i.premultiplyalpha=r||!1,i.upload(e),i},n.fromdata=function(t,e,r,i){var o=new n(t);return o.uploaddata(e,r,i),o},e.exports=n},{}],10:[function(t,e,r){function n(t,e){if(this.nativevaoextension=null,n.force_native||(this.nativevaoextension=t.getextension("oes_vertex_array_object")||t.getextension("moz_oes_vertex_array_object")||t.getextension("webkit_oes_vertex_array_object")),this.nativestate=e,this.nativevaoextension){this.nativevao=this.nativevaoextension.createvertexarrayoes();var r=t.getparameter(t.max_vertex_attribs);this.nativestate={tempattribstate:new array(r),attribstate:new array(r)}}this.gl=t,this.attributes=[],this.indexbuffer=null,this.dirty=!1}var i=t("./setvertexattribarrays");n.prototype.constructor=n,e.exports=n,n.force_native=!1,n.prototype.bind=function(){return this.nativevao?(this.nativevaoextension.bindvertexarrayoes(this.nativevao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},n.prototype.unbind=function(){return this.nativevao&&this.nativevaoextension.bindvertexarrayoes(null),this},n.prototype.activate=function(){for(var t=this.gl,e=null,r=0;r<this.attributes.length;r++){var n=this.attributes[r];e!==n.buffer&&(n.buffer.bind(),e=n.buffer),t.vertexattribpointer(n.attribute.location,n.attribute.size,n.type||t.float,n.normalized||!1,n.stride||0,n.start||0)}return i(t,this.attributes,this.nativestate),this.indexbuffer.bind(),this},n.prototype.addattribute=function(t,e,r,n,i,o){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:r||this.gl.float,normalized:n||!1,stride:i||0,start:o||0}),this.dirty=!0,this},n.prototype.addindex=function(t){return this.indexbuffer=t,this.dirty=!0,this},n.prototype.clear=function(){return this.nativevao&&this.nativevaoextension.bindvertexarrayoes(this.nativevao),this.attributes.length=0,this.indexbuffer=null,this},n.prototype.draw=function(t,e,r){var n=this.gl;return n.drawelements(t,e,n.unsigned_short,r||0),this},n.prototype.destroy=function(){this.gl=null,this.indexbuffer=null,this.attributes=null,this.nativestate=null,this.nativevao&&this.nativevaoextension.deletevertexarrayoes(this.nativevao),this.nativevaoextension=null,this.nativevao=null}},{"./setvertexattribarrays":13}],11:[function(t,e,r){var n=function(t,e){var r=t.getcontext("webgl",e)||t.getcontext("experimental-webgl",e);if(!r)throw new error("this browser does not support webgl. try using the canvas renderer");return r};e.exports=n},{}],12:[function(t,e,r){var n={createcontext:t("./createcontext"),setvertexattribarrays:t("./setvertexattribarrays"),glbuffer:t("./glbuffer"),glframebuffer:t("./glframebuffer"),glshader:t("./glshader"),gltexture:t("./gltexture"),vertexarrayobject:t("./vertexarrayobject"),shader:t("./shader")};"undefined"!=typeof e&&e.exports&&(e.exports=n),"undefined"!=typeof window&&(window.pixi=window.pixi||{},window.pixi.glcore=n)},{"./glbuffer":6,"./glframebuffer":7,"./glshader":8,"./gltexture":9,"./vertexarrayobject":10,"./createcontext":11,"./setvertexattribarrays":13,"./shader":19}],13:[function(t,e,r){var n=function(t,e,r){var n;if(r){var i=r.tempattribstate,o=r.attribstate;for(n=0;n<i.length;n++)i[n]=!1;for(n=0;n<e.length;n++)i[e[n].attribute.location]=!0;for(n=0;n<o.length;n++)o[n]!==i[n]&&(o[n]=i[n],r.attribstate[n]?t.enablevertexattribarray(n):t.disablevertexattribarray(n))}else for(n=0;n<e.length;n++){var s=e[n];t.enablevertexattribarray(s.attribute.location)}};e.exports=n},{}],14:[function(t,e,r){var n=function(t,e,r){var n=i(t,t.vertex_shader,e),o=i(t,t.fragment_shader,r),s=t.createprogram();return t.attachshader(s,n),t.attachshader(s,o),t.linkprogram(s),t.getprogramparameter(s,t.link_status)||(console.error("pixi.js error: could not initialize shader."),console.error("gl.validate_status",t.getprogramparameter(s,t.validate_status)),console.error("gl.geterror()",t.geterror()),""!==t.getprograminfolog(s)&&console.warn("pixi.js warning: gl.getprograminfolog()",t.getprograminfolog(s)),t.deleteprogram(s),s=null),t.deleteshader(n),t.deleteshader(o),s},i=function(t,e,r){var n=t.createshader(e);return t.shadersource(n,r),t.compileshader(n),t.getshaderparameter(n,t.compile_status)?n:(console.log(t.getshaderinfolog(n)),null)};e.exports=n},{}],15:[function(t,e,r){var n=function(t,e){switch(t){case"float":return 0;case"vec2":return new float32array(2*e);case"vec3":return new float32array(3*e);case"vec4":return new float32array(4*e);case"int":case"sampler2d":return 0;case"ivec2":return new int32array(2*e);case"ivec3":return new int32array(3*e);case"ivec4":return new int32array(4*e);case"bool":return!1;case"bvec2":return i(2*e);case"bvec3":return i(3*e);case"bvec4":return i(4*e);case"mat2":return new float32array([1,0,0,1]);case"mat3":return new float32array([1,0,0,0,1,0,0,0,1]);case"mat4":return new float32array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},i=function(t){for(var e=new array(t),r=0;r<e.length;r++)e[r]=!1;return e};e.exports=n},{}],16:[function(t,e,r){var n=t("./maptype"),i=t("./mapsize"),o=function(t,e){for(var r={},o=t.getprogramparameter(e,t.active_attributes),a=0;a<o;a++){var u=t.getactiveattrib(e,a),h=n(t,u.type);r[u.name]={type:h,size:i(h),location:t.getattriblocation(e,u.name),pointer:s}}return r},s=function(t,e,r,n){gl.vertexattribpointer(this.location,this.size,t||gl.float,e||!1,r||0,n||0)};e.exports=o},{"./mapsize":20,"./maptype":21}],17:[function(t,e,r){var n=t("./maptype"),i=t("./defaultvalue"),o=function(t,e){for(var r={},o=t.getprogramparameter(e,t.active_uniforms),s=0;s<o;s++){var a=t.getactiveuniform(e,s),u=a.name.replace(/\[.*?\]/,""),h=n(t,a.type);r[u]={type:h,size:a.size,location:t.getuniformlocation(e,u),value:i(h,a.size)}}return r};e.exports=o},{"./defaultvalue":15,"./maptype":21}],18:[function(t,e,r){var n=function(t,e){var r={data:{}};r.gl=t;for(var n=object.keys(e),a=0;a<n.length;a++){var u=n[a],h=u.split("."),l=h[h.length-1],c=s(h,r),d=e[u];c.data[l]=d,c.gl=t,object.defineproperty(c,l,{get:i(l),set:o(l,d)})}return r},i=function(t){var e=a.replace("%%",t);return new function(e)},o=function(t,e){var r,n=u.replace(/%%/g,t);return r=1===e.size?h[e.type]:l[e.type],r&&(n+="\nthis.gl."+r+";"),new function("value",n)},s=function(t,e){for(var r=e,n=0;n<t.length-1;n++){var i=r[t[n]]||{data:{}};r[t[n]]=i,r=i}return r},a=["return this.data.%%.value;"].join("\n"),u=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),h={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformmatrix2fv(location, false, value)",mat3:"uniformmatrix3fv(location, false, value)",mat4:"uniformmatrix4fv(location, false, value)",sampler2d:"uniform1i(location, value)"},l={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2d:"uniform1iv(location, value)"};e.exports=n},{}],19:[function(t,e,r){e.exports={compileprogram:t("./compileprogram"),defaultvalue:t("./defaultvalue"),extractattributes:t("./extractattributes"),extractuniforms:t("./extractuniforms"),generateuniformaccessobject:t("./generateuniformaccessobject"),mapsize:t("./mapsize"),maptype:t("./maptype")}},{"./compileprogram":14,"./defaultvalue":15,"./extractattributes":16,"./extractuniforms":17,"./generateuniformaccessobject":18,"./mapsize":20,"./maptype":21}],20:[function(t,e,r){var n=function(t){return i[t]},i={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2d:1};e.exports=n},{}],21:[function(t,e,r){var n=function(t,e){if(!i){var r=object.keys(o);i={};for(var n=0;n<r.length;++n){var s=r[n];i[t[s]]=o[s]}}return i[e]},i=null,o={float:"float",float_vec2:"vec2",float_vec3:"vec3",float_vec4:"vec4",int:"int",int_vec2:"ivec2",int_vec3:"ivec3",int_vec4:"ivec4",bool:"bool",bool_vec2:"bvec2",bool_vec3:"bvec3",bool_vec4:"bvec4",float_mat2:"mat2",float_mat3:"mat3",float_mat4:"mat4",sampler_2d:"sampler2d"};e.exports=n},{}],22:[function(t,e,r){(function(t){function e(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var i=/^(\/?|)([\s\s]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};r.resolve=function(){for(var r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new typeerror("arguments to path.resolve must be strings");s&&(r=s+"/"+r,i="/"===s.charat(0))}return r=e(n(r.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+r||"."},r.normalize=function(t){var i=r.isabsolute(t),o="/"===s(t,-1);return t=e(n(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},r.isabsolute=function(t){return"/"===t.charat(0)},r.join=function(){var t=array.prototype.slice.call(arguments,0);return r.normalize(n(t,function(t,e){if("string"!=typeof t)throw new typeerror("arguments to path.join must be strings");return t}).join("/"))},r.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=r.resolve(t).substr(1),e=r.resolve(e).substr(1);for(var i=n(t.split("/")),o=n(e.split("/")),s=math.min(i.length,o.length),a=s,u=0;u<s;u++)if(i[u]!==o[u]){a=u;break}for(var h=[],u=a;u<i.length;u++)h.push("..");return h=h.concat(o.slice(a)),h.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(t){var e=o(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(t,e){var r=o(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},r.extname=function(t){return o(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,t("_process"))},{_process:23}],23:[function(t,e,r){function n(){throw new error("settimeout has not been defined")}function i(){throw new error("cleartimeout has not been defined")}function o(t){if(c===settimeout)return settimeout(t,0);if((c===n||!c)&&settimeout)return c=settimeout,settimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function s(t){if(d===cleartimeout)return cleartimeout(t);if((d===i||!d)&&cleartimeout)return d=cleartimeout,cleartimeout(t);try{return d(t)}catch(e){try{return d.call(null,t)}catch(e){return d.call(this,t)}}}function a(){y&&p&&(y=!1,p.length?v=p.concat(v):g=-1,v.length&&u())}function u(){if(!y){var t=o(a);y=!0;for(var e=v.length;e;){for(p=v,v=[];++g<e;)p&&p[g].run();g=-1,e=v.length}p=null,y=!1,s(t)}}function h(t,e){this.fun=t,this.array=e}function l(){}var c,d,f=e.exports={};!function(){try{c="function"==typeof settimeout?settimeout:n}catch(t){c=n}try{d="function"==typeof cleartimeout?cleartimeout:i}catch(t){
d=i}}();var p,v=[],y=!1,g=-1;f.nexttick=function(t){var e=new array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];v.push(new h(t,e)),1!==v.length||y||o(u)},h.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addlistener=l,f.once=l,f.off=l,f.removelistener=l,f.removealllisteners=l,f.emit=l,f.binding=function(t){throw new error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new error("process.chdir is not supported")},f.umask=function(){return 0}},{}],24:[function(e,r,n){(function(e){!function(i){function o(t){throw new rangeerror(l[t])}function s(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function a(t,e){var r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(d,".");var i=t.split("."),o=s(i,e).join(".");return n+o}function u(t){for(var e,r,n=[],i=0,o=t.length;i<o;)e=t.charcodeat(i++),e>=55296&&e<=56319&&i<o?(r=t.charcodeat(i++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--)):n.push(e);return n}function h(t){return s(t,function(t){var e="";return t>65535&&(t-=65536,e+=k(t>>>10&1023|55296),t=56320|1023&t),e+=k(t)}).join("")}function l(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:w}function c(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function d(t,e,r){var n=0;for(t=r?n(t/p):t>>1,t+=n(t/e);t>f*s>>1;n+=w)t=n(t/f);return n(n+(f+1)*t/(t+o))}function f(t){var e,r,n,i,s,a,u,c,f,p,v=[],y=t.length,g=0,m=c,_=m;for(r=t.lastindexof(r),r<0&&(r=0),n=0;n<r;++n)t.charcodeat(n)>=128&&o("not-basic"),v.push(t.charcodeat(n));for(i=r>0?r+1:0;i<y;){for(s=g,a=1,u=w;i>=y&&o("invalid-input"),c=l(t.charcodeat(i++)),(c>=w||c>n((t-g)/a))&&o("overflow"),g+=c*a,f=u<=_?e:u>=_+s?s:u-_,!(c<f);u+=w)p=w-f,a>n(t/p)&&o("overflow"),a*=p;e=v.length+1,_=d(g-s,e,0==s),n(g/e)>t-m&&o("overflow"),m+=n(g/e),g%=e,v.splice(g++,0,m)}return h(v)}function p(t){var e,r,n,i,s,a,h,l,f,p,v,y,g,m,_,b=[];for(t=u(t),y=t.length,e=c,r=0,s=m,a=0;a<y;++a)v=t[a],v<128&&b.push(k(v));for(n=i=b.length,i&&b.push(r);n<y;){for(h=t,a=0;a<y;++a)v=t[a],v>=e&&v<h&&(h=v);for(g=n+1,h-e>n((t-r)/g)&&o("overflow"),r+=(h-e)*g,e=h,a=0;a<y;++a)if(v=t[a],v<e&&++r>t&&o("overflow"),v==e){for(l=r,f=w;p=f<=s?e:f>=s+s?s:f-s,!(l<p);f+=w)_=l-p,m=w-p,b.push(k(c(p+_%m,0))),l=n(_/m);b.push(k(c(l,0))),s=d(r,g,n==i),r=0,++n}++r,++e}return b.join("")}function v(t){return a(t,function(t){return a.test(t)?f(t.slice(4).tolowercase()):t})}function y(t){return a(t,function(t){return i.test(t)?"xn--"+p(t):t})}var g="object"==typeof n&&n&&!n.nodetype&&n,m="object"==typeof r&&r&&!r.nodetype&&r,_="object"==typeof e&&e;_.global!==_&&_.window!==_&&_.self!==_||(i=_);var b,x,t=2147483647,w=36,e=1,s=26,o=38,p=700,m=72,c=128,r="-",a=/^xn--/,i=/[^\x20-\x7e]/,d=/[\x2e\u3002\uff0e\uff61]/g,l={overflow:"overflow: input needs wider integers to process","not-basic":"illegal input >= 0x80 (not a basic code point)","invalid-input":"invalid input"},f=w-e,n=math.floor,k=string.fromcharcode;if(b={version:"1.4.1",ucs2:{decode:u,encode:h},decode:f,encode:p,toascii:y,tounicode:v},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",function(){return b});else if(g&&m)if(r.exports==g)m.exports=b;else for(x in b)b.hasownproperty(x)&&(g[x]=b[x]);else i.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(t,e,r){"use strict";function n(t,e){return object.prototype.hasownproperty.call(t,e)}e.exports=function(t,e,r,o){e=e||"&",r=r||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxkeys&&(u=o.maxkeys);var h=t.length;u>0&&h>u&&(h=u);for(var l=0;l<h;++l){var c,d,f,p,v=t[l].replace(a,"%20"),y=v.indexof(r);y>=0?(c=v.substr(0,y),d=v.substr(y+1)):(c=v,d=""),f=decodeuricomponent(c),p=decodeuricomponent(d),n(s,f)?i(s[f])?s[f].push(p):s[f]=[s[f],p]:s[f]=p}return s};var i=array.isarray||function(t){return"[object array]"===object.prototype.tostring.call(t)}},{}],26:[function(t,e,r){"use strict";function n(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isfinite(t)?t:"";default:return""}};e.exports=function(t,e,r,a){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?n(s(t),function(s){var a=encodeuricomponent(i(s))+r;return o(t[s])?n(t[s],function(t){return a+encodeuricomponent(i(t))}).join(e):a+encodeuricomponent(i(t[s]))}).join(e):a?encodeuricomponent(i(a))+r+encodeuricomponent(i(t)):""};var o=array.isarray||function(t){return"[object array]"===object.prototype.tostring.call(t)},s=object.keys||function(t){var e=[];for(var r in t)object.prototype.hasownproperty.call(t,r)&&e.push(r);return e}},{}],27:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":25,"./encode":26}],28:[function(t,e,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,r){if(t&&h.isobject(t)&&t instanceof n)return t;var i=new n;return i.parse(t,e,r),i}function o(t){return h.isstring(t)&&(t=i(t)),t instanceof n?t.format():n.prototype.format.call(t)}function s(t,e){return i(t,!1,!0).resolve(e)}function a(t,e){return t?i(t,!1,!0).resolveobject(e):e}var u=t("punycode"),h=t("./util");r.parse=i,r.resolve=s,r.resolveobject=a,r.format=o,r.url=n;var l=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r","\n","\t"],p=["{","}","|","\\","^","`"].concat(f),v=["'"].concat(p),y=["%","/","?",";","#"].concat(v),g=["/","?","#"],m=255,_=/^[+a-z0-9a-z_-]{0,63}$/,b=/^([+a-z0-9a-z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},t={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},e=t("querystring");n.prototype.parse=function(t,e,r){if(!h.isstring(t))throw new typeerror("parameter 'url' must be a string, not "+typeof t);var n=t.indexof("?"),i=n!==-1&&n<t.indexof("#")?"?":"#",o=t.split(i),s=/\\/g;o[0]=o[0].replace(s,"/"),t=o.join(i);var a=t;if(a=a.trim(),!r&&1===t.split("#").length){var c=d.exec(a);if(c)return this.path=a,this.href=a,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=e.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var f=l.exec(a);if(f){f=f[0];var p=f.tolowercase();this.protocol=p,a=a.substr(f.length)}if(r||f||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===a.substr(0,2);!s||f&&t[f]||(a=a.substr(2),this.slashes=!0)}if(!t[f]&&(s||f&&!w[f])){for(var o=-1,p=0;p<g.length;p++){var m=a.indexof(g[p]);m!==-1&&(o===-1||m<o)&&(o=m)}var c,r;r=o===-1?a.lastindexof("@"):a.lastindexof("@",o),r!==-1&&(c=a.slice(0,r),a=a.slice(r+1),this.auth=decodeuricomponent(c)),o=-1;for(var p=0;p<y.length;p++){var m=a.indexof(y[p]);m!==-1&&(o===-1||m<o)&&(o=m)}o===-1&&(o=a.length),this.host=a.slice(0,o),a=a.slice(o),this.parsehost(),this.hostname=this.hostname||"";var a="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!a)for(var i=this.hostname.split(/\./),p=0,d=i.length;p<d;p++){var l=i[p];if(l&&!l.match(_)){for(var f="",n=0,k=l.length;n<k;n++)f+=l.charcodeat(n)>127?"x":l[n];if(!f.match(_)){var j=i.slice(0,p),b=i.slice(p+1),u=l.match(b);u&&(j.push(u[1]),b.unshift(u[2])),b.length&&(a="/"+b.join(".")+a),this.hostname=j.join(".");break}}}this.hostname.length>m?this.hostname="":this.hostname=this.hostname.tolowercase(),a||(this.hostname=u.toascii(this.hostname));var x=this.port?":"+this.port:"",g=this.hostname||"";this.host=g+x,this.href+=this.host,a&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!x[p])for(var p=0,d=v.length;p<d;p++){var w=v[p];if(a.indexof(w)!==-1){var h=encodeuricomponent(w);h===w&&(h=escape(w)),a=a.split(w).join(h)}}var y=a.indexof("#");y!==-1&&(this.hash=a.substr(y),a=a.slice(0,y));var v=a.indexof("?");if(v!==-1?(this.search=a.substr(v),this.query=a.substr(v+1),e&&(this.query=e.parse(this.query)),a=a.slice(0,v)):e&&(this.search="",this.query={}),a&&(this.pathname=a),w[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var x=this.pathname||"",z=this.search||"";this.path=x+z}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeuricomponent(t),t=t.replace(/%3a/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexof(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&h.isobject(this.query)&&object.keys(this.query).length&&(o=e.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||w[e])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charat(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charat(0)&&(n="#"+n),s&&"?"!==s.charat(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(t){return encodeuricomponent(t)}),s=s.replace("#","%23"),e+i+r+s+n},n.prototype.resolve=function(t){return this.resolveobject(i(t,!1,!0)).format()},n.prototype.resolveobject=function(t){if(h.isstring(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var r=new n,i=object.keys(this),o=0;o<i.length;o++){var s=i[o];r[s]=this[s]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=object.keys(t),u=0;u<a.length;u++){var l=a[u];"protocol"!==l&&(r[l]=t[l])}return w[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!w[t.protocol]){for(var c=object.keys(t),d=0;d<c.length;d++){var f=c[d];r[f]=t[f]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||t[t.protocol])r.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var v=r.pathname||"",y=r.search||"";r.path=v+y}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var g=r.pathname&&"/"===r.pathname.charat(0),m=t.host||t.pathname&&"/"===t.pathname.charat(0),_=m||g||r.host&&t.pathname,b=_,x=r.pathname&&r.pathname.split("/")||[],p=t.pathname&&t.pathname.split("/")||[],e=r.protocol&&!w[r.protocol];if(e&&(r.hostname="",r.port=null,r.host&&(""===x[0]?x[0]=r.host:x.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),_=_&&(""===p[0]||""===x[0])),m)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,x=p;else if(p.length)x||(x=[]),x.pop(),x=x.concat(p),r.search=t.search,r.query=t.query;else if(!h.isnullorundefined(t.search)){if(e){r.hostname=r.host=x.shift();var s=!!(r.host&&r.host.indexof("@")>0)&&r.host.split("@");s&&(r.auth=s.shift(),r.host=r.hostname=s.shift())}return r.search=t.search,r.query=t.query,h.isnull(r.pathname)&&h.isnull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!x.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var o=x.slice(-1)[0],p=(r.host||t.host||x.length>1)&&("."===o||".."===o)||""===o,m=0,c=x.length;c>=0;c--)o=x[c],"."===o?x.splice(c,1):".."===o?(x.splice(c,1),m++):m&&(x.splice(c,1),m--);if(!_&&!b)for(;m--;m)x.unshift("..");!_||""===x[0]||x[0]&&"/"===x[0].charat(0)||x.unshift(""),p&&"/"!==x.join("/").substr(-1)&&x.push("");var r=""===x[0]||x[0]&&"/"===x[0].charat(0);if(e){r.hostname=r.host=r?"":x.length?x.shift():"";var s=!!(r.host&&r.host.indexof("@")>0)&&r.host.split("@");s&&(r.auth=s.shift(),r.host=r.hostname=s.shift())}return _=_||r.host&&x.length,_&&!r&&x.unshift(""),x.length?r.pathname=x.join("/"):(r.pathname=null,r.path=null),h.isnull(r.pathname)&&h.isnull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parsehost=function(){var t=this.host,e=c.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":29,punycode:24,querystring:27}],29:[function(t,e,r){"use strict";e.exports={isstring:function(t){return"string"==typeof t},isobject:function(t){return"object"==typeof t&&null!==t},isnull:function(t){return null===t},isnullorundefined:function(t){return null==t}}},{}],30:[function(t,e,r){"use strict";function n(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esmodule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var s="function"==typeof symbol&&"symbol"==typeof symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof symbol&&t.constructor===symbol&&t!==symbol.prototype?"symbol":typeof t},a=t("mini-signals"),u=i(a),h=t("parse-uri"),l=i(h),c=t("./async"),d=n(c),f=t("./resource"),p=i(f),v=100,y=/(#[\w-]+)?$/,g=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;o(this,t),this.baseurl=r,this.progress=0,this.loading=!1,this.defaultquerystring="",this._beforemiddleware=[],this._aftermiddleware=[],this._resourcesparsing=[],this._boundloadresource=function(t,r){return e._loadresource(t,r)},this._queue=d.queue(this._boundloadresource,n),this._queue.pause(),this.resources={},this.onprogress=new u.default,this.onerror=new u.default,this.onload=new u.default,this.onstart=new u.default,this.oncomplete=new u.default}return t.prototype.add=function(t,e,r,n){if(array.isarray(t)){for(var i=0;i<t.length;++i)this.add(t[i]);return this}if("object"===("undefined"==typeof t?"undefined":s(t))&&(n=e||t.callback||t.oncomplete,r=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=r,r=e,e=t),"string"!=typeof e)throw new error("no url passed to add resource to loader.");if("function"==typeof r&&(n=r,r=null),this.loading&&(!r||!r.parentresource))throw new error("cannot add resources while the loader is running.");if(this.resources[t])throw new error('resource named "'+t+'" already exists.');if(e=this._prepareurl(e),this.resources[t]=new p.default(t,e,r),"function"==typeof n&&this.resources[t].onaftermiddleware.once(n),this.loading){for(var o=r.parentresource,a=[],u=0;u<o.children.length;++u)o.children[u].iscomplete||a.push(o.children[u]);var h=o.progresschunk*(a.length+1),l=h/(a.length+2);o.children.push(this.resources[t]),o.progresschunk=l;for(var c=0;c<a.length;++c)a[c].progresschunk=l;this.resources[t].progresschunk=l}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforemiddleware.push(t),this},t.prototype.use=function(t){return this._aftermiddleware.push(t),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var e=this.resources[t];e._onloadbinding&&e._onloadbinding.detach(),e.isloading&&e.abort()}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.oncomplete.once(t),this.loading)return this;for(var e=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progresschunk=e;return this.loading=!0,this.onstart.dispatch(this),this._queue.resume(),this},t.prototype._prepareurl=function(t){var e=(0,l.default)(t,{strictmode:!0}),r=void 0;if(r=e.protocol||!e.path||0===t.indexof("//")?t:this.baseurl.length&&this.baseurl.lastindexof("/")!==this.baseurl.length-1&&"/"!==t.charat(0)?this.baseurl+"/"+t:this.baseurl+t,this.defaultquerystring){var n=y.exec(r)[0];r=r.substr(0,r.length-n.length),r+=r.indexof("?")!==-1?"&"+this.defaultquerystring:"?"+this.defaultquerystring,r+=n}return r},t.prototype._loadresource=function(t,e){var r=this;t._dequeue=e,d.eachseries(this._beforemiddleware,function(e,n){e.call(r,t,function(){n(t.iscomplete?{}:null)})},function(){t.iscomplete?r._onload(t):(t._onloadbinding=t.oncomplete.once(r._onload,r),t.load())})},t.prototype._oncomplete=function(){this.loading=!1,this.oncomplete.dispatch(this,this.resources)},t.prototype._onload=function(t){var e=this;t._onloadbinding=null,t._dequeue(),this._resourcesparsing.push(t),d.eachseries(this._aftermiddleware,function(r,n){r.call(e,t,n)},function(){t.onaftermiddleware.dispatch(t),e.progress+=t.progresschunk,e.onprogress.dispatch(e,t),t.error?e.onerror.dispatch(t.error,e,t):e.onload.dispatch(e,t),e._resourcesparsing.splice(e._resourcesparsing.indexof(t),1),e._queue.idle()&&0===e._resourcesparsing.length&&(e.progress=v,e._oncomplete())})},t}();r.default=g},{"./resource":31,"./async":32,"mini-signals":36,"parse-uri":37}],31:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(){}function s(t,e,r){e&&0===e.indexof(".")&&(e=e.substring(1)),e&&(t[e]=r)}function a(t){return t.tostring().replace("object ","")}r.__esmodule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("parse-uri"),l=n(h),c=t("mini-signals"),d=n(c),f=!(!window.xdomainrequest||"withcredentials"in new xmlhttprequest),p=null,v=0,y=200,g=204,m=function(){function t(e,r,n){if(i(this,t),"string"!=typeof e||"string"!=typeof r)throw new error("both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setflag(t.status_flags.data_url,0===r.indexof("data:")),this.name=e,this.url=r,this.extension=this._getextension(),this.data=null,this.crossorigin=n.crossorigin===!0?"anonymous":n.crossorigin,this.loadtype=n.loadtype||this._determineloadtype(),this.xhrtype=n.xhrtype,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.type.unknown,this.progresschunk=0,this._dequeue=o,this._onloadbinding=null,this._boundcomplete=this.complete.bind(this),this._boundonerror=this._onerror.bind(this),this._boundonprogress=this._onprogress.bind(this),this._boundxhronerror=this._xhronerror.bind(this),this._boundxhronabort=this._xhronabort.bind(this),this._boundxhronload=this._xhronload.bind(this),this._boundxdrontimeout=this._xdrontimeout.bind(this),this.onstart=new d.default,this.onprogress=new d.default,this.oncomplete=new d.default,this.onaftermiddleware=new d.default}return t.setextensionloadtype=function(e,r){s(t._loadtypemap,e,r)},t.setextensionxhrtype=function(e,r){s(t._xhrtypemap,e,r)},t.prototype.complete=function(){if(this.data&&this.data.removeeventlistener&&(this.data.removeeventlistener("error",this._boundonerror,!1),this.data.removeeventlistener("load",this._boundcomplete,!1),this.data.removeeventlistener("progress",this._boundonprogress,!1),this.data.removeeventlistener("canplaythrough",this._boundcomplete,!1)),this.xhr&&(this.xhr.removeeventlistener?(this.xhr.removeeventlistener("error",this._boundxhronerror,!1),this.xhr.removeeventlistener("abort",this._boundxhronabort,!1),this.xhr.removeeventlistener("progress",this._boundonprogress,!1),this.xhr.removeeventlistener("load",this._boundxhronload,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.iscomplete)throw new error("complete called again for an already completed resource.");this._setflag(t.status_flags.complete,!0),this._setflag(t.status_flags.loading,!1),this.oncomplete.dispatch(this)},t.prototype.abort=function(e){if(!this.error){if(this.error=new error(e),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.empty_gif;else for(;this.data.firstchild;)this.data.removechild(this.data.firstchild);this.complete()}},t.prototype.load=function(e){var r=this;if(!this.isloading){if(this.iscomplete)return void(e&&settimeout(function(){return e(r)},1));switch(e&&this.oncomplete.once(e),this._setflag(t.status_flags.loading,!0),this.onstart.dispatch(this),this.crossorigin!==!1&&"string"==typeof this.crossorigin||(this.crossorigin=this._determinecrossorigin(this.url)),this.loadtype){case t.load_type.image:this.type=t.type.image,this._loadelement("image");break;case t.load_type.audio:this.type=t.type.audio,this._loadsourceelement("audio");break;case t.load_type.video:this.type=t.type.video,this._loadsourceelement("video");break;case t.load_type.xhr:default:f&&this.crossorigin?this._loadxdr():this._loadxhr()}}},t.prototype._hasflag=function(t){return!!(this._flags&t)},t.prototype._setflag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._loadelement=function(t){this.metadata.loadelement?this.data=this.metadata.loadelement:"image"===t&&"undefined"!=typeof window.image?this.data=new image:this.data=document.createelement(t),this.crossorigin&&(this.data.crossorigin=this.crossorigin),this.metadata.skipsource||(this.data.src=this.url),this.data.addeventlistener("error",this._boundonerror,!1),this.data.addeventlistener("load",this._boundcomplete,!1),this.data.addeventlistener("progress",this._boundonprogress,!1)},t.prototype._loadsourceelement=function(t){if(this.metadata.loadelement?this.data=this.metadata.loadelement:"audio"===t&&"undefined"!=typeof window.audio?this.data=new audio:this.data=document.createelement(t),null===this.data)return void this.abort("unsupported element: "+t);if(!this.metadata.skipsource)if(navigator.iscocoonjs)this.data.src=array.isarray(this.url)?this.url[0]:this.url;else if(array.isarray(this.url))for(var e=0;e<this.url.length;++e)this.data.appendchild(this._createsource(t,this.url[e]));else this.data.appendchild(this._createsource(t,this.url));this.data.addeventlistener("error",this._boundonerror,!1),this.data.addeventlistener("load",this._boundcomplete,!1),this.data.addeventlistener("progress",this._boundonprogress,!1),this.data.addeventlistener("canplaythrough",this._boundcomplete,!1),this.data.load()},t.prototype._loadxhr=function(){"string"!=typeof this.xhrtype&&(this.xhrtype=this._determinexhrtype());var e=this.xhr=new xmlhttprequest;e.open("get",this.url,!0),this.xhrtype===t.xhr_response_type.json||this.xhrtype===t.xhr_response_type.document?e.responsetype=t.xhr_response_type.text:e.responsetype=this.xhrtype,e.addeventlistener("error",this._boundxhronerror,!1),e.addeventlistener("abort",this._boundxhronabort,!1),e.addeventlistener("progress",this._boundonprogress,!1),e.addeventlistener("load",this._boundxhronload,!1),e.send()},t.prototype._loadxdr=function(){"string"!=typeof this.xhrtype&&(this.xhrtype=this._determinexhrtype());var t=this.xhr=new xdomainrequest;t.timeout=5e3,t.onerror=this._boundxhronerror,t.ontimeout=this._boundxdrontimeout,t.onprogress=this._boundonprogress,t.onload=this._boundxhronload,t.open("get",this.url,!0),settimeout(function(){return t.send()},1)},t.prototype._createsource=function(t,e,r){r||(r=t+"/"+e.substr(e.lastindexof(".")+1));var n=document.createelement("source");return n.src=e,n.type=r,n},t.prototype._onerror=function(t){this.abort("failed to load element using: "+t.target.nodename)},t.prototype._onprogress=function(t){t&&t.lengthcomputable&&this.onprogress.dispatch(this,t.loaded/t.total)},t.prototype._xhronerror=function(){var t=this.xhr;this.abort(a(t)+" request failed. status: "+t.status+', text: "'+t.statustext+'"')},t.prototype._xhronabort=function(){this.abort(a(this.xhr)+" request was aborted by the user.")},t.prototype._xdrontimeout=function(){this.abort(a(this.xhr)+" request timed out.")},t.prototype._xhronload=function(){var e=this.xhr,r="undefined"==typeof e.status?e.status:y;if(!(r===y||r===g||r===v&&e.responsetext.length>0))return void this.abort("["+e.status+"] "+e.statustext+": "+e.responseurl);if(this.xhrtype===t.xhr_response_type.text)this.data=e.responsetext,this.type=t.type.text;else if(this.xhrtype===t.xhr_response_type.json)try{this.data=json.parse(e.responsetext),this.type=t.type.json}catch(t){return void this.abort("error trying to parse loaded json: "+t)}else if(this.xhrtype===t.xhr_response_type.document)try{if(window.domparser){var n=new domparser;this.data=n.parsefromstring(e.responsetext,"text/xml")}else{var i=document.createelement("div");i.innerhtml=e.responsetext,this.data=i}this.type=t.type.xml}catch(t){return void this.abort("error trying to parse loaded xml: "+t)}else this.data=e.response||e.responsetext;this.complete()},t.prototype._determinecrossorigin=function(t,e){if(0===t.indexof("data:"))return"";e=e||window.location,p||(p=document.createelement("a")),p.href=t,t=(0,l.default)(p.href,{strictmode:!0});var r=!t.port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&r&&n===e.protocol?"":"anonymous"},t.prototype._determinexhrtype=function(){return t._xhrtypemap[this.extension]||t.xhr_response_type.text},t.prototype._determineloadtype=function(){return t._loadtypemap[this.extension]||t.load_type.xhr},t.prototype._getextension=function(){var t=this.url,e="";if(this.isdataurl){var r=t.indexof("/");e=t.substring(r+1,t.indexof(";",r))}else{var n=t.indexof("?");n!==-1&&(t=t.substring(0,n)),e=t.substring(t.lastindexof(".")+1)}return e.tolowercase()},t.prototype._getmimefromxhrtype=function(e){switch(e){case t.xhr_response_type.buffer:return"application/octet-binary";case t.xhr_response_type.blob:return"application/blob";case t.xhr_response_type.document:return"application/xml";case t.xhr_response_type.json:return"application/json";case t.xhr_response_type.default:case t.xhr_response_type.text:default:return"text/plain"}},u(t,[{key:"isdataurl",get:function(){return this._hasflag(t.status_flags.data_url)}},{key:"iscomplete",get:function(){return this._hasflag(t.status_flags.complete)}},{key:"isloading",get:function(){return this._hasflag(t.status_flags.loading)}}]),t}();r.default=m,m.status_flags={none:0,data_url:1,complete:2,loading:4},m.type={unknown:0,json:1,xml:2,image:3,audio:4,video:5,text:6},m.load_type={xhr:1,image:2,audio:3,video:4},m.xhr_response_type={default:"text",buffer:"arraybuffer",blob:"blob",document:"document",json:"json",text:"text"},m._loadtypemap={gif:m.load_type.image,png:m.load_type.image,bmp:m.load_type.image,jpg:m.load_type.image,jpeg:m.load_type.image,tif:m.load_type.image,tiff:m.load_type.image,webp:m.load_type.image,tga:m.load_type.image,svg:m.load_type.image,"svg+xml":m.load_type.image,mp3:m.load_type.audio,ogg:m.load_type.audio,wav:m.load_type.audio,mp4:m.load_type.video,webm:m.load_type.video},m._xhrtypemap={xhtml:m.xhr_response_type.document,html:m.xhr_response_type.document,htm:m.xhr_response_type.document,xml:m.xhr_response_type.document,tmx:m.xhr_response_type.document,svg:m.xhr_response_type.document,tsx:m.xhr_response_type.document,gif:m.xhr_response_type.blob,png:m.xhr_response_type.blob,bmp:m.xhr_response_type.blob,jpg:m.xhr_response_type.blob,jpeg:m.xhr_response_type.blob,tif:m.xhr_response_type.blob,tiff:m.xhr_response_type.blob,webp:m.xhr_response_type.blob,tga:m.xhr_response_type.blob,json:m.xhr_response_type.json,text:m.xhr_response_type.text,txt:m.xhr_response_type.text,ttf:m.xhr_response_type.buffer,otf:m.xhr_response_type.buffer},m.empty_gif="data:image/gif;base64,r0lgodlhaqabaiaaap///waaach5baeaaaaalaaaaaabaaeaaaicraeaow=="},{"mini-signals":36,"parse-uri":37}],32:[function(t,e,r){"use strict";function n(){}function i(t,e,r){var n=0,i=t.length;!function o(s){return s||n===i?void(r&&r(s)):void e(t[n++],o)}()}function o(t){return function(){if(null===t)throw new error("callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function s(t,e){function r(t,e,r){if(null!=r&&"function"!=typeof r)throw new error("task callback must be a function");if(a.started=!0,null==t&&a.idle())return void settimeout(function(){return a.drain()},1);var i={data:t,callback:"function"==typeof r?r:n};e?a._tasks.unshift(i):a._tasks.push(i),settimeout(function(){return a.process()},1)}function i(t){return function(){s-=1,t.callback.apply(t,arguments),null!=arguments[0]&&a.error(arguments[0],t.data),s<=a.concurrency-a.buffer&&a.unsaturated(),a.idle()&&a.drain(),a.process()}}if(null==e)e=1;else if(0===e)throw new error("concurrency must not be zero");var s=0,a={_tasks:[],concurrency:e,saturated:n,unsaturated:n,buffer:e/4,empty:n,drain:n,error:n,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){s=0,a.drain=n,a.started=!1,a._tasks=[]},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!a.paused&&s<a.concurrency&&a._tasks.length;){var e=a._tasks.shift();0===a._tasks.length&&a.empty(),s+=1,s===a.concurrency&&a.saturated(),t(e.data,o(i(e)))}},length:function(){return a._tasks.length},running:function(){return s},idle:function(){return a._tasks.length+s===0},pause:function(){a.paused!==!0&&(a.paused=!0)},resume:function(){if(a.paused!==!1){a.paused=!1;for(var t=1;t<=a.concurrency;t++)a.process()}}};return a}r.__esmodule=!0,r.eachseries=i,r.queue=s},{}],33:[function(t,e,r){"use strict";function n(t){for(var e="",r=0;r<t.length;){for(var n=[0,0,0],o=[0,0,0,0],s=0;s<n.length;++s)r<t.length?n[s]=255&t.charcodeat(r++):n[s]=0;o[0]=n[0]>>2,o[1]=(3&n[0])<<4|n[1]>>4,o[2]=(15&n[1])<<2|n[2]>>6,o[3]=63&n[2];var a=r-(t.length-1);switch(a){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64}for(var u=0;u<o.length;++u)e+=i.charat(o[u])}return e}r.__esmodule=!0,r.encodebinary=n;var i="abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz0123456789+/="},{}],34:[function(t,e,r){"use strict";function n(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esmodule?t:{default:t}}r.__esmodule=!0;var o=t("./loader"),s=i(o),a=t("./resource"),u=i(a),h=t("./async"),l=n(h),c=t("./b64"),d=n(c);s.default.resource=u.default,s.default.async=l,s.default.base64=d,e.exports=s.default,r.default=s.default},{"./loader":30,"./resource":31,"./async":32,"./b64":33}],35:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(){return function(t,e){if(!t.data)return void e();if(t.xhr&&t.xhrtype===a.default.xhr_response_type.blob)if(window.blob&&"string"!=typeof t.data){if(0===t.data.type.indexof("image")){var r=function(){var r=l.createobjecturl(t.data);return t.blob=t.data,t.data=new image,t.data.src=r,t.type=a.default.type.image,t.data.onload=function(){l.revokeobjecturl(r),t.data.onload=null,e()},{v:void 0}}();if("object"===("undefined"==typeof r?"undefined":o(r)))return r.v}}else{var n=t.xhr.getresponseheader("content-type");if(n&&0===n.indexof("image"))return t.data=new image,t.data.src="data:"+n+";base64,"+h.default.encodebinary(t.xhr.responsetext),t.type=a.default.type.image,void(t.data.onload=function(){t.data.onload=null,e()})}e()}}r.__esmodule=!0;var o="function"==typeof symbol&&"symbol"==typeof symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof symbol&&t.constructor===symbol&&t!==symbol.prototype?"symbol":typeof t};r.blobmiddlewarefactory=i;var s=t("../../resource"),a=n(s),u=t("../../b64"),h=n(u),l=window.url||window.webkiturl},{"../../resource":31,"../../b64":33}],36:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function i(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}object.defineproperty(r,"__esmodule",{
value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=function(){function t(e,r,i){void 0===r&&(r=!1),n(this,t),this._fn=e,this._once=r,this._thisarg=i,this._next=this._prev=this._owner=null}return o(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}(),a=function(){function t(){n(this,t),this._head=this._tail=void 0}return o(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var r=[];e;)r.push(e),e=e._next;return r}},{key:"has",value:function(t){if(!(t instanceof s))throw new error("minisignal#has(): first arg must be a minisignalbinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisarg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new error("minisignal#add(): first arg must be a function.");return i(this,new s(t,(!1),e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new error("minisignal#once(): first arg must be a function.");return i(this,new s(t,(!0),e))}},{key:"detach",value:function(t){if(!(t instanceof s))throw new error("minisignal#detach(): first arg must be a minisignalbinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachall",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.minisignalbinding=s,r.default=a,e.exports=r.default},{}],37:[function(t,e,r){"use strict";e.exports=function(t,e){e=e||{};for(var r={key:["source","protocol","authority","userinfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"querykey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[e.strictmode?"strict":"loose"].exec(t),i={},o=14;o--;)i[r.key[o]]=n[o]||"";return i[r.q.name]={},i[r.key[12]].replace(r.q.parser,function(t,e,n){e&&(i[r.q.name][e]=n)}),i}},{}],38:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var s=t("../core"),a=i(s),u=t("ismobilejs"),h=n(u),l=t("./accessibletarget"),c=n(l);a.utils.mixins.delaymixin(a.displayobject.prototype,c.default);var d=9,f=100,p=0,v=0,y=2,g=1,m=-1e3,_=-1e3,b=2,x=function(){function t(e){o(this,t),!h.default.tablet&&!h.default.phone||navigator.iscocoonjs||this.createtouchhook();var r=document.createelement("div");r.style.width=f+"px",r.style.height=f+"px",r.style.position="absolute",r.style.top=p+"px",r.style.left=v+"px",r.style.zindex=y,this.div=r,this.pool=[],this.renderid=0,this.debug=!1,this.renderer=e,this.children=[],this._onkeydown=this._onkeydown.bind(this),this._onmousemove=this._onmousemove.bind(this),this.isactive=!1,this.ismobileaccessabillity=!1,window.addeventlistener("keydown",this._onkeydown,!1)}return t.prototype.createtouchhook=function(){var t=this,e=document.createelement("button");e.style.width=g+"px",e.style.height=g+"px",e.style.position="absolute",e.style.top=m+"px",e.style.left=_+"px",e.style.zindex=b,e.style.backgroundcolor="#ff0000",e.title="hook div",e.addeventlistener("focus",function(){t.ismobileaccessabillity=!0,t.activate(),document.body.removechild(e)}),document.body.appendchild(e)},t.prototype.activate=function(){this.isactive||(this.isactive=!0,window.document.addeventlistener("mousemove",this._onmousemove,!0),window.removeeventlistener("keydown",this._onkeydown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentnode&&this.renderer.view.parentnode.appendchild(this.div))},t.prototype.deactivate=function(){this.isactive&&!this.ismobileaccessabillity&&(this.isactive=!1,window.document.removeeventlistener("mousemove",this._onmousemove),window.addeventlistener("keydown",this._onkeydown,!1),this.renderer.off("postrender",this.update),this.div.parentnode&&this.div.parentnode.removechild(this.div))},t.prototype.updateaccessibleobjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleactive||this.addchild(t),t.renderid=this.renderid);for(var e=t.children,r=e.length-1;r>=0;r--)this.updateaccessibleobjects(e[r])}},t.prototype.update=function(){if(this.renderer.renderingtoscreen){this.updateaccessibleobjects(this.renderer._lastobjectrendered);var t=this.renderer.view.getboundingclientrect(),e=t.width/this.renderer.width,r=t.height/this.renderer.height,n=this.div;n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var i=0;i<this.children.length;i++){var o=this.children[i];if(o.renderid!==this.renderid)o._accessibleactive=!1,a.utils.removeitems(this.children,i,1),this.div.removechild(o._accessiblediv),this.pool.push(o._accessiblediv),o._accessiblediv=null,i--,0===this.children.length&&this.deactivate();else{n=o._accessiblediv;var s=o.hitarea,u=o.worldtransform;o.hitarea?(n.style.left=(u.tx+s.x*u.a)*e+"px",n.style.top=(u.ty+s.y*u.d)*r+"px",n.style.width=s.width*u.a*e+"px",n.style.height=s.height*u.d*r+"px"):(s=o.getbounds(),this.caphitarea(s),n.style.left=s.x*e+"px",n.style.top=s.y*r+"px",n.style.width=s.width*e+"px",n.style.height=s.height*r+"px")}}this.renderid++}},t.prototype.caphitarea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addchild=function(t){var e=this.pool.pop();e||(e=document.createelement("button"),e.style.width=f+"px",e.style.height=f+"px",e.style.backgroundcolor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zindex=y,e.style.borderstyle="none",e.addeventlistener("click",this._onclick.bind(this)),e.addeventlistener("focus",this._onfocus.bind(this)),e.addeventlistener("focusout",this._onfocusout.bind(this))),t.accessibletitle?e.title=t.accessibletitle:t.accessibletitle||t.accessiblehint||(e.title="displayobject "+this.tabindex),t.accessiblehint&&e.setattribute("aria-label",t.accessiblehint),t._accessibleactive=!0,t._accessiblediv=e,e.displayobject=t,this.children.push(t),this.div.appendchild(t._accessiblediv),t._accessiblediv.tabindex=t.tabindex},t.prototype._onclick=function(t){var e=this.renderer.plugins.interaction;e.dispatchevent(t.target.displayobject,"click",e.eventdata)},t.prototype._onfocus=function(t){var e=this.renderer.plugins.interaction;e.dispatchevent(t.target.displayobject,"mouseover",e.eventdata)},t.prototype._onfocusout=function(t){var e=this.renderer.plugins.interaction;e.dispatchevent(t.target.displayobject,"mouseout",e.eventdata)},t.prototype._onkeydown=function(t){t.keycode===d&&this.activate()},t.prototype._onmousemove=function(){this.deactivate()},t.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeeventlistener("mousemove",this._onmousemove),window.removeeventlistener("keydown",this._onkeydown),this.pool=null,this.children=null,this.renderer=null},t}();r.default=x,a.webglrenderer.registerplugin("accessibility",x),a.canvasrenderer.registerplugin("accessibility",x)},{"../core":63,"./accessibletarget":39,ismobilejs:4}],39:[function(t,e,r){"use strict";r.__esmodule=!0,r.default={accessible:!1,accessibletitle:null,accessiblehint:null,tabindex:0,_accessibleactive:!1,_accessiblediv:!1}},{}],40:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}r.__esmodule=!0;var i=t("./accessibletarget");object.defineproperty(r,"accessibletarget",{enumerable:!0,get:function(){return n(i).default}});var o=t("./accessibilitymanager");object.defineproperty(r,"accessibilitymanager",{enumerable:!0,get:function(){return n(o).default}})},{"./accessibilitymanager":38,"./accessibletarget":39}],41:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=t("./autodetectrenderer"),a=t("./display/container"),u=n(a),h=t("./ticker"),l=t("./settings"),c=n(l),d=t("./const"),f=function(){function t(e,r,n,o,a){i(this,t),"number"==typeof e&&(e=object.assign({width:e,height:r||c.default.render_options.height,forcecanvas:!!o,sharedticker:!!a},n)),this._options=e=object.assign({sharedticker:!1,forcecanvas:!1,sharedloader:!1},e),this.renderer=(0,s.autodetectrenderer)(e),this.stage=new u.default,this._ticker=null,this.ticker=e.sharedticker?h.shared:new h.ticker,this.start()}return t.prototype.render=function(){this.renderer.render(this.stage)},t.prototype.stop=function(){this._ticker.stop()},t.prototype.start=function(){this._ticker.start()},t.prototype.destroy=function(t){var e=this._ticker;this.ticker=null,e.destroy(),this.stage.destroy(),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},o(t,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,d.update_priority.low)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),t}();r.default=f},{"./autodetectrenderer":43,"./const":44,"./display/container":46,"./settings":99,"./ticker":118}],42:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}function a(t,e){if(t instanceof array){if("precision"!==t[0].substring(0,9)){var r=t.slice(0);return r.unshift("precision "+e+" float;"),r}}else if("precision"!==t.substring(0,9))return"precision "+e+" float;\n"+t;return t}r.__esmodule=!0;var u=t("pixi-gl-core"),h=t("./settings"),l=n(h),c=function(t){function e(r,n,s){return i(this,e),o(this,t.call(this,r,a(n,l.default.precision_vertex),a(s,l.default.precision_fragment)))}return s(e,t),e}(u.glshader);r.default=c},{"./settings":99,"pixi-gl-core":12}],43:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e,r,n){var i=t&&t.forcecanvas;return void 0!==n&&(i=n),!i&&a.iswebglsupported()?new c.default(t,e,r):new h.default(t,e,r)}r.__esmodule=!0,r.autodetectrenderer=o;var s=t("./utils"),a=i(s),u=t("./renderers/canvas/canvasrenderer"),h=n(u),l=t("./renderers/webgl/webglrenderer"),c=n(l)},{"./renderers/canvas/canvasrenderer":75,"./renderers/webgl/webglrenderer":82,"./utils":122}],44:[function(t,e,r){"use strict";r.__esmodule=!0;r.version="4.5.1",r.pi_2=2*math.pi,r.rad_to_deg=180/math.pi,r.deg_to_rad=math.pi/180,r.renderer_type={unknown:0,webgl:1,canvas:2},r.blend_modes={normal:0,add:1,multiply:2,screen:3,overlay:4,darken:5,lighten:6,color_dodge:7,color_burn:8,hard_light:9,soft_light:10,difference:11,exclusion:12,hue:13,saturation:14,color:15,luminosity:16},r.draw_modes={points:0,lines:1,line_loop:2,line_strip:3,triangles:4,triangle_strip:5,triangle_fan:6},r.scale_modes={linear:0,nearest:1},r.wrap_modes={clamp:0,repeat:1,mirrored_repeat:2},r.gc_modes={auto:0,manual:1},r.url_file_extension=/\.(\w{3,4})(?:$|\?|#)/i,r.data_uri=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,r.svg_size=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,r.shapes={poly:0,rect:1,circ:2,elip:3,rrec:4},r.precision={low:"lowp",medium:"mediump",high:"highp"},r.transform_mode={static:0,dynamic:1},r.text_gradient={linear_vertical:0,linear_horizontal:1},r.update_priority={interaction:50,high:25,normal:0,low:-25,utility:-50}},{}],45:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var i=t("../math"),o=function(){function t(){n(this,t),this.minx=1/0,this.miny=1/0,this.maxx=-(1/0),this.maxy=-(1/0),this.rect=null}return t.prototype.isempty=function(){return this.minx>this.maxx||this.miny>this.maxy},t.prototype.clear=function(){this.updateid++,this.minx=1/0,this.miny=1/0,this.maxx=-(1/0),this.maxy=-(1/0)},t.prototype.getrectangle=function(t){return this.minx>this.maxx||this.miny>this.maxy?i.rectangle.empty:(t=t||new i.rectangle(0,0,1,1),t.x=this.minx,t.y=this.miny,t.width=this.maxx-this.minx,t.height=this.maxy-this.miny,t)},t.prototype.addpoint=function(t){this.minx=math.min(this.minx,t.x),this.maxx=math.max(this.maxx,t.x),this.miny=math.min(this.miny,t.y),this.maxy=math.max(this.maxy,t.y)},t.prototype.addquad=function(t){var e=this.minx,r=this.miny,n=this.maxx,i=this.maxy,o=t[0],s=t[1];e=o<e?o:e,r=s<r?s:r,n=o>n?o:n,i=s>i?s:i,o=t[2],s=t[3],e=o<e?o:e,r=s<r?s:r,n=o>n?o:n,i=s>i?s:i,o=t[4],s=t[5],e=o<e?o:e,r=s<r?s:r,n=o>n?o:n,i=s>i?s:i,o=t[6],s=t[7],e=o<e?o:e,r=s<r?s:r,n=o>n?o:n,i=s>i?s:i,this.minx=e,this.miny=r,this.maxx=n,this.maxy=i},t.prototype.addframe=function(t,e,r,n,i){var o=t.worldtransform,s=o.a,a=o.b,u=o.c,h=o.d,l=o.tx,c=o.ty,d=this.minx,f=this.miny,p=this.maxx,v=this.maxy,y=s*e+u*r+l,g=a*e+h*r+c;d=y<d?y:d,f=g<f?g:f,p=y>p?y:p,v=g>v?g:v,y=s*n+u*r+l,g=a*n+h*r+c,d=y<d?y:d,f=g<f?g:f,p=y>p?y:p,v=g>v?g:v,y=s*e+u*i+l,g=a*e+h*i+c,d=y<d?y:d,f=g<f?g:f,p=y>p?y:p,v=g>v?g:v,y=s*n+u*i+l,g=a*n+h*i+c,d=y<d?y:d,f=g<f?g:f,p=y>p?y:p,v=g>v?g:v,this.minx=d,this.miny=f,this.maxx=p,this.maxy=v},t.prototype.addvertices=function(t,e,r,n){for(var i=t.worldtransform,o=i.a,s=i.b,a=i.c,u=i.d,h=i.tx,l=i.ty,c=this.minx,d=this.miny,f=this.maxx,p=this.maxy,v=r;v<n;v+=2){var y=e[v],g=e[v+1],m=o*y+a*g+h,_=u*g+s*y+l;c=m<c?m:c,d=_<d?_:d,f=m>f?m:f,p=_>p?_:p}this.minx=c,this.miny=d,this.maxx=f,this.maxy=p},t.prototype.addbounds=function(t){var e=this.minx,r=this.miny,n=this.maxx,i=this.maxy;this.minx=t.minx<e?t.minx:e,this.miny=t.miny<r?t.miny:r,this.maxx=t.maxx>n?t.maxx:n,this.maxy=t.maxy>i?t.maxy:i},t.prototype.addboundsmask=function(t,e){var r=t.minx>e.minx?t.minx:e.minx,n=t.miny>e.miny?t.miny:e.miny,i=t.maxx<e.maxx?t.maxx:e.maxx,o=t.maxy<e.maxy?t.maxy:e.maxy;if(r<=i&&n<=o){var s=this.minx,a=this.miny,u=this.maxx,h=this.maxy;this.minx=r<s?r:s,this.miny=n<a?n:a,this.maxx=i>u?i:u,this.maxy=o>h?o:h}},t.prototype.addboundsarea=function(t,e){var r=t.minx>e.x?t.minx:e.x,n=t.miny>e.y?t.miny:e.y,i=t.maxx<e.x+e.width?t.maxx:e.x+e.width,o=t.maxy<e.y+e.height?t.maxy:e.y+e.height;if(r<=i&&n<=o){var s=this.minx,a=this.miny,u=this.maxx,h=this.maxy;this.minx=r<s?r:s,this.miny=n<a?n:a,this.maxx=i>u?i:u,this.maxy=o>h?o:h}},t}();r.default=o},{"../math":68}],46:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("../utils"),h=t("./displayobject"),l=n(h),c=function(t){function e(){i(this,e);var r=o(this,t.call(this));return r.children=[],r}return s(e,t),e.prototype.onchildrenchange=function(){},e.prototype.addchild=function(t){var e=arguments.length;if(e>1)for(var r=0;r<e;r++)this.addchild(arguments[r]);else t.parent&&t.parent.removechild(t),t.parent=this,t.transform._parentid=-1,this.children.push(t),this._boundsid++,this.onchildrenchange(this.children.length-1),t.emit("added",this);return t},e.prototype.addchildat=function(t,e){if(e<0||e>this.children.length)throw new error(t+"addchildat: the index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removechild(t),t.parent=this,t.transform._parentid=-1,this.children.splice(e,0,t),this._boundsid++,this.onchildrenchange(e),t.emit("added",this),t},e.prototype.swapchildren=function(t,e){if(t!==e){var r=this.getchildindex(t),n=this.getchildindex(e);this.children[r]=e,this.children[n]=t,this.onchildrenchange(r<n?r:n)}},e.prototype.getchildindex=function(t){var e=this.children.indexof(t);if(e===-1)throw new error("the supplied displayobject must be a child of the caller");return e},e.prototype.setchildindex=function(t,e){if(e<0||e>=this.children.length)throw new error("the supplied index is out of bounds");var r=this.getchildindex(t);(0,u.removeitems)(this.children,r,1),this.children.splice(e,0,t),this.onchildrenchange(e)},e.prototype.getchildat=function(t){if(t<0||t>=this.children.length)throw new error("getchildat: index ("+t+") does not exist.");return this.children[t]},e.prototype.removechild=function(t){var e=arguments.length;if(e>1)for(var r=0;r<e;r++)this.removechild(arguments[r]);else{var n=this.children.indexof(t);if(n===-1)return null;t.parent=null,t.transform._parentid=-1,(0,u.removeitems)(this.children,n,1),this._boundsid++,this.onchildrenchange(n),t.emit("removed",this)}return t},e.prototype.removechildat=function(t){var e=this.getchildat(t);return e.parent=null,e.transform._parentid=-1,(0,u.removeitems)(this.children,t,1),this._boundsid++,this.onchildrenchange(t),e.emit("removed",this),e},e.prototype.removechildren=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],r=t,n="number"==typeof e?e:this.children.length,i=n-r,o=void 0;if(i>0&&i<=n){o=this.children.splice(r,i);for(var s=0;s<o.length;++s)o[s].parent=null,o[s].transform&&(o[s].transform._parentid=-1);this._boundsid++,this.onchildrenchange(t);for(var a=0;a<o.length;++a)o[a].emit("removed",this);return o}if(0===i&&0===this.children.length)return[];throw new rangeerror("removechildren: numeric values are outside the acceptable range.")},e.prototype.updatetransform=function(){this._boundsid++,this.transform.updatetransform(this.parent.transform),this.worldalpha=this.alpha*this.parent.worldalpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updatetransform()}},e.prototype.calculatebounds=function(){this._bounds.clear(),this._calculatebounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculatebounds(),e._mask?(e._mask.calculatebounds(),this._bounds.addboundsmask(e._bounds,e._mask._bounds)):e.filterarea?this._bounds.addboundsarea(e._bounds,e.filterarea):this._bounds.addbounds(e._bounds))}this._lastboundsid=this._boundsid},e.prototype._calculatebounds=function(){},e.prototype.renderwebgl=function(t){if(this.visible&&!(this.worldalpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderadvancedwebgl(t);else{this._renderwebgl(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].renderwebgl(t)}},e.prototype.renderadvancedwebgl=function(t){t.flush();var e=this._filters,r=this._mask;if(e){this._enabledfilters||(this._enabledfilters=[]),this._enabledfilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledfilters.push(e[n]);this._enabledfilters.length&&t.filtermanager.pushfilter(this,this._enabledfilters)}r&&t.maskmanager.pushmask(this,this._mask),this._renderwebgl(t);for(var i=0,o=this.children.length;i<o;i++)this.children[i].renderwebgl(t);t.flush(),r&&t.maskmanager.popmask(this,this._mask),e&&this._enabledfilters&&this._enabledfilters.length&&t.filtermanager.popfilter()},e.prototype._renderwebgl=function(t){},e.prototype._rendercanvas=function(t){},e.prototype.rendercanvas=function(t){if(this.visible&&!(this.worldalpha<=0)&&this.renderable){this._mask&&t.maskmanager.pushmask(this._mask),this._rendercanvas(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].rendercanvas(t);this._mask&&t.maskmanager.popmask(t)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var r="boolean"==typeof e?e:e&&e.children,n=this.removechildren(0,this.children.length);if(r)for(var i=0;i<n.length;++i)n[i].destroy(e)},a(e,[{key:"width",get:function(){return this.scale.x*this.getlocalbounds().width},set:function(t){var e=this.getlocalbounds().width;0!==e?this.scale.x=t/e:this.scale.x=1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getlocalbounds().height},set:function(t){var e=this.getlocalbounds().height;0!==e?this.scale.y=t/e:this.scale.y=1,this._height=t}}]),e}(l.default);r.default=c,c.prototype.containerupdatetransform=c.prototype.updatetransform},{"../utils":122,"./displayobject":47}],47:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("eventemitter3"),h=n(u),l=t("../const"),c=t("../settings"),d=n(c),f=t("./transformstatic"),p=n(f),v=t("./transform"),y=n(v),g=t("./bounds"),m=n(g),_=t("../math"),b=function(t){function e(){i(this,e);var r=o(this,t.call(this)),n=d.default.transform_mode===l.transform_mode.static?p.default:y.default;return r.tempdisplayobjectparent=null,r.transform=new n,r.alpha=1,r.visible=!0,r.renderable=!0,r.parent=null,r.worldalpha=1,r.filterarea=null,r._filters=null,r._enabledfilters=null,r._bounds=new m.default,r._boundsid=0,r._lastboundsid=-1,r._boundsrect=null,r._localboundsrect=null,r._mask=null,r._destroyed=!1,r}return s(e,t),e.prototype.updatetransform=function(){this.transform.updatetransform(this.parent.transform),this.worldalpha=this.alpha*this.parent.worldalpha,this._bounds.updateid++},e.prototype._recursivepostupdatetransform=function(){this.parent?(this.parent._recursivepostupdatetransform(),this.transform.updatetransform(this.parent.transform)):this.transform.updatetransform(this._tempdisplayobjectparent.transform)},e.prototype.getbounds=function(t,e){return t||(this.parent?(this._recursivepostupdatetransform(),this.updatetransform()):(this.parent=this._tempdisplayobjectparent,this.updatetransform(),this.parent=null)),this._boundsid!==this._lastboundsid&&this.calculatebounds(),e||(this._boundsrect||(this._boundsrect=new _.rectangle),e=this._boundsrect),this._bounds.getrectangle(e)},e.prototype.getlocalbounds=function(t){var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempdisplayobjectparent.transform,t||(this._localboundsrect||(this._localboundsrect=new _.rectangle),t=this._localboundsrect);var n=this.getbounds(!1,t);return this.parent=r,this.transform=e,n},e.prototype.toglobal=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r||(this._recursivepostupdatetransform(),this.parent?this.displayobjectupdatetransform():(this.parent=this._tempdisplayobjectparent,this.displayobjectupdatetransform(),this.parent=null)),this.worldtransform.apply(t,e)},e.prototype.tolocal=function(t,e,r,n){return e&&(t=e.toglobal(t,r,n)),n||(this._recursivepostupdatetransform(),this.parent?this.displayobjectupdatetransform():(this.parent=this._tempdisplayobjectparent,this.displayobjectupdatetransform(),this.parent=null)),this.worldtransform.applyinverse(t,r)},e.prototype.renderwebgl=function(t){},e.prototype.rendercanvas=function(t){},e.prototype.setparent=function(t){if(!t||!t.addchild)throw new error("setparent: argument must be a container");return t.addchild(this),t},e.prototype.settransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=r?r:1,this.scale.y=n?n:1,this.rotation=i,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=u,this},e.prototype.destroy=function(){this.removealllisteners(),this.parent&&this.parent.removechild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentbounds=null,this._mask=null,this.filterarea=null,this.interactive=!1,this.interactivechildren=!1,this._destroyed=!0},a(e,[{key:"_tempdisplayobjectparent",get:function(){return null===this.tempdisplayobjectparent&&(this.tempdisplayobjectparent=new e),this.tempdisplayobjectparent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldtransform",get:function(){return this.transform.worldtransform}},{key:"localtransform",get:function(){return this.transform.localtransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldvisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(h.default);r.default=b,b.prototype.displayobjectupdatetransform=b.prototype.updatetransform},{"../const":44,"../math":68,"../settings":99,"./bounds":45,"./transform":48,"./transformstatic":50,eventemitter3:3}],48:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("../math"),h=t("./transformbase"),l=n(h),c=function(t){function e(){i(this,e);var r=o(this,t.call(this));return r.position=new u.point(0,0),r.scale=new u.point(1,1),r.skew=new u.observablepoint(r.updateskew,r,0,0),r.pivot=new u.point(0,0),r._rotation=0,r._cx=1,r._sx=0,r._cy=0,r._sy=1,r}return s(e,t),e.prototype.updateskew=function(){this._cx=math.cos(this._rotation+this.skew._y),this._sx=math.sin(this._rotation+this.skew._y),this._cy=-math.sin(this._rotation-this.skew._x),this._sy=math.cos(this._rotation-this.skew._x)},e.prototype.updatelocaltransform=function(){var t=this.localtransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updatetransform=function(t){var e=this.localtransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var r=t.worldtransform,n=this.worldtransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._worldid++},e.prototype.setfrommatrix=function(t){t.decompose(this)},a(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateskew()}}]),e}(l.default);r.default=c},{"../math":68,"./transformbase":49}],49:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var i=t("../math"),o=function(){function t(){n(this,t),this.worldtransform=new i.matrix,this.localtransform=new i.matrix,this._worldid=0,this._parentid=0}return t.prototype.updatelocaltransform=function(){},t.prototype.updatetransform=function(t){var e=t.worldtransform,r=this.worldtransform,n=this.localtransform;r.a=n.a*e.a+n.b*e.c,r.b=n.a*e.b+n.b*e.d,r.c=n.c*e.a+n.d*e.c,r.d=n.c*e.b+n.d*e.d,r.tx=n.tx*e.a+n.ty*e.c+e.tx,r.ty=n.tx*e.b+n.ty*e.d+e.ty,this._worldid++},t}();r.default=o,o.prototype.updateworldtransform=o.prototype.updatetransform,o.identity=new o},{"../math":68}],50:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{
default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("../math"),h=t("./transformbase"),l=n(h),c=function(t){function e(){i(this,e);var r=o(this,t.call(this));return r.position=new u.observablepoint(r.onchange,r,0,0),r.scale=new u.observablepoint(r.onchange,r,1,1),r.pivot=new u.observablepoint(r.onchange,r,0,0),r.skew=new u.observablepoint(r.updateskew,r,0,0),r._rotation=0,r._cx=1,r._sx=0,r._cy=0,r._sy=1,r._localid=0,r._currentlocalid=0,r}return s(e,t),e.prototype.onchange=function(){this._localid++},e.prototype.updateskew=function(){this._cx=math.cos(this._rotation+this.skew._y),this._sx=math.sin(this._rotation+this.skew._y),this._cy=-math.sin(this._rotation-this.skew._x),this._sy=math.cos(this._rotation-this.skew._x),this._localid++},e.prototype.updatelocaltransform=function(){var t=this.localtransform;this._localid!==this._currentlocalid&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentlocalid=this._localid,this._parentid=-1)},e.prototype.updatetransform=function(t){var e=this.localtransform;if(this._localid!==this._currentlocalid&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentlocalid=this._localid,this._parentid=-1),this._parentid!==t._worldid){var r=t.worldtransform,n=this.worldtransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentid=t._worldid,this._worldid++}},e.prototype.setfrommatrix=function(t){t.decompose(this),this._localid++},a(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateskew()}}]),e}(l.default);r.default=c},{"../math":68,"./transformbase":49}],51:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=t("../display/container"),u=n(a),h=t("../textures/rendertexture"),l=n(h),c=t("../textures/texture"),d=n(c),f=t("./graphicsdata"),p=n(f),v=t("../sprites/sprite"),y=n(v),g=t("../math"),m=t("../utils"),_=t("../const"),b=t("../display/bounds"),x=n(b),t=t("./utils/beziercurveto"),w=n(t),e=t("../renderers/canvas/canvasrenderer"),s=n(e),o=void 0,p=new g.matrix,m=new g.point,c=new float32array(4),r=new float32array(4),a=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i(this,e);var n=o(this,t.call(this));return n.fillalpha=1,n.linewidth=0,n.nativelines=r,n.linecolor=0,n.graphicsdata=[],n.tint=16777215,n._prevtint=16777215,n.blendmode=_.blend_modes.normal,n.currentpath=null,n._webgl={},n.ismask=!1,n.boundspadding=0,n._localbounds=new x.default,n.dirty=0,n.fastrectdirty=-1,n.cleardirty=0,n.boundsdirty=-1,n.cachedspritedirty=!1,n._spriterect=null,n._fastrect=!1,n}return s(e,t),e.prototype.clone=function t(){var t=new e;t.renderable=this.renderable,t.fillalpha=this.fillalpha,t.linewidth=this.linewidth,t.linecolor=this.linecolor,t.tint=this.tint,t.blendmode=this.blendmode,t.ismask=this.ismask,t.boundspadding=this.boundspadding,t.dirty=0,t.cachedspritedirty=this.cachedspritedirty;for(var r=0;r<this.graphicsdata.length;++r)t.graphicsdata.push(this.graphicsdata[r].clone());return t.currentpath=t.graphicsdata[t.graphicsdata.length-1],t.updatelocalbounds(),t},e.prototype.linestyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.linewidth=t,this.linecolor=e,this.linealpha=r,this.currentpath)if(this.currentpath.shape.points.length){var n=new g.polygon(this.currentpath.shape.points.slice(-2));n.closed=!1,this.drawshape(n)}else this.currentpath.linewidth=this.linewidth,this.currentpath.linecolor=this.linecolor,this.currentpath.linealpha=this.linealpha;return this},e.prototype.moveto=function(t,e){var r=new g.polygon([t,e]);return r.closed=!1,this.drawshape(r),this},e.prototype.lineto=function(t,e){return this.currentpath.shape.points.push(t,e),this.dirty++,this},e.prototype.quadraticcurveto=function(t,e,r,n){this.currentpath?0===this.currentpath.shape.points.length&&(this.currentpath.shape.points=[0,0]):this.moveto(0,0);var i=20,o=this.currentpath.shape.points,s=0,a=0;0===o.length&&this.moveto(0,0);for(var u=o[o.length-2],h=o[o.length-1],l=1;l<=i;++l){var c=l/i;s=u+(t-u)*c,a=h+(e-h)*c,o.push(s+(t+(r-t)*c-s)*c,a+(e+(n-e)*c-a)*c)}return this.dirty++,this},e.prototype.beziercurveto=function(t,e,r,n,i,o){this.currentpath?0===this.currentpath.shape.points.length&&(this.currentpath.shape.points=[0,0]):this.moveto(0,0);var s=this.currentpath.shape.points,a=s[s.length-2],u=s[s.length-1];return s.length-=2,(0,w.default)(a,u,t,e,r,n,i,o,s),this.dirty++,this},e.prototype.arcto=function(t,e,r,n,i){this.currentpath?0===this.currentpath.shape.points.length&&this.currentpath.shape.points.push(t,e):this.moveto(t,e);var o=this.currentpath.shape.points,s=o[o.length-2],a=o[o.length-1],u=a-e,h=s-t,l=n-e,c=r-t,d=math.abs(u*c-h*l);if(d<1e-8||0===i)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var f=u*u+h*h,p=l*l+c*c,v=u*l+h*c,y=i*math.sqrt(f)/d,g=i*math.sqrt(p)/d,m=y*v/f,_=g*v/p,b=y*c+g*h,x=y*l+g*u,t=h*(g+m),w=u*(g+m),e=c*(y+_),s=l*(y+_),o=math.atan2(w-x,t-b),p=math.atan2(s-x,e-b);this.arc(b+t,x+e,i,o,p,h*l>c*u)}return this.dirty++,this},e.prototype.arc=function(t,e,r,n,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(n===i)return this;!o&&i<=n?i+=2*math.pi:o&&n<=i&&(n+=2*math.pi);var s=i-n,a=40*math.ceil(math.abs(s)/(2*math.pi));if(0===s)return this;var u=t+math.cos(n)*r,h=e+math.sin(n)*r,l=this.currentpath?this.currentpath.shape.points:null;l?l[l.length-2]===u&&l[l.length-1]===h||l.push(u,h):(this.moveto(u,h),l=this.currentpath.shape.points);for(var c=s/(2*a),d=2*c,f=math.cos(c),p=math.sin(c),v=a-1,y=v%1/v,g=0;g<=v;++g){var m=g+y*g,_=c+n+d*m,b=math.cos(_),x=-math.sin(_);l.push((f*b+p*x)*r+t,(f*-x+p*b)*r+e)}return this.dirty++,this},e.prototype.beginfill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillcolor=t,this.fillalpha=e,this.currentpath&&this.currentpath.shape.points.length<=2&&(this.currentpath.fill=this.filling,this.currentpath.fillcolor=this.fillcolor,this.currentpath.fillalpha=this.fillalpha),this},e.prototype.endfill=function(){return this.filling=!1,this.fillcolor=null,this.fillalpha=1,this},e.prototype.drawrect=function(t,e,r,n){return this.drawshape(new g.rectangle(t,e,r,n)),this},e.prototype.drawroundedrect=function(t,e,r,n,i){return this.drawshape(new g.roundedrectangle(t,e,r,n,i)),this},e.prototype.drawcircle=function(t,e,r){return this.drawshape(new g.circle(t,e,r)),this},e.prototype.drawellipse=function(t,e,r,n){return this.drawshape(new g.ellipse(t,e,r,n)),this},e.prototype.drawpolygon=function(t){var e=t,r=!0;if(e instanceof g.polygon&&(r=e.closed,e=e.points),!array.isarray(e)){e=new array(arguments.length);for(var n=0;n<e.length;++n)e[n]=arguments[n]}var i=new g.polygon(e);return i.closed=r,this.drawshape(i),this},e.prototype.clear=function(){return(this.linewidth||this.filling||this.graphicsdata.length>0)&&(this.linewidth=0,this.filling=!1,this.boundsdirty=-1,this.dirty++,this.cleardirty++,this.graphicsdata.length=0),this.currentpath=null,this._spriterect=null,this},e.prototype.isfastrect=function(){return 1===this.graphicsdata.length&&this.graphicsdata[0].shape.type===_.shapes.rect&&!this.graphicsdata[0].linewidth},e.prototype._renderwebgl=function(t){this.dirty!==this.fastrectdirty&&(this.fastrectdirty=this.dirty,this._fastrect=this.isfastrect()),this._fastrect?this._renderspriterect(t):(t.setobjectrenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderspriterect=function(t){var e=this.graphicsdata[0].shape;this._spriterect||(this._spriterect=new y.default(new d.default(d.default.white)));var r=this._spriterect;if(16777215===this.tint)r.tint=this.graphicsdata[0].fillcolor;else{var n=c,i=r;(0,m.hex2rgb)(this.graphicsdata[0].fillcolor,n),(0,m.hex2rgb)(this.tint,i),n[0]*=i[0],n[1]*=i[1],n[2]*=i[2],r.tint=(0,m.rgb2hex)(n)}r.alpha=this.graphicsdata[0].fillalpha,r.worldalpha=this.worldalpha*r.alpha,r.blendmode=this.blendmode,r._texture._frame.width=e.width,r._texture._frame.height=e.height,r.transform.worldtransform=this.transform.worldtransform,r.anchor.set(-e.x/e.width,-e.y/e.height),r._onanchorupdate(),r._renderwebgl(t)},e.prototype._rendercanvas=function(t){this.ismask!==!0&&t.plugins.graphics.render(this)},e.prototype._calculatebounds=function(){this.boundsdirty!==this.dirty&&(this.boundsdirty=this.dirty,this.updatelocalbounds(),this.cachedspritedirty=!0);var t=this._localbounds;this._bounds.addframe(this.transform,t.minx,t.miny,t.maxx,t.maxy)},e.prototype.containspoint=function(t){this.worldtransform.applyinverse(t,m);for(var e=this.graphicsdata,r=0;r<e.length;++r){var n=e[r];if(n.fill&&n.shape&&n.shape.contains(m.x,m.y))return!0}return!1},e.prototype.updatelocalbounds=function(){var t=1/0,e=-(1/0),r=1/0,n=-(1/0);if(this.graphicsdata.length)for(var i=0,o=0,s=0,a=0,u=0,h=0;h<this.graphicsdata.length;h++){var l=this.graphicsdata[h],c=l.type,d=l.linewidth;if(i=l.shape,c===_.shapes.rect||c===_.shapes.rrec)o=i.x-d/2,s=i.y-d/2,a=i.width+d,u=i.height+d,t=o<t?o:t,e=o+a>e?o+a:e,r=s<r?s:r,n=s+u>n?s+u:n;else if(c===_.shapes.circ)o=i.x,s=i.y,a=i.radius+d/2,u=i.radius+d/2,t=o-a<t?o-a:t,e=o+a>e?o+a:e,r=s-u<r?s-u:r,n=s+u>n?s+u:n;else if(c===_.shapes.elip)o=i.x,s=i.y,a=i.width+d/2,u=i.height+d/2,t=o-a<t?o-a:t,e=o+a>e?o+a:e,r=s-u<r?s-u:r,n=s+u>n?s+u:n;else for(var f=i.points,p=0,v=0,y=0,g=0,m=0,b=0,x=0,t=0,w=0;w+2<f.length;w+=2)o=f[w],s=f[w+1],p=f[w+2],v=f[w+3],y=math.abs(p-o),g=math.abs(v-s),u=d,a=math.sqrt(y*y+g*g),a<1e-9||(m=(u/a*g+y)/2,b=(u/a*y+g)/2,x=(p+o)/2,t=(v+s)/2,t=x-m<t?x-m:t,e=x+m>e?x+m:e,r=t-b<r?t-b:r,n=t+b>n?t+b:n)}else t=0,e=0,r=0,n=0;var e=this.boundspadding;this._localbounds.minx=t-e,this._localbounds.maxx=e+2*e,this._localbounds.miny=r-e,this._localbounds.maxy=n+2*e},e.prototype.drawshape=function(t){this.currentpath&&this.currentpath.shape.points.length<=2&&this.graphicsdata.pop(),this.currentpath=null;var e=new p.default(this.linewidth,this.linecolor,this.linealpha,this.fillcolor,this.fillalpha,this.filling,this.nativelines,t);return this.graphicsdata.push(e),e.type===_.shapes.poly&&(e.shape.closed=e.shape.closed||this.filling,this.currentpath=e),this.dirty++,e},e.prototype.generatecanvastexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.getlocalbounds(),n=l.default.create(r.width,r.height,t,e);o||(o=new s.default),this.transform.updatelocaltransform(),this.transform.localtransform.copy(p),p.invert(),p.tx-=r.x,p.ty-=r.y,o.render(this,n,!0,p);var i=d.default.fromcanvas(n.basetexture._canvasrendertarget.canvas,t,"graphics");return i.basetexture.resolution=e,i.basetexture.update(),i},e.prototype.closepath=function(){var t=this.currentpath;return t&&t.shape&&t.shape.close(),this},e.prototype.addhole=function(){var t=this.graphicsdata.pop();return this.currentpath=this.graphicsdata[this.graphicsdata.length-1],this.currentpath.addhole(t.shape),this.currentpath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var r=0;r<this.graphicsdata.length;++r)this.graphicsdata[r].destroy();for(var n in this._webgl)for(var i=0;i<this._webgl[n].data.length;++i)this._webgl[n].data[i].destroy();this._spriterect&&this._spriterect.destroy(),this.graphicsdata=null,this.currentpath=null,this._webgl=null,this._localbounds=null},e}(u.default);r.default=a,a._sprite_texture=null},{"../const":44,"../display/bounds":45,"../display/container":46,"../math":68,"../renderers/canvas/canvasrenderer":75,"../sprites/sprite":100,"../textures/rendertexture":111,"../textures/texture":113,"../utils":122,"./graphicsdata":52,"./utils/beziercurveto":54}],52:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var i=function(){function t(e,r,i,o,s,a,u,h){n(this,t),this.linewidth=e,this.nativelines=u,this.linecolor=r,this.linealpha=i,this._linetint=r,this.fillcolor=o,this.fillalpha=s,this._filltint=o,this.fill=a,this.holes=[],this.shape=h,this.type=h.type}return t.prototype.clone=function(){return new t(this.linewidth,this.linecolor,this.linealpha,this.fillcolor,this.fillalpha,this.fill,this.nativelines,this.shape)},t.prototype.addhole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();r.default=i},{}],53:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=t("../../renderers/canvas/canvasrenderer"),s=n(o),a=t("../../const"),u=function(){function t(e){i(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,r=e.context,n=t.worldalpha,i=t.transform.worldtransform,o=e.resolution;this._prevtint!==this.tint&&(this.dirty=!0),r.settransform(i.a*o,i.b*o,i.c*o,i.d*o,i.tx*o,i.ty*o),t.dirty&&(this.updategraphicstint(t),t.dirty=!1),e.setblendmode(t.blendmode);for(var s=0;s<t.graphicsdata.length;s++){var u=t.graphicsdata[s],h=u.shape,l=u._filltint,c=u._linetint;if(r.linewidth=u.linewidth,u.type===a.shapes.poly){r.beginpath(),this.renderpolygon(h.points,h.closed,r);for(var d=0;d<u.holes.length;d++)this.renderpolygon(u.holes[d].points,!0,r);u.fill&&(r.globalalpha=u.fillalpha*n,r.fillstyle="#"+("00000"+(0|l).tostring(16)).substr(-6),r.fill()),u.linewidth&&(r.globalalpha=u.linealpha*n,r.strokestyle="#"+("00000"+(0|c).tostring(16)).substr(-6),r.stroke())}else if(u.type===a.shapes.rect)(u.fillcolor||0===u.fillcolor)&&(r.globalalpha=u.fillalpha*n,r.fillstyle="#"+("00000"+(0|l).tostring(16)).substr(-6),r.fillrect(h.x,h.y,h.width,h.height)),u.linewidth&&(r.globalalpha=u.linealpha*n,r.strokestyle="#"+("00000"+(0|c).tostring(16)).substr(-6),r.strokerect(h.x,h.y,h.width,h.height));else if(u.type===a.shapes.circ)r.beginpath(),r.arc(h.x,h.y,h.radius,0,2*math.pi),r.closepath(),u.fill&&(r.globalalpha=u.fillalpha*n,r.fillstyle="#"+("00000"+(0|l).tostring(16)).substr(-6),r.fill()),u.linewidth&&(r.globalalpha=u.linealpha*n,r.strokestyle="#"+("00000"+(0|c).tostring(16)).substr(-6),r.stroke());else if(u.type===a.shapes.elip){var f=2*h.width,p=2*h.height,v=h.x-f/2,y=h.y-p/2;r.beginpath();var g=.5522848,m=f/2*g,_=p/2*g,b=v+f,x=y+p,t=v+f/2,w=y+p/2;r.moveto(v,w),r.beziercurveto(v,w-_,t-m,y,t,y),r.beziercurveto(t+m,y,b,w-_,b,w),r.beziercurveto(b,w+_,t+m,x,t,x),r.beziercurveto(t-m,x,v,w+_,v,w),r.closepath(),u.fill&&(r.globalalpha=u.fillalpha*n,r.fillstyle="#"+("00000"+(0|l).tostring(16)).substr(-6),r.fill()),u.linewidth&&(r.globalalpha=u.linealpha*n,r.strokestyle="#"+("00000"+(0|c).tostring(16)).substr(-6),r.stroke())}else if(u.type===a.shapes.rrec){var e=h.x,s=h.y,o=h.width,p=h.height,m=h.radius,c=math.min(o,p)/2|0;m=m>c?c:m,r.beginpath(),r.moveto(e,s+m),r.lineto(e,s+p-m),r.quadraticcurveto(e,s+p,e+m,s+p),r.lineto(e+o-m,s+p),r.quadraticcurveto(e+o,s+p,e+o,s+p-m),r.lineto(e+o,s+m),r.quadraticcurveto(e+o,s,e+o-m,s),r.lineto(e+m,s),r.quadraticcurveto(e,s,e,s+m),r.closepath(),(u.fillcolor||0===u.fillcolor)&&(r.globalalpha=u.fillalpha*n,r.fillstyle="#"+("00000"+(0|l).tostring(16)).substr(-6),r.fill()),u.linewidth&&(r.globalalpha=u.linealpha*n,r.strokestyle="#"+("00000"+(0|c).tostring(16)).substr(-6),r.stroke())}}},t.prototype.updategraphicstint=function(t){t._prevtint=t.tint;for(var e=(t.tint>>16&255)/255,r=(t.tint>>8&255)/255,n=(255&t.tint)/255,i=0;i<t.graphicsdata.length;++i){var o=t.graphicsdata[i],s=0|o.fillcolor,a=0|o.linecolor;o._filltint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*r*255<<8)+(255&s)/255*n*255,o._linetint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*r*255<<8)+(255&a)/255*n*255}},t.prototype.renderpolygon=function(t,e,r){r.moveto(t[0],t[1]);for(var n=1;n<t.length/2;++n)r.lineto(t[2*n],t[2*n+1]);e&&r.closepath()},t.prototype.destroy=function(){this.renderer=null},t}();r.default=u,s.default.registerplugin("graphics",u)},{"../../const":44,"../../renderers/canvas/canvasrenderer":75}],54:[function(t,e,r){"use strict";function n(t,e,r,n,i,o,s,a){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],h=20,l=0,c=0,d=0,f=0,p=0;u.push(t,e);for(var v=1,y=0;v<=h;++v)y=v/h,l=1-y,c=l*l,d=c*l,f=y*y,p=f*y,u.push(d*t+3*c*y*r+3*l*f*i+p*s,d*e+3*c*y*n+3*l*f*o+p*a);return u}r.__esmodule=!0,r.default=n},{}],55:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=t("../../utils"),u=t("../../const"),h=t("../../renderers/webgl/utils/objectrenderer"),l=n(h),c=t("../../renderers/webgl/webglrenderer"),d=n(c),f=t("./webglgraphicsdata"),p=n(f),v=t("./shaders/primitiveshader"),y=n(v),g=t("./utils/buildpoly"),m=n(g),_=t("./utils/buildrectangle"),b=n(_),x=t("./utils/buildroundedrectangle"),t=n(x),w=t("./utils/buildcircle"),e=n(w),s=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));return n.graphicsdatapool=[],n.primitiveshader=null,n.gl=r.gl,n.context_uid=0,n}return s(e,t),e.prototype.oncontextchange=function(){this.gl=this.renderer.gl,this.context_uid=this.renderer.context_uid,this.primitiveshader=new y.default(this.gl)},e.prototype.destroy=function(){l.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsdatapool.length;++t)this.graphicsdatapool[t].destroy();this.graphicsdatapool=null},e.prototype.render=function(t){var e=this.renderer,r=e.gl,n=void 0,i=t._webgl[this.context_uid];i&&t.dirty===i.dirty||(this.updategraphics(t),i=t._webgl[this.context_uid]);var o=this.primitiveshader;e.bindshader(o),e.state.setblendmode(t.blendmode);for(var s=0,u=i.data.length;s<u;s++){n=i.data[s];var h=n.shader;e.bindshader(h),h.uniforms.translationmatrix=t.transform.worldtransform.toarray(!0),h.uniforms.tint=(0,a.hex2rgb)(t.tint),h.uniforms.alpha=t.worldalpha,e.bindvao(n.vao),n.nativelines?r.drawarrays(r.lines,0,n.points.length/6):n.vao.draw(r.triangle_strip,n.indices.length)}},e.prototype.updategraphics=function(t){var e=this.renderer.gl,r=t._webgl[this.context_uid];if(r||(r=t._webgl[this.context_uid]={lastindex:0,data:[],gl:e,cleardirty:-1,dirty:-1}),r.dirty=t.dirty,t.cleardirty!==r.cleardirty){r.cleardirty=t.cleardirty;for(var n=0;n<r.data.length;n++)this.graphicsdatapool.push(r.data[n]);r.data.length=0,r.lastindex=0}for(var i=void 0,o=void 0,s=r.lastindex;s<t.graphicsdata.length;s++){var a=t.graphicsdata[s];i=this.getwebgldata(r,0),a.nativelines&&a.linewidth&&(o=this.getwebgldata(r,0,!0),r.lastindex++),a.type===u.shapes.poly&&(0,m.default)(a,i,o),a.type===u.shapes.rect?(0,b.default)(a,i,o):a.type===u.shapes.circ||a.type===u.shapes.elip?(0,e.default)(a,i,o):a.type===u.shapes.rrec&&(0,t.default)(a,i,o),r.lastindex++}this.renderer.bindvao(null);for(var h=0;h<r.data.length;h++)i=r.data[h],i.dirty&&i.upload()},e.prototype.getwebgldata=function(t,e,r){var n=t.data[t.data.length-1];return(!n||n.nativelines!==r||n.points.length>32e4)&&(n=this.graphicsdatapool.pop()||new p.default(this.renderer.gl,this.primitiveshader,this.renderer.state.attribsstate),n.nativelines=r,n.reset(e),t.data.push(n)),n.dirty=!0,n},e}(l.default);r.default=s,d.default.registerplugin("graphics",s)},{"../../const":44,"../../renderers/webgl/webglrenderer":82,"../../renderers/webgl/utils/objectrenderer":92,"../../utils":122,"./webglgraphicsdata":56,"./shaders/primitiveshader":57,"./utils/buildcircle":58,"./utils/buildpoly":60,"./utils/buildrectangle":61,"./utils/buildroundedrectangle":62}],56:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=t("pixi-gl-core"),s=n(o),a=function(){function t(e,r,n){i(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=s.default.glbuffer.createvertexbuffer(e),this.indexbuffer=s.default.glbuffer.createindexbuffer(e),this.dirty=!0,this.nativelines=!1,this.glpoints=null,this.glindices=null,this.shader=r,this.vao=new s.default.vertexarrayobject(e,n).addindex(this.indexbuffer).addattribute(this.buffer,r.attributes.avertexposition,e.float,!1,24,0).addattribute(this.buffer,r.attributes.acolor,e.float,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glpoints=new float32array(this.points),this.buffer.upload(this.glpoints),this.glindices=new uint16array(this.indices),this.indexbuffer.upload(this.glindices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexbuffer.destroy(),this.gl=null,this.buffer=null,this.indexbuffer=null,this.glpoints=null,this.glindices=null},t}();r.default=a},{"pixi-gl-core":12}],57:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=t("../../../shader"),u=n(a),h=function(t){function e(r){return i(this,e),o(this,t.call(this,r,["attribute vec2 avertexposition;","attribute vec4 acolor;","uniform mat3 translationmatrix;","uniform mat3 projectionmatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vcolor;","void main(void){","   gl_position = vec4((projectionmatrix * translationmatrix * vec3(avertexposition, 1.0)).xy, 0.0, 1.0);","   vcolor = acolor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vcolor;","void main(void){","   gl_fragcolor = vcolor;","}"].join("\n")))}return s(e,t),e}(u.default);r.default=h},{"../../../shader":42}],58:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e,r){var n=t.shape,i=n.x,o=n.y,h=void 0,l=void 0;if(t.type===a.shapes.circ?(h=n.radius,l=n.radius):(h=n.width,l=n.height),0!==h&&0!==l){var c=math.floor(30*math.sqrt(n.radius))||math.floor(15*math.sqrt(n.width+n.height)),d=2*math.pi/c;if(t.fill){var f=(0,u.hex2rgb)(t.fillcolor),p=t.fillalpha,v=f[0]*p,y=f[1]*p,g=f[2]*p,m=e.points,_=e.indices,b=m.length/6;_.push(b);for(var x=0;x<c+1;x++)m.push(i,o,v,y,g,p),m.push(i+math.sin(d*x)*h,o+math.cos(d*x)*l,v,y,g,p),_.push(b++,b++);_.push(b-1)}if(t.linewidth){var t=t.points;t.points=[];for(var w=0;w<c+1;w++)t.points.push(i+math.sin(d*w)*h,o+math.cos(d*w)*l);(0,s.default)(t,e,r),t.points=t}}}r.__esmodule=!0,r.default=i;var o=t("./buildline"),s=n(o),a=t("../../../const"),u=t("../../../utils")},{"../../../const":44,"../../../utils":122,"./buildline":59}],59:[function(t,e,r){"use strict";function n(t,e){var r=t.points;if(0!==r.length){var n=new o.point(r[0],r[1]),i=new o.point(r[r.length-2],r[r.length-1]);if(n.x===i.x&&n.y===i.y){r=r.slice(),r.pop(),r.pop(),i=new o.point(r[r.length-2],r[r.length-1]);var a=i.x+.5*(n.x-i.x),u=i.y+.5*(n.y-i.y);r.unshift(a,u),r.push(a,u)}var h=e.points,l=e.indices,c=r.length/2,d=r.length,f=h.length/6,p=t.linewidth/2,v=(0,s.hex2rgb)(t.linecolor),y=t.linealpha,g=v[0]*y,m=v[1]*y,_=v[2]*y,b=r[0],x=r[1],t=r[2],w=r[3],e=0,s=0,o=-(x-w),p=b-t,m=0,c=0,r=0,a=0,i=math.sqrt(o*o+p*p);o/=i,p/=i,o*=p,p*=p,h.push(b-o,x-p,g,m,_,y),h.push(b+o,x+p,g,m,_,y);for(var d=1;d<c-1;++d){b=r[2*(d-1)],x=r[2*(d-1)+1],t=r[2*d],w=r[2*d+1],e=r[2*(d+1)],s=r[2*(d+1)+1],o=-(x-w),p=b-t,i=math.sqrt(o*o+p*p),o/=i,p/=i,o*=p,p*=p,m=-(w-s),c=t-e,i=math.sqrt(m*m+c*c),m/=i,c/=i,m*=p,c*=p;var l=-p+x-(-p+w),f=-o+t-(-o+b),n=(-o+b)*(-p+w)-(-o+t)*(-p+x),k=-c+s-(-c+w),j=-m+t-(-m+e),b=(-m+e)*(-c+w)-(-m+t)*(-c+s),u=l*j-k*f;if(math.abs(u)<.1)u+=10.1,h.push(t-o,w-p,g,m,_,y),h.push(t+o,w+p,g,m,_,y);else{var x=(f*b-j*n)/u,g=(k*n-l*b)/u,w=(x-t)*(x-t)+(g-w)*(g-w);w>196*p*p?(r=o-m,a=p-c,i=math.sqrt(r*r+a*a),r/=i,a/=i,r*=p,a*=p,h.push(t-r,w-a),h.push(g,m,_,y),h.push(t+r,w+a),h.push(g,m,_,y),h.push(t-r,w-a),h.push(g,m,_,y),d++):(h.push(x,g),h.push(g,m,_,y),h.push(t-(x-t),w-(g-w)),h.push(g,m,_,y))}}b=r[2*(c-2)],x=r[2*(c-2)+1],t=r[2*(c-1)],w=r[2*(c-1)+1],o=-(x-w),p=b-t,i=math.sqrt(o*o+p*p),o/=i,p/=i,o*=p,p*=p,h.push(t-o,w-p),h.push(g,m,_,y),h.push(t+o,w+p),h.push(g,m,_,y),l.push(f);for(var h=0;h<d;++h)l.push(f++);l.push(f-1)}}function i(t,e){var r=0,n=t.points;if(0!==n.length){var i=e.points,o=n.length/2,a=(0,s.hex2rgb)(t.linecolor),u=t.linealpha,h=a[0]*u,l=a[1]*u,c=a[2]*u;for(r=1;r<o;r++){var d=n[2*(r-1)],f=n[2*(r-1)+1],p=n[2*r],v=n[2*r+1];i.push(d,f),i.push(h,l,c,u),i.push(p,v),i.push(h,l,c,u)}}}r.__esmodule=!0,r.default=function(t,e,r){t.nativelines?i(t,r):n(t,e)};var o=t("../../../math"),s=t("../../../utils")},{"../../../math":68,"../../../utils":122}],60:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e,r){t.points=t.shape.points.slice();var n=t.points;if(t.fill&&n.length>=6){for(var i=[],o=t.holes,u=0;u<o.length;u++){var l=o[u];i.push(n.length/2),n=n.concat(l.points)}var c=e.points,d=e.indices,f=n.length/2,p=(0,a.hex2rgb)(t.fillcolor),v=t.fillalpha,y=p[0]*v,g=p[1]*v,m=p[2]*v,_=(0,h.default)(n,i,2);if(!_)return;for(var b=c.length/6,x=0;x<_.length;x+=3)d.push(_[x]+b),d.push(_[x]+b),d.push(_[x+1]+b),d.push(_[x+2]+b),d.push(_[x+2]+b);for(var t=0;t<f;t++)c.push(n[2*t],n[2*t+1],y,g,m,v)}t.linewidth>0&&(0,s.default)(t,e,r)}r.__esmodule=!0,r.default=i;var o=t("./buildline"),s=n(o),a=t("../../../utils"),u=t("earcut"),h=n(u)},{"../../../utils":122,"./buildline":59,earcut:2}],61:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e,r){var n=t.shape,i=n.x,o=n.y,u=n.width,h=n.height;if(t.fill){var l=(0,a.hex2rgb)(t.fillcolor),c=t.fillalpha,d=l[0]*c,f=l[1]*c,p=l[2]*c,v=e.points,y=e.indices,g=v.length/6;v.push(i,o),v.push(d,f,p,c),v.push(i+u,o),v.push(d,f,p,c),v.push(i,o+h),v.push(d,f,p,c),v.push(i+u,o+h),v.push(d,f,p,c),y.push(g,g,g+1,g+2,g+3,g+3)}if(t.linewidth){var m=t.points;t.points=[i,o,i+u,o,i+u,o+h,i,o+h,i,o],(0,s.default)(t,e,r),t.points=m}}r.__esmodule=!0,r.default=i;var o=t("./buildline"),s=n(o),a=t("../../../utils")},{"../../../utils":122,"./buildline":59}],62:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e,r){var n=t.shape,i=n.x,o=n.y,a=n.width,h=n.height,d=n.radius,f=[];if(f.push(i,o+d),s(i,o+h-d,i,o+h,i+d,o+h,f),s(i+a-d,o+h,i+a,o+h,i+a,o+h-d,f),s(i+a,o+d,i+a,o,i+a-d,o,f),s(i+d,o,i,o,i,o+d+1e-10,f),t.fill){for(var p=(0,c.hex2rgb)(t.fillcolor),v=t.fillalpha,y=p[0]*v,g=p[1]*v,m=p[2]*v,_=e.points,b=e.indices,x=_.length/6,t=(0,u.default)(f,null,2),w=0,e=t.length;w<e;w+=3)b.push(t[w]+x),b.push(t[w]+x),b.push(t[w+1]+x),b.push(t[w+2]+x),b.push(t[w+2]+x);for(var s=0,o=f.length;s<o;s++)_.push(f[s],f[++s],y,g,m,v)}if(t.linewidth){var p=t.points;t.points=f,(0,l.default)(t,e,r),t.points=p}}function o(t,e,r){var n=e-t;return t+n*r}function s(t,e,r,n,i,s){for(var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],u=20,h=a,l=0,c=0,d=0,f=0,p=0,v=0,y=0,g=0;y<=u;++y)g=y/u,l=o(t,r,g),c=o(e,n,g),d=o(r,i,g),f=o(n,s,g),p=o(l,d,g),v=o(c,f,g),h.push(p,v);return h}r.__esmodule=!0,r.default=i;var a=t("earcut"),u=n(a),h=t("./buildline"),l=n(h),c=t("../../../utils")},{"../../../utils":122,"./buildline":59,earcut:2}],63:[function(t,e,r){"use strict";function n(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esmodule?t:{default:t}}r.__esmodule=!0,r.autodetectrenderer=r.application=r.filter=r.spritemaskfilter=r.quad=r.rendertarget=r.objectrenderer=r.webglmanager=r.shader=r.canvasrendertarget=r.textureuvs=r.videobasetexture=r.baserendertexture=r.rendertexture=r.basetexture=r.texture=r.spritesheet=r.canvasgraphicsrenderer=r.graphicsrenderer=r.graphicsdata=r.graphics=r.textmetrics=r.textstyle=r.text=r.spriterenderer=r.canvastinter=r.canvasspriterenderer=r.sprite=r.transformbase=r.transformstatic=r.transform=r.container=r.displayobject=r.bounds=r.glcore=r.webglrenderer=r.canvasrenderer=r.ticker=r.utils=r.settings=void 0;var o=t("./const");object.keys(o).foreach(function(t){"default"!==t&&"__esmodule"!==t&&object.defineproperty(r,t,{enumerable:!0,get:function(){return o[t]}})});var s=t("./math");object.keys(s).foreach(function(t){"default"!==t&&"__esmodule"!==t&&object.defineproperty(r,t,{enumerable:!0,get:function(){return s[t]}})});var a=t("pixi-gl-core");object.defineproperty(r,"glcore",{enumerable:!0,get:function(){return i(a).default}});var u=t("./display/bounds");object.defineproperty(r,"bounds",{enumerable:!0,get:function(){return i(u).default}});var h=t("./display/displayobject");object.defineproperty(r,"displayobject",{enumerable:!0,get:function(){return i(h).default}});var l=t("./display/container");object.defineproperty(r,"container",{enumerable:!0,get:function(){return i(l).default}});var c=t("./display/transform");object.defineproperty(r,"transform",{enumerable:!0,get:function(){return i(c).default}});var d=t("./display/transformstatic");object.defineproperty(r,"transformstatic",{enumerable:!0,get:function(){return i(d).default}});var f=t("./display/transformbase");object.defineproperty(r,"transformbase",{enumerable:!0,get:function(){return i(f).default}});var p=t("./sprites/sprite");object.defineproperty(r,"sprite",{enumerable:!0,get:function(){return i(p).default}});var v=t("./sprites/canvas/canvasspriterenderer");object.defineproperty(r,"canvasspriterenderer",{
enumerable:!0,get:function(){return i(v).default}});var y=t("./sprites/canvas/canvastinter");object.defineproperty(r,"canvastinter",{enumerable:!0,get:function(){return i(y).default}});var g=t("./sprites/webgl/spriterenderer");object.defineproperty(r,"spriterenderer",{enumerable:!0,get:function(){return i(g).default}});var m=t("./text/text");object.defineproperty(r,"text",{enumerable:!0,get:function(){return i(m).default}});var _=t("./text/textstyle");object.defineproperty(r,"textstyle",{enumerable:!0,get:function(){return i(_).default}});var b=t("./text/textmetrics");object.defineproperty(r,"textmetrics",{enumerable:!0,get:function(){return i(b).default}});var x=t("./graphics/graphics");object.defineproperty(r,"graphics",{enumerable:!0,get:function(){return i(x).default}});var t=t("./graphics/graphicsdata");object.defineproperty(r,"graphicsdata",{enumerable:!0,get:function(){return i(t).default}});var w=t("./graphics/webgl/graphicsrenderer");object.defineproperty(r,"graphicsrenderer",{enumerable:!0,get:function(){return i(w).default}});var e=t("./graphics/canvas/canvasgraphicsrenderer");object.defineproperty(r,"canvasgraphicsrenderer",{enumerable:!0,get:function(){return i(e).default}});var s=t("./textures/spritesheet");object.defineproperty(r,"spritesheet",{enumerable:!0,get:function(){return i(s).default}});var o=t("./textures/texture");object.defineproperty(r,"texture",{enumerable:!0,get:function(){return i(o).default}});var p=t("./textures/basetexture");object.defineproperty(r,"basetexture",{enumerable:!0,get:function(){return i(p).default}});var m=t("./textures/rendertexture");object.defineproperty(r,"rendertexture",{enumerable:!0,get:function(){return i(m).default}});var c=t("./textures/baserendertexture");object.defineproperty(r,"baserendertexture",{enumerable:!0,get:function(){return i(c).default}});var r=t("./textures/videobasetexture");object.defineproperty(r,"videobasetexture",{enumerable:!0,get:function(){return i(r).default}});var a=t("./textures/textureuvs");object.defineproperty(r,"textureuvs",{enumerable:!0,get:function(){return i(a).default}});var i=t("./renderers/canvas/utils/canvasrendertarget");object.defineproperty(r,"canvasrendertarget",{enumerable:!0,get:function(){return i(i).default}});var d=t("./shader");object.defineproperty(r,"shader",{enumerable:!0,get:function(){return i(d).default}});var l=t("./renderers/webgl/managers/webglmanager");object.defineproperty(r,"webglmanager",{enumerable:!0,get:function(){return i(l).default}});var f=t("./renderers/webgl/utils/objectrenderer");object.defineproperty(r,"objectrenderer",{enumerable:!0,get:function(){return i(f).default}});var n=t("./renderers/webgl/utils/rendertarget");object.defineproperty(r,"rendertarget",{enumerable:!0,get:function(){return i(n).default}});var k=t("./renderers/webgl/utils/quad");object.defineproperty(r,"quad",{enumerable:!0,get:function(){return i(k).default}});var j=t("./renderers/webgl/filters/spritemask/spritemaskfilter");object.defineproperty(r,"spritemaskfilter",{enumerable:!0,get:function(){return i(j).default}});var b=t("./renderers/webgl/filters/filter");object.defineproperty(r,"filter",{enumerable:!0,get:function(){return i(b).default}});var u=t("./application");object.defineproperty(r,"application",{enumerable:!0,get:function(){return i(u).default}});var x=t("./autodetectrenderer");object.defineproperty(r,"autodetectrenderer",{enumerable:!0,get:function(){return x.autodetectrenderer}});var g=t("./utils"),w=n(g),h=t("./ticker"),y=n(h),v=t("./settings"),z=i(v),q=t("./renderers/canvas/canvasrenderer"),k=i(q),z=t("./renderers/webgl/webglrenderer"),j=i(z);r.settings=z.default,r.utils=w,r.ticker=y,r.canvasrenderer=k.default,r.webglrenderer=j.default},{"./application":41,"./shader":42,"./autodetectrenderer":43,"./const":44,"./display/bounds":45,"./display/container":46,"./display/displayobject":47,"./display/transform":48,"./display/transformbase":49,"./display/transformstatic":50,"./graphics/graphics":51,"./graphics/graphicsdata":52,"./graphics/canvas/canvasgraphicsrenderer":53,"./graphics/webgl/graphicsrenderer":55,"./math":68,"./renderers/canvas/canvasrenderer":75,"./renderers/canvas/utils/canvasrendertarget":77,"./renderers/webgl/webglrenderer":82,"./renderers/webgl/filters/filter":84,"./renderers/webgl/filters/spritemask/spritemaskfilter":87,"./renderers/webgl/managers/webglmanager":91,"./renderers/webgl/utils/objectrenderer":92,"./renderers/webgl/utils/quad":93,"./renderers/webgl/utils/rendertarget":94,"./settings":99,"./sprites/sprite":100,"./sprites/canvas/canvasspriterenderer":101,"./sprites/canvas/canvastinter":102,"./sprites/webgl/spriterenderer":104,"./text/text":106,"./text/textmetrics":107,"./text/textstyle":108,"./textures/baserendertexture":109,"./textures/basetexture":110,"./textures/rendertexture":111,"./textures/spritesheet":112,"./textures/texture":113,"./textures/textureuvs":114,"./textures/videobasetexture":115,"./ticker":118,"./utils":122,"pixi-gl-core":12}],64:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t){return t<0?-1:t>0?1:0}function o(){for(var t=0;t<16;t++){var e=[];f.push(e);for(var r=0;r<16;r++)for(var n=i(u[t]*u[r]+l[t]*h[r]),o=i(h[t]*u[r]+c[t]*h[r]),s=i(u[t]*l[r]+l[t]*c[r]),p=i(h[t]*l[r]+c[t]*c[r]),v=0;v<16;v++)if(u[v]===n&&h[v]===o&&l[v]===s&&c[v]===p){e.push(v);break}}for(var y=0;y<16;y++){var g=new a.default;g.set(u[y],h[y],l[y],c[y],0,0),d.push(g)}}r.__esmodule=!0;var s=t("./matrix"),a=n(s),u=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],h=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],l=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],c=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],d=[],f=[];o();var p={e:0,se:1,s:2,sw:3,w:4,nw:5,n:6,ne:7,mirror_vertical:8,mirror_horizontal:12,ux:function(t){return u[t]},uy:function(t){return h[t]},vx:function(t){return l[t]},vy:function(t){return c[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return f[t][e]},sub:function(t,e){return f[t][p.inv(e)]},rotate180:function(t){return 4^t},isswapwidthheight:function(t){return 2===(3&t)},bydirection:function(t,e){return 2*math.abs(t)<=math.abs(e)?e>=0?p.s:p.n:2*math.abs(e)<=math.abs(t)?t>0?p.e:p.w:e>0?t>0?p.se:p.sw:t>0?p.ne:p.nw},matrixappendrotationinv:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=d[p.inv(e)];i.tx=r,i.ty=n,t.append(i)}};r.default=p},{"./matrix":65}],65:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=t("./point"),a=n(s),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;i(this,t),this.a=e,this.b=r,this.c=n,this.d=o,this.tx=s,this.ty=a,this.array=null}return t.prototype.fromarray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,r,n,i,o){return this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=o,this},t.prototype.toarray=function(t,e){this.array||(this.array=new float32array(9));var r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},t.prototype.apply=function(t,e){e=e||new a.default;var r=t.x,n=t.y;return e.x=this.a*r+this.c*n+this.tx,e.y=this.b*r+this.d*n+this.ty,e},t.prototype.applyinverse=function(t,e){e=e||new a.default;var r=1/(this.a*this.d+this.c*-this.b),n=t.x,i=t.y;return e.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=math.cos(t),r=math.sin(t),n=this.a,i=this.c,o=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=i*e-this.d*r,this.d=i*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this},t.prototype.append=function(t){var e=this.a,r=this.b,n=this.c,i=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*i,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*i,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*i+this.ty,this},t.prototype.settransform=function(t,e,r,n,i,o,s,a,u){var h=math.sin(s),l=math.cos(s),c=math.cos(u),d=math.sin(u),f=-math.sin(a),p=math.cos(a),v=l*i,y=h*i,g=-h*o,m=l*o;return this.a=c*v+d*g,this.b=c*y+d*m,this.c=f*v+p*g,this.d=f*y+p*m,this.tx=t+(r*v+n*g),this.ty=e+(r*y+n*m),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var r=this.a,n=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,r=this.b,n=this.c,i=this.d,o=-math.atan2(-n,i),s=math.atan2(r,e),a=math.abs(o+s);return a<1e-5?(t.rotation=s,e<0&&i>=0&&(t.rotation+=t.rotation<=0?math.pi:-math.pi),t.skew.x=t.skew.y=0):(t.skew.x=o,t.skew.y=s),t.scale.x=math.sqrt(e*e+r*r),t.scale.y=math.sqrt(n*n+i*i),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,n=this.d,i=this.tx,o=t*n-e*r;return this.a=n/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-n*i)/o,this.ty=-(t*this.ty-e*i)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},o(t,null,[{key:"identity",get:function(){return new t}},{key:"temp_matrix",get:function(){return new t}}]),t}();r.default=u},{"./point":67}],66:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this._x=i,this._y=o,this.cb=e,this.scope=r}return t.prototype.set=function(t,e){var r=t||0,n=e||(0!==e?r:0);this._x===r&&this._y===n||(this._x=r,this._y=n,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},i(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();r.default=o},{}],67:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,t),this.x=e,this.y=r}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();r.default=i},{}],68:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}r.__esmodule=!0;var i=t("./point");object.defineproperty(r,"point",{enumerable:!0,get:function(){return n(i).default}});var o=t("./observablepoint");object.defineproperty(r,"observablepoint",{enumerable:!0,get:function(){return n(o).default}});var s=t("./matrix");object.defineproperty(r,"matrix",{enumerable:!0,get:function(){return n(s).default}});var a=t("./groupd8");object.defineproperty(r,"groupd8",{enumerable:!0,get:function(){return n(a).default}});var u=t("./shapes/circle");object.defineproperty(r,"circle",{enumerable:!0,get:function(){return n(u).default}});var h=t("./shapes/ellipse");object.defineproperty(r,"ellipse",{enumerable:!0,get:function(){return n(h).default}});var l=t("./shapes/polygon");object.defineproperty(r,"polygon",{enumerable:!0,get:function(){return n(l).default}});var c=t("./shapes/rectangle");object.defineproperty(r,"rectangle",{enumerable:!0,get:function(){return n(c).default}});var d=t("./shapes/roundedrectangle");object.defineproperty(r,"roundedrectangle",{enumerable:!0,get:function(){return n(d).default}})},{"./groupd8":64,"./matrix":65,"./observablepoint":66,"./point":67,"./shapes/circle":69,"./shapes/ellipse":70,"./shapes/polygon":71,"./shapes/rectangle":72,"./shapes/roundedrectangle":73}],69:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=t("./rectangle"),s=n(o),a=t("../../const"),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,t),this.x=e,this.y=r,this.radius=n,this.type=a.shapes.circ}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,n=this.x-t,i=this.y-e;return n*=n,i*=i,n+i<=r},t.prototype.getbounds=function(){return new s.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();r.default=u},{"../../const":44,"./rectangle":72}],70:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=t("./rectangle"),s=n(o),a=t("../../const"),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,t),this.x=e,this.y=r,this.width=n,this.height=o,this.type=a.shapes.elip}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,n=(e-this.y)/this.height;return r*=r,n*=n,r+n<=1},t.prototype.getbounds=function(){return new s.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();r.default=u},{"../../const":44,"./rectangle":72}],71:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=t("../point"),s=n(o),a=t("../../const"),u=function(){function t(){for(var e=arguments.length,r=array(e),n=0;n<e;n++)r[n]=arguments[n];if(i(this,t),array.isarray(r[0])&&(r=r[0]),r[0]instanceof s.default){for(var o=[],u=0,h=r.length;u<h;u++)o.push(r[u].x,r[u].y);r=o}this.closed=!0,this.points=r,this.type=a.shapes.poly}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var r=!1,n=this.points.length/2,i=0,o=n-1;i<n;o=i++){var s=this.points[2*i],a=this.points[2*i+1],u=this.points[2*o],h=this.points[2*o+1],l=a>e!=h>e&&t<(u-s)*((e-a)/(h-a))+s;l&&(r=!r)}return r},t}();r.default=u},{"../../const":44,"../point":67}],72:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("../../const"),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this.x=e,this.y=r,this.width=i,this.height=s,this.type=o.shapes.rect}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,this.height<0&&(this.height=0))},t.prototype.enlarge=function(t){var e=math.min(this.x,t.x),r=math.max(this.x+this.width,t.x+t.width),n=math.min(this.y,t.y),i=math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=r-e,this.y=n,this.height=i-n},i(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"empty",get:function(){return new t(0,0,0,0)}}]),t}();r.default=s},{"../../const":44}],73:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var i=t("../../const"),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;n(this,t),this.x=e,this.y=r,this.width=o,this.height=s,this.radius=a,this.type=i.shapes.rrec}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),n=e-(this.y+this.radius),i=this.radius*this.radius;if(r*r+n*n<=i)return!0;if(r=t-(this.x+this.width-this.radius),r*r+n*n<=i)return!0;if(n=e-(this.y+this.height-this.radius),r*r+n*n<=i)return!0;if(r=t-(this.x+this.radius),r*r+n*n<=i)return!0}return!1},t}();r.default=o},{"../../const":44}],74:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("../utils"),h=t("../math"),l=t("../const"),c=t("../settings"),d=n(c),f=t("../display/container"),p=n(f),v=t("../textures/rendertexture"),y=n(v),g=t("eventemitter3"),m=n(g),_=new h.matrix,b=function(t){function e(r,n,s,a){i(this,e);var c=o(this,t.call(this));return(0,u.sayhello)(r),"number"==typeof n&&(n=object.assign({width:n,height:s||d.default.render_options.height},a)),n=object.assign({},d.default.render_options,n),c.options=n,c.type=l.renderer_type.unknown,c.screen=new h.rectangle(0,0,n.width,n.height),c.view=n.view||document.createelement("canvas"),c.resolution=n.resolution||d.default.resolution,c.transparent=n.transparent,c.autoresize=n.autoresize||!1,c.blendmodes=null,c.preservedrawingbuffer=n.preservedrawingbuffer,c.clearbeforerender=n.clearbeforerender,c.roundpixels=n.roundpixels,c._backgroundcolor=0,c._backgroundcolorrgba=[0,0,0,0],c._backgroundcolorstring="#000000",c.backgroundcolor=n.backgroundcolor||c._backgroundcolor,c._tempdisplayobjectparent=new p.default,c._lastobjectrendered=c._tempdisplayobjectparent,c}return s(e,t),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoresize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generatetexture=function(t,e,r){var n=t.getlocalbounds(),i=y.default.create(0|n.width,0|n.height,e,r);return _.tx=-n.x,_.ty=-n.y,this.render(t,i,!1,_,!0),i},e.prototype.destroy=function(t){t&&this.view.parentnode&&this.view.parentnode.removechild(this.view),this.type=l.renderer_type.unknown,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoresize=!1,this.blendmodes=null,this.options=null,this.preservedrawingbuffer=!1,this.clearbeforerender=!1,this.roundpixels=!1,this._backgroundcolor=0,this._backgroundcolorrgba=null,this._backgroundcolorstring=null,this.backgroundcolor=0,this._tempdisplayobjectparent=null,this._lastobjectrendered=null},a(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundcolor",get:function(){return this._backgroundcolor},set:function(t){this._backgroundcolor=t,this._backgroundcolorstring=(0,u.hex2string)(t),(0,u.hex2rgb)(t,this._backgroundcolorrgba)}}]),e}(m.default);r.default=b},{"../const":44,"../display/container":46,"../math":68,"../settings":99,"../textures/rendertexture":111,"../utils":122,eventemitter3:3}],75:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=t("../systemrenderer"),u=n(a),h=t("./utils/canvasmaskmanager"),l=n(h),c=t("./utils/canvasrendertarget"),d=n(c),f=t("./utils/mapcanvasblendmodestopixi"),p=n(f),v=t("../../utils"),y=t("../../const"),g=t("../../settings"),m=n(g),_=function(t){function e(r,n,s){i(this,e);var a=o(this,t.call(this,"canvas",r,n,s));return a.type=y.renderer_type.canvas,a.rootcontext=a.view.getcontext("2d",{alpha:a.transparent}),a.refresh=!0,a.maskmanager=new l.default(a),a.smoothproperty="imagesmoothingenabled",a.rootcontext.imagesmoothingenabled||(a.rootcontext.webkitimagesmoothingenabled?a.smoothproperty="webkitimagesmoothingenabled":a.rootcontext.mozimagesmoothingenabled?a.smoothproperty="mozimagesmoothingenabled":a.rootcontext.oimagesmoothingenabled?a.smoothproperty="oimagesmoothingenabled":a.rootcontext.msimagesmoothingenabled&&(a.smoothproperty="msimagesmoothingenabled")),a.initplugins(),a.blendmodes=(0,p.default)(),a._activeblendmode=null,a.context=null,a.renderingtoscreen=!1,a.resize(a.options.width,a.options.height),a}return s(e,t),e.prototype.render=function(t,e,r,n,i){if(this.view){this.renderingtoscreen=!e,this.emit("prerender");var o=this.resolution;e?(e=e.basetexture||e,e._canvasrendertarget||(e._canvasrendertarget=new d.default(e.width,e.height,e.resolution),e.source=e._canvasrendertarget.canvas,e.valid=!0),this.context=e._canvasrendertarget.context,this.resolution=e._canvasrendertarget.resolution):this.context=this.rootcontext;var s=this.context;if(e||(this._lastobjectrendered=t),!i){var a=t.parent,u=this._tempdisplayobjectparent.transform.worldtransform;n?(n.copy(u),this._tempdisplayobjectparent.transform._worldid=-1):u.identity(),t.parent=this._tempdisplayobjectparent,t.updatetransform(),t.parent=a}s.settransform(1,0,0,1,0,0),s.globalalpha=1,s.globalcompositeoperation=this.blendmodes[y.blend_modes.normal],navigator.iscocoonjs&&this.view.screencanvas&&(s.fillstyle="black",s.clear()),(void 0!==r?r:this.clearbeforerender)&&this.renderingtoscreen&&(this.transparent?s.clearrect(0,0,this.width,this.height):(s.fillstyle=this._backgroundcolorstring,s.fillrect(0,0,this.width,this.height)));var h=this.context;this.context=s,t.rendercanvas(this),this.context=h,this.resolution=o,this.emit("postrender")}},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundcolorstring,!this.transparent&&t?(e.fillstyle=t,e.fillrect(0,0,this.width,this.height)):e.clearrect(0,0,this.width,this.height)},e.prototype.setblendmode=function(t){this._activeblendmode!==t&&(this._activeblendmode=t,this.context.globalcompositeoperation=this.blendmodes[t])},e.prototype.destroy=function(e){this.destroyplugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskmanager.destroy(),this.maskmanager=null,this.smoothproperty=null},e.prototype.resize=function(e,r){t.prototype.resize.call(this,e,r),this.smoothproperty&&(this.rootcontext[this.smoothproperty]=m.default.scale_mode===y.scale_modes.linear)},e}(u.default);r.default=_,v.plugintarget.mixin(_)},{"../../const":44,"../../settings":99,"../../utils":122,"../systemrenderer":74,"./utils/canvasmaskmanager":76,"./utils/canvasrendertarget":77,"./utils/mapcanvasblendmodestopixi":79}],76:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var i=t("../../../const"),o=function(){function t(e){n(this,t),this.renderer=e}return t.prototype.pushmask=function(t){var e=this.renderer;e.context.save();var r=t.alpha,n=t.transform.worldtransform,i=e.resolution;e.context.settransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),t._texture||(this.rendergraphicsshape(t),e.context.clip()),t.worldalpha=r},t.prototype.rendergraphicsshape=function(t){var e=this.renderer.context,r=t.graphicsdata.length;if(0!==r){e.beginpath();for(var n=0;n<r;n++){var o=t.graphicsdata[n],s=o.shape;if(o.type===i.shapes.poly){var a=s.points;e.moveto(a[0],a[1]);for(var u=1;u<a.length/2;u++)e.lineto(a[2*u],a[2*u+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closepath()}else if(o.type===i.shapes.rect)e.rect(s.x,s.y,s.width,s.height),e.closepath();else if(o.type===i.shapes.circ)e.arc(s.x,s.y,s.radius,0,2*math.pi),e.closepath();else if(o.type===i.shapes.elip){var h=2*s.width,l=2*s.height,c=s.x-h/2,d=s.y-l/2,f=.5522848,p=h/2*f,v=l/2*f,y=c+h,g=d+l,m=c+h/2,_=d+l/2;e.moveto(c,_),e.beziercurveto(c,_-v,m-p,d,m,d),e.beziercurveto(m+p,d,y,_-v,y,_),e.beziercurveto(y,_+v,m+p,g,m,g),e.beziercurveto(m-p,g,c,_+v,c,_),e.closepath()}else if(o.type===i.shapes.rrec){var b=s.x,x=s.y,t=s.width,w=s.height,e=s.radius,s=math.min(t,w)/2|0;e=e>s?s:e,e.moveto(b,x+e),e.lineto(b,x+w-e),e.quadraticcurveto(b,x+w,b+e,x+w),e.lineto(b+t-e,x+w),e.quadraticcurveto(b+t,x+w,b+t,x+w-e),e.lineto(b+t,x+e),e.quadraticcurveto(b+t,x,b+t-e,x),e.lineto(b+e,x),e.quadraticcurveto(b,x,b,x+e),e.closepath()}}}},t.prototype.popmask=function(t){t.context.restore()},t.prototype.destroy=function(){},t}();r.default=o},{"../../../const":44}],77:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=t("../../../settings"),a=n(s),u=function(){function t(e,r,n){i(this,t),this.canvas=document.createelement("canvas"),this.context=this.canvas.getcontext("2d"),this.resolution=n||a.default.resolution,this.resize(e,r)}return t.prototype.clear=function(){this.context.settransform(1,0,0,1,0,0),this.context.clearrect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},o(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();r.default=u},{"../../../settings":99}],78:[function(t,e,r){"use strict";function n(t){var e=document.createelement("canvas");e.width=6,e.height=1;var r=e.getcontext("2d");return r.fillstyle=t,r.fillrect(0,0,6,1),e}function i(){if("undefined"==typeof document)return!1;var t=n("#ff00ff"),e=n("#ffff00"),r=document.createelement("canvas");r.width=6,r.height=1;var i=r.getcontext("2d");i.globalcompositeoperation="multiply",i.drawimage(t,0,0),i.drawimage(e,2,0);var o=i.getimagedata(2,0,1,1);if(!o)return!1;var s=o.data;return 255===s[0]&&0===s[1]&&0===s[2]}r.__esmodule=!0,r.default=i},{}],79:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,a.default)()?(t[o.blend_modes.normal]="source-over",t[o.blend_modes.add]="lighter",t[o.blend_modes.multiply]="multiply",t[o.blend_modes.screen]="screen",t[o.blend_modes.overlay]="overlay",t[o.blend_modes.darken]="darken",t[o.blend_modes.lighten]="lighten",t[o.blend_modes.color_dodge]="color-dodge",t[o.blend_modes.color_burn]="color-burn",t[o.blend_modes.hard_light]="hard-light",t[o.blend_modes.soft_light]="soft-light",t[o.blend_modes.difference]="difference",t[o.blend_modes.exclusion]="exclusion",t[o.blend_modes.hue]="hue",t[o.blend_modes.saturation]="saturate",t[o.blend_modes.color]="color",t[o.blend_modes.luminosity]="luminosity"):(t[o.blend_modes.normal]="source-over",t[o.blend_modes.add]="lighter",t[o.blend_modes.multiply]="source-over",t[o.blend_modes.screen]="source-over",t[o.blend_modes.overlay]="source-over",t[o.blend_modes.darken]="source-over",t[o.blend_modes.lighten]="source-over",t[o.blend_modes.color_dodge]="source-over",t[o.blend_modes.color_burn]="source-over",t[o.blend_modes.hard_light]="source-over",t[o.blend_modes.soft_light]="source-over",t[o.blend_modes.difference]="source-over",t[o.blend_modes.exclusion]="source-over",t[o.blend_modes.hue]="source-over",t[o.blend_modes.saturation]="source-over",t[o.blend_modes.color]="source-over",t[o.blend_modes.luminosity]="source-over"),t}r.__esmodule=!0,r.default=i;var o=t("../../../const"),s=t("./canusenewcanvasblendmodes"),a=n(s);
},{"../../../const":44,"./canusenewcanvasblendmodes":78}],80:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=t("../../const"),s=t("../../settings"),a=n(s),u=function(){function t(e){i(this,t),this.renderer=e,this.count=0,this.checkcount=0,this.maxidle=a.default.gc_max_idle,this.checkcountmax=a.default.gc_max_check_count,this.mode=a.default.gc_mode}return t.prototype.update=function(){this.count++,this.mode!==o.gc_modes.manual&&(this.checkcount++,this.checkcount>this.checkcountmax&&(this.checkcount=0,this.run()))},t.prototype.run=function(){for(var t=this.renderer.texturemanager,e=t._managedtextures,r=!1,n=0;n<e.length;n++){var i=e[n];!i._glrendertargets&&this.count-i.touched>this.maxidle&&(t.destroytexture(i,!0),e[n]=null,r=!0)}if(r){for(var o=0,s=0;s<e.length;s++)null!==e[s]&&(e[o++]=e[s]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.texturemanager;t._texture&&t._texture._glrendertargets&&e.destroytexture(t._texture,!0);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},t}();r.default=u},{"../../const":44,"../../settings":99}],81:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=t("pixi-gl-core"),s=t("../../const"),a=t("./utils/rendertarget"),u=n(a),h=t("../../utils"),l=function(){function t(e){i(this,t),this.renderer=e,this.gl=e.gl,this._managedtextures=[]}return t.prototype.bindtexture=function(){},t.prototype.gettexture=function(){},t.prototype.updatetexture=function(t,e){var r=this.gl,n=!!t._glrendertargets;if(!t.hasloaded)return null;var i=this.renderer.boundtextures;if(void 0===e){e=0;for(var a=0;a<i.length;++a)if(i[a]===t){e=a;break}}i[e]=t,r.activetexture(r.texture0+e);var h=t._gltextures[this.renderer.context_uid];if(h)n?t._glrendertargets[this.renderer.context_uid].resize(t.width,t.height):h.upload(t.source);else{if(n){var l=new u.default(this.gl,t.width,t.height,t.scalemode,t.resolution);l.resize(t.width,t.height),t._glrendertargets[this.renderer.context_uid]=l,h=l.texture}else h=new o.gltexture(this.gl,null,null,null,null),h.bind(e),h.premultiplyalpha=!0,h.upload(t.source);t._gltextures[this.renderer.context_uid]=h,t.on("update",this.updatetexture,this),t.on("dispose",this.destroytexture,this),this._managedtextures.push(t),t.ispoweroftwo?(t.mipmap&&h.enablemipmap(),t.wrapmode===s.wrap_modes.clamp?h.enablewrapclamp():t.wrapmode===s.wrap_modes.repeat?h.enablewraprepeat():h.enablewrapmirrorrepeat()):h.enablewrapclamp(),t.scalemode===s.scale_modes.nearest?h.enablenearestscaling():h.enablelinearscaling()}return h},t.prototype.destroytexture=function(t,e){if(t=t.basetexture||t,t.hasloaded&&t._gltextures[this.renderer.context_uid]&&(this.renderer.unbindtexture(t),t._gltextures[this.renderer.context_uid].destroy(),t.off("update",this.updatetexture,this),t.off("dispose",this.destroytexture,this),delete t._gltextures[this.renderer.context_uid],!e)){var r=this._managedtextures.indexof(t);r!==-1&&(0,h.removeitems)(this._managedtextures,r,1)}},t.prototype.removeall=function(){for(var t=0;t<this._managedtextures.length;++t){var e=this._managedtextures[t];e._gltextures[this.renderer.context_uid]&&delete e._gltextures[this.renderer.context_uid]}},t.prototype.destroy=function(){for(var t=0;t<this._managedtextures.length;++t){var e=this._managedtextures[t];this.destroytexture(e,!0),e.off("update",this.updatetexture,this),e.off("dispose",this.destroytexture,this)}this._managedtextures=null},t}();r.default=l},{"../../const":44,"../../utils":122,"./utils/rendertarget":94,"pixi-gl-core":12}],82:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=t("../systemrenderer"),u=n(a),h=t("./managers/maskmanager"),l=n(h),c=t("./managers/stencilmanager"),d=n(c),f=t("./managers/filtermanager"),p=n(f),v=t("./utils/rendertarget"),y=n(v),g=t("./utils/objectrenderer"),m=n(g),_=t("./texturemanager"),b=n(_),x=t("../../textures/basetexture"),t=n(x),w=t("./texturegarbagecollector"),e=n(w),s=t("./webglstate"),o=n(s),p=t("./utils/mapwebgldrawmodestopixi"),m=n(p),c=t("./utils/validatecontext"),r=n(c),a=t("../../utils"),i=t("pixi-gl-core"),d=n(i),l=t("../../const"),f=0,n=function(t){function e(r,n,s){i(this,e);var a=o(this,t.call(this,"webgl",r,n,s));return a.legacy=a.options.legacy,a.legacy&&(d.default.vertexarrayobject.force_native=!0),a.type=l.renderer_type.webgl,a.handlecontextlost=a.handlecontextlost.bind(a),a.handlecontextrestored=a.handlecontextrestored.bind(a),a.view.addeventlistener("webglcontextlost",a.handlecontextlost,!1),a.view.addeventlistener("webglcontextrestored",a.handlecontextrestored,!1),a._contextoptions={alpha:a.transparent,antialias:a.options.antialias,premultipliedalpha:a.transparent&&"notmultiplied"!==a.transparent,stencil:!0,preservedrawingbuffer:a.options.preservedrawingbuffer},a._backgroundcolorrgba[3]=a.transparent?0:1,a.maskmanager=new l.default(a),a.stencilmanager=new d.default(a),a.emptyrenderer=new m.default(a),a.currentrenderer=a.emptyrenderer,a.initplugins(),a.options.context&&(0,r.default)(a.options.context),a.gl=a.options.context||d.default.createcontext(a.view,a._contextoptions),a.context_uid=f++,a.state=new o.default(a.gl),a.renderingtoscreen=!0,a.boundtextures=null,a._activeshader=null,a._activevao=null,a._activerendertarget=null,a._initcontext(),a.filtermanager=new p.default(a),a.drawmodes=(0,m.default)(a.gl),a._nexttexturelocation=0,a.setblendmode(0),a}return s(e,t),e.prototype._initcontext=function(){var t=this.gl;t.iscontextlost()&&t.getextension("webgl_lose_context")&&t.getextension("webgl_lose_context").restorecontext();var e=t.getparameter(t.max_texture_image_units);this.boundtextures=new array(e),this.emptytextures=new array(e),this.texturemanager=new b.default(this),this.texturegc=new e.default(this),this.state.resettodefault(),this.rootrendertarget=new y.default(t,this.width,this.height,null,this.resolution,(!0)),this.rootrendertarget.clearcolor=this._backgroundcolorrgba,this.bindrendertarget(this.rootrendertarget);var r=new d.default.gltexture.fromdata(t,null,1,1),n={_gltextures:{}};n._gltextures[this.context_uid]={};for(var i=0;i<e;i++){var o=new t.default;o._gltextures[this.context_uid]=r,this.boundtextures[i]=n,this.emptytextures[i]=o,this.bindtexture(null,i)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},e.prototype.render=function(t,e,r,n,i){if(this.renderingtoscreen=!e,this.emit("prerender"),this.gl&&!this.gl.iscontextlost()){if(this._nexttexturelocation=0,e||(this._lastobjectrendered=t),!i){var o=t.parent;t.parent=this._tempdisplayobjectparent,t.updatetransform(),t.parent=o}this.bindrendertexture(e,n),this.currentrenderer.start(),(void 0!==r?r:this.clearbeforerender)&&this._activerendertarget.clear(),t.renderwebgl(this),this.currentrenderer.flush(),this.texturegc.update(),this.emit("postrender")}},e.prototype.setobjectrenderer=function(t){this.currentrenderer!==t&&(this.currentrenderer.stop(),this.currentrenderer=t,this.currentrenderer.start())},e.prototype.flush=function(){this.setobjectrenderer(this.emptyrenderer)},e.prototype.resize=function(t,e){u.default.prototype.resize.call(this,t,e),this.rootrendertarget.resize(t,e),this._activerendertarget===this.rootrendertarget&&(this.rootrendertarget.activate(),this._activeshader&&(this._activeshader.uniforms.projectionmatrix=this.rootrendertarget.projectionmatrix.toarray(!0)))},e.prototype.setblendmode=function(t){this.state.setblendmode(t)},e.prototype.clear=function(t){this._activerendertarget.clear(t)},e.prototype.settransform=function(t){this._activerendertarget.transform=t},e.prototype.clearrendertexture=function(t,e){var r=t.basetexture,n=r._glrendertargets[this.context_uid];return n&&n.clear(e),this},e.prototype.bindrendertexture=function(t,e){var r=void 0;if(t){var n=t.basetexture;n._glrendertargets[this.context_uid]||this.texturemanager.updatetexture(n,0),this.unbindtexture(n),r=n._glrendertargets[this.context_uid],r.setframe(t.frame)}else r=this.rootrendertarget;return r.transform=e,this.bindrendertarget(r),this},e.prototype.bindrendertarget=function(t){return t!==this._activerendertarget&&(this._activerendertarget=t,t.activate(),this._activeshader&&(this._activeshader.uniforms.projectionmatrix=t.projectionmatrix.toarray(!0)),this.stencilmanager.setmaskstack(t.stencilmaskstack)),this},e.prototype.bindshader=function(t,e){return this._activeshader!==t&&(this._activeshader=t,t.bind(),e!==!1&&(t.uniforms.projectionmatrix=this._activerendertarget.projectionmatrix.toarray(!0))),this},e.prototype.bindtexture=function(t,e,r){if(t=t||this.emptytextures[e],t=t.basetexture||t,t.touched=this.texturegc.count,r)e=e||0;else{for(var n=0;n<this.boundtextures.length;n++)if(this.boundtextures[n]===t)return n;void 0===e&&(this._nexttexturelocation++,this._nexttexturelocation%=this.boundtextures.length,e=this.boundtextures.length-this._nexttexturelocation-1)}var i=this.gl,o=t._gltextures[this.context_uid];return o?(this.boundtextures[e]=t,i.activetexture(i.texture0+e),i.bindtexture(i.texture_2d,o.texture)):this.texturemanager.updatetexture(t,e),e},e.prototype.unbindtexture=function(t){var e=this.gl;t=t.basetexture||t;for(var r=0;r<this.boundtextures.length;r++)this.boundtextures[r]===t&&(this.boundtextures[r]=this.emptytextures[r],e.activetexture(e.texture0+r),e.bindtexture(e.texture_2d,this.emptytextures[r]._gltextures[this.context_uid].texture));return this},e.prototype.createvao=function(){return new d.default.vertexarrayobject(this.gl,this.state.attribstate)},e.prototype.bindvao=function(t){return this._activevao===t?this:(t?t.bind():this._activevao&&this._activevao.unbind(),this._activevao=t,this)},e.prototype.reset=function(){return this.setobjectrenderer(this.emptyrenderer),this._activeshader=null,this._activerendertarget=this.rootrendertarget,this.rootrendertarget.activate(),this.state.resettodefault(),this},e.prototype.handlecontextlost=function(t){t.preventdefault()},e.prototype.handlecontextrestored=function(){this._initcontext(),this.texturemanager.removeall()},e.prototype.destroy=function(e){this.destroyplugins(),this.view.removeeventlistener("webglcontextlost",this.handlecontextlost),this.view.removeeventlistener("webglcontextrestored",this.handlecontextrestored),this.texturemanager.destroy(),t.prototype.destroy.call(this,e),this.uid=0,this.maskmanager.destroy(),this.stencilmanager.destroy(),this.filtermanager.destroy(),this.maskmanager=null,this.filtermanager=null,this.texturemanager=null,this.currentrenderer=null,this.handlecontextlost=null,this.handlecontextrestored=null,this._contextoptions=null,this.gl.useprogram(null),this.gl.getextension("webgl_lose_context")&&this.gl.getextension("webgl_lose_context").losecontext(),this.gl=null},e}(u.default);r.default=n,a.plugintarget.mixin(n)},{"../../const":44,"../../textures/basetexture":110,"../../utils":122,"../systemrenderer":74,"./texturegarbagecollector":80,"./texturemanager":81,"./webglstate":83,"./managers/filtermanager":88,"./managers/maskmanager":89,"./managers/stencilmanager":90,"./utils/objectrenderer":92,"./utils/rendertarget":94,"./utils/mapwebgldrawmodestopixi":97,"./utils/validatecontext":98,"pixi-gl-core":12}],83:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=t("./utils/mapwebglblendmodestopixi"),s=n(o),a=0,u=1,h=2,l=3,c=4,d=function(){function t(e){i(this,t),this.activestate=new uint8array(16),this.defaultstate=new uint8array(16),this.defaultstate[0]=1,this.stackindex=0,this.stack=[],this.gl=e,this.maxattribs=e.getparameter(e.max_vertex_attribs),this.attribstate={tempattribstate:new array(this.maxattribs),attribstate:new array(this.maxattribs)},this.blendmodes=(0,s.default)(e),this.nativevaoextension=e.getextension("oes_vertex_array_object")||e.getextension("moz_oes_vertex_array_object")||e.getextension("webkit_oes_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackindex];t||(t=this.stack[this.stackindex]=new uint8array(16)),++this.stackindex;for(var e=0;e<this.activestate.length;e++)t[e]=this.activestate[e]},t.prototype.pop=function(){var t=this.stack[--this.stackindex];this.setstate(t)},t.prototype.setstate=function(t){this.setblend(t[a]),this.setdepthtest(t[u]),this.setfrontface(t[h]),this.setcullface(t[l]),this.setblendmode(t[c])},t.prototype.setblend=function(t){t=t?1:0,this.activestate[a]!==t&&(this.activestate[a]=t,this.gl[t?"enable":"disable"](this.gl.blend))},t.prototype.setblendmode=function(t){t!==this.activestate[c]&&(this.activestate[c]=t,this.gl.blendfunc(this.blendmodes[t][0],this.blendmodes[t][1]))},t.prototype.setdepthtest=function(t){t=t?1:0,this.activestate[u]!==t&&(this.activestate[u]=t,this.gl[t?"enable":"disable"](this.gl.depth_test))},t.prototype.setcullface=function(t){t=t?1:0,this.activestate[l]!==t&&(this.activestate[l]=t,this.gl[t?"enable":"disable"](this.gl.cull_face))},t.prototype.setfrontface=function(t){t=t?1:0,this.activestate[h]!==t&&(this.activestate[h]=t,this.gl.frontface(this.gl[t?"cw":"ccw"]))},t.prototype.resetattributes=function(){for(var t=0;t<this.attribstate.tempattribstate.length;t++)this.attribstate.tempattribstate[t]=0;for(var e=0;e<this.attribstate.attribstate.length;e++)this.attribstate.attribstate[e]=0;for(var r=1;r<this.maxattribs;r++)this.gl.disablevertexattribarray(r)},t.prototype.resettodefault=function(){this.nativevaoextension&&this.nativevaoextension.bindvertexarrayoes(null),this.resetattributes();for(var t=0;t<this.activestate.length;++t)this.activestate[t]=32;this.gl.pixelstorei(this.gl.unpack_flip_y_webgl,!1),this.setstate(this.defaultstate)},t}();r.default=d},{"./utils/mapwebglblendmodestopixi":96}],84:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=t("./extractuniformsfromsrc"),a=n(s),u=t("../../../utils"),h=t("../../../const"),l=t("../../../settings"),c=n(l),d={},f=function(){function t(e,r,n){i(this,t),this.vertexsrc=e||t.defaultvertexsrc,this.fragmentsrc=r||t.defaultfragmentsrc,this.blendmode=h.blend_modes.normal,this.uniformdata=n||(0,a.default)(this.vertexsrc,this.fragmentsrc,"projectionmatrix|usampler"),this.uniforms={};for(var o in this.uniformdata)this.uniforms[o]=this.uniformdata[o].value;this.glshaders={},d[this.vertexsrc+this.fragmentsrc]||(d[this.vertexsrc+this.fragmentsrc]=(0,u.uid)()),this.glshaderkey=d[this.vertexsrc+this.fragmentsrc],this.padding=4,this.resolution=c.default.resolution,this.enabled=!0,this.autofit=!0}return t.prototype.apply=function(t,e,r,n,i){t.applyfilter(this,e,r,n)},o(t,null,[{key:"defaultvertexsrc",get:function(){return["attribute vec2 avertexposition;","attribute vec2 atexturecoord;","uniform mat3 projectionmatrix;","uniform mat3 filtermatrix;","varying vec2 vtexturecoord;","varying vec2 vfiltercoord;","void main(void){","   gl_position = vec4((projectionmatrix * vec3(avertexposition, 1.0)).xy, 0.0, 1.0);","   vfiltercoord = ( filtermatrix * vec3( atexturecoord, 1.0)  ).xy;","   vtexturecoord = atexturecoord ;","}"].join("\n")}},{key:"defaultfragmentsrc",get:function(){return["varying vec2 vtexturecoord;","varying vec2 vfiltercoord;","uniform sampler2d usampler;","uniform sampler2d filtersampler;","void main(void){","   vec4 masky = texture2d(filtersampler, vfiltercoord);","   vec4 sample = texture2d(usampler, vtexturecoord);","   vec4 color;","   if(mod(vfiltercoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_fragcolor = mix(sample, masky, 0.5);","   gl_fragcolor *= sample.a;","}"].join("\n")}}]),t}();r.default=f},{"../../../const":44,"../../../settings":99,"../../../utils":122,"./extractuniformsfromsrc":85}],85:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e,r){var n=o(t,r),i=o(e,r);return object.assign(n,i)}function o(t){for(var e=new regexp("^(projectionmatrix|usampler|filterarea|filterclamp)$"),r={},n=void 0,i=t.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<i.length;o++){var s=i[o].trim();if(s.indexof("uniform")>-1){var a=s.split(" "),h=a[1],l=a[2],c=1;l.indexof("[")>-1&&(n=l.split(/\[|]/),l=n[0],c*=number(n[1])),l.match(e)||(r[l]={value:u(h,c),name:l,type:h})}}return r}r.__esmodule=!0,r.default=i;var s=t("pixi-gl-core"),a=n(s),u=a.default.shader.defaultvalue},{"pixi-gl-core":12}],86:[function(t,e,r){"use strict";function n(t,e,r){var n=t.identity();return n.translate(e.x/r.width,e.y/r.height),n.scale(r.width,r.height),n}function i(t,e,r){var n=t.identity();n.translate(e.x/r.width,e.y/r.height);var i=r.width/e.width,o=r.height/e.height;return n.scale(i,o),n}function o(t,e,r,n){var i=n.worldtransform.copy(s.matrix.temp_matrix),o=n._texture.basetexture,a=t.identity(),u=r.height/r.width;a.translate(e.x/r.width,e.y/r.height),a.scale(1,u);var h=r.width/o.width,l=r.height/o.height;return i.tx/=o.width*h,i.ty/=o.width*h,i.invert(),a.prepend(i),a.scale(1,1/u),a.scale(h,l),a.translate(n.anchor.x,n.anchor.y),a}r.__esmodule=!0,r.calculatescreenspacematrix=n,r.calculatenormalizedscreenspacematrix=i,r.calculatespritematrix=o;var s=t("../../../math")},{"../../../math":68}],87:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=t("../filter"),u=n(a),h=t("../../../../math"),l=(t("path"),function(t){function e(r){i(this,e);var n=new h.matrix,s=o(this,t.call(this,"attribute vec2 avertexposition;\nattribute vec2 atexturecoord;\n\nuniform mat3 projectionmatrix;\nuniform mat3 othermatrix;\n\nvarying vec2 vmaskcoord;\nvarying vec2 vtexturecoord;\n\nvoid main(void)\n{\n    gl_position = vec4((projectionmatrix * vec3(avertexposition, 1.0)).xy, 0.0, 1.0);\n\n    vtexturecoord = atexturecoord;\n    vmaskcoord = ( othermatrix * vec3( atexturecoord, 1.0)  ).xy;\n}\n","varying vec2 vmaskcoord;\nvarying vec2 vtexturecoord;\n\nuniform sampler2d usampler;\nuniform float alpha;\nuniform sampler2d mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vmaskcoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2d(usampler, vtexturecoord);\n    vec4 masky = texture2d(mask, vmaskcoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_fragcolor = original;\n}\n"));return r.renderable=!1,s.masksprite=r,s.maskmatrix=n,s}return s(e,t),e.prototype.apply=function(t,e,r){var n=this.masksprite;this.uniforms.mask=n._texture,this.uniforms.othermatrix=t.calculatespritematrix(this.maskmatrix,n),this.uniforms.alpha=n.worldalpha,t.applyfilter(this,e,r)},e}(u.default));r.default=l},{"../../../../math":68,"../filter":84,path:22}],88:[function(t,e,r){"use strict";function n(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esmodule?t:{default:t}}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var u=t("./webglmanager"),h=i(u),l=t("../utils/rendertarget"),c=i(l),d=t("../utils/quad"),f=i(d),p=t("../../../math"),v=t("../../../shader"),y=i(v),g=t("../filters/filtertransforms"),m=n(g),_=t("bit-twiddle"),b=i(_),x=function t(){a(this,t),this.rendertarget=null,this.sourceframe=new p.rectangle,this.destinationframe=new p.rectangle,this.filters=[],this.target=null,this.resolution=1},t=function(t){function e(r){a(this,e);var n=o(this,t.call(this,r));return n.gl=n.renderer.gl,n.quad=new f.default(n.gl,r.state.attribstate),n.shadercache={},n.pool={},n.filterdata=null,n}return s(e,t),e.prototype.pushfilter=function(t,e){var r=this.renderer,n=this.filterdata;if(!n){n=this.renderer._activerendertarget.filterstack;var i=new x;i.sourceframe=i.destinationframe=this.renderer._activerendertarget.size,i.rendertarget=r._activerendertarget,this.renderer._activerendertarget.filterdata=n={index:0,stack:[i]},this.filterdata=n}var o=n.stack[++n.index];o||(o=n.stack[n.index]=new x);var s=e[0].resolution,a=0|e[0].padding,u=t.filterarea||t.getbounds(!0),h=o.sourceframe,l=o.destinationframe;h.x=(u.x*s|0)/s,h.y=(u.y*s|0)/s,h.width=(u.width*s|0)/s,h.height=(u.height*s|0)/s,n.stack[0].rendertarget.transform||e[0].autofit&&h.fit(n.stack[0].destinationframe),h.pad(a),l.width=h.width,l.height=h.height;var c=this.getpotrendertarget(r.gl,h.width,h.height,s);o.target=t,o.filters=e,o.resolution=s,o.rendertarget=c,c.setframe(l,h),r.bindrendertarget(c),c.clear()},e.prototype.popfilter=function(){var t=this.filterdata,e=t.stack[t.index-1],r=t.stack[t.index];this.quad.map(r.rendertarget.size,r.sourceframe).upload();var n=r.filters;if(1===n.length)n[0].apply(this,r.rendertarget,e.rendertarget,!1,r),this.freepotrendertarget(r.rendertarget);else{var i=r.rendertarget,o=this.getpotrendertarget(this.renderer.gl,r.sourceframe.width,r.sourceframe.height,r.resolution);o.setframe(r.destinationframe,r.sourceframe),o.clear();var s=0;for(s=0;s<n.length-1;++s){n[s].apply(this,i,o,!0,r);var a=i;i=o,o=a}n[s].apply(this,i,e.rendertarget,!1,r),this.freepotrendertarget(i),this.freepotrendertarget(o)}t.index--,0===t.index&&(this.filterdata=null)},e.prototype.applyfilter=function(t,e,r,n){var i=this.renderer,o=i.gl,s=t.glshaders[i.context_uid];s||(t.glshaderkey?(s=this.shadercache[t.glshaderkey],s||(s=new y.default(this.gl,t.vertexsrc,t.fragmentsrc),t.glshaders[i.context_uid]=this.shadercache[t.glshaderkey]=s)):s=t.glshaders[i.context_uid]=new y.default(this.gl,t.vertexsrc,t.fragmentsrc),i.bindvao(null),this.quad.initvao(s)),i.bindvao(this.quad.vao),i.bindrendertarget(r),n&&(o.disable(o.scissor_test),i.clear(),o.enable(o.scissor_test)),r===i.maskmanager.scissorrendertarget&&i.maskmanager.pushscissormask(null,i.maskmanager.scissordata),i.bindshader(s);var a=this.renderer.emptytextures[0];this.renderer.boundtextures[0]=a,this.syncuniforms(s,t),i.state.setblendmode(t.blendmode),o.activetexture(o.texture0),o.bindtexture(o.texture_2d,e.texture.texture),this.quad.vao.draw(this.renderer.gl.triangles,6,0),o.bindtexture(o.texture_2d,a._gltextures[this.renderer.context_uid].texture)},e.prototype.syncuniforms=function(t,e){var r=e.uniformdata,n=e.uniforms,i=1,o=void 0;if(t.uniforms.filterarea){o=this.filterdata.stack[this.filterdata.index];var s=t.uniforms.filterarea;s[0]=o.rendertarget.size.width,s[1]=o.rendertarget.size.height,s[2]=o.sourceframe.x,s[3]=o.sourceframe.y,t.uniforms.filterarea=s}if(t.uniforms.filterclamp){o=o||this.filterdata.stack[this.filterdata.index];var a=t.uniforms.filterclamp;a[0]=0,a[1]=0,a[2]=(o.sourceframe.width-1)/o.rendertarget.size.width,a[3]=(o.sourceframe.height-1)/o.rendertarget.size.height,t.uniforms.filterclamp=a}for(var u in r)if("sampler2d"===r[u].type&&0!==n[u]){if(n[u].basetexture)t.uniforms[u]=this.renderer.bindtexture(n[u].basetexture,i);else{t.uniforms[u]=i;var h=this.renderer.gl;this.renderer.boundtextures[i]=this.renderer.emptytextures[i],h.activetexture(h.texture0+i),n[u].texture.bind()}i++}else if("mat3"===r[u].type)void 0!==n[u].a?t.uniforms[u]=n[u].toarray(!0):t.uniforms[u]=n[u];else if("vec2"===r[u].type)if(void 0!==n[u].x){var l=t.uniforms[u]||new float32array(2);l[0]=n[u].x,l[1]=n[u].y,t.uniforms[u]=l}else t.uniforms[u]=n[u];else"float"===r[u].type?t.uniforms.data[u].value!==r[u]&&(t.uniforms[u]=n[u]):t.uniforms[u]=n[u]},e.prototype.getrendertarget=function(t,e){var r=this.filterdata.stack[this.filterdata.index],n=this.getpotrendertarget(this.renderer.gl,r.sourceframe.width,r.sourceframe.height,e||r.resolution);return n.setframe(r.destinationframe,r.sourceframe),n},e.prototype.returnrendertarget=function(t){this.freepotrendertarget(t)},e.prototype.calculatescreenspacematrix=function(t){var e=this.filterdata.stack[this.filterdata.index];return m.calculatescreenspacematrix(t,e.sourceframe,e.rendertarget.size)},e.prototype.calculatenormalizedscreenspacematrix=function(t){var e=this.filterdata.stack[this.filterdata.index];return m.calculatenormalizedscreenspacematrix(t,e.sourceframe,e.rendertarget.size,e.destinationframe)},e.prototype.calculatespritematrix=function(t,e){var r=this.filterdata.stack[this.filterdata.index];return m.calculatespritematrix(t,r.sourceframe,r.rendertarget.size,e)},e.prototype.destroy=function(){this.shadercache={},this.emptypool()},e.prototype.getpotrendertarget=function(t,e,r,n){e=b.default.nextpow2(e*n),r=b.default.nextpow2(r*n);var i=(65535&e)<<16|65535&r;this.pool[i]||(this.pool[i]=[]);var o=this.pool[i].pop();if(!o){var s=this.renderer.boundtextures[0];t.activetexture(t.texture0),o=new c.default(t,e,r,null,1),t.bindtexture(t.texture_2d,s._gltextures[this.renderer.context_uid].texture)}return o.resolution=n,o.defaultframe.width=o.size.width=e/n,o.defaultframe.height=o.size.height=r/n,o},e.prototype.emptypool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var r=0;r<e.length;r++)e[r].destroy(!0)}this.pool={}},e.prototype.freepotrendertarget=function(t){var e=t.size.width*t.resolution,r=t.size.height*t.resolution,n=(65535&e)<<16|65535&r;this.pool[n].push(t)},e}(h.default);r.default=t},{"../../../shader":42,"../../../math":68,"../filters/filtertransforms":86,"../utils/quad":93,"../utils/rendertarget":94,"./webglmanager":91,"bit-twiddle":1}],89:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=t("./webglmanager"),u=n(a),h=t("../filters/spritemask/spritemaskfilter"),l=n(h),c=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));return n.scissor=!1,n.scissordata=null,n.scissorrendertarget=null,n.enablescissor=!0,n.alphamaskpool=[],n.alphamaskindex=0,n}return s(e,t),e.prototype.pushmask=function(t,e){if(e.texture)this.pushspritemask(t,e);else if(this.enablescissor&&!this.scissor&&this.renderer._activerendertarget.root&&!this.renderer.stencilmanager.stencilmaskstack.length&&e.isfastrect()){var r=e.worldtransform,n=math.atan2(r.b,r.a);n=math.round(n*(180/math.pi)),n%90?this.pushstencilmask(e):this.pushscissormask(t,e)}else this.pushstencilmask(e)},e.prototype.popmask=function(t,e){e.texture?this.popspritemask(t,e):this.enablescissor&&!this.renderer.stencilmanager.stencilmaskstack.length?this.popscissormask(t,e):this.popstencilmask(t,e)},e.prototype.pushspritemask=function(t,e){var r=this.alphamaskpool[this.alphamaskindex];r||(r=this.alphamaskpool[this.alphamaskindex]=[new l.default(e)]),r[0].resolution=this.renderer.resolution,r[0].masksprite=e,t.filterarea=e.getbounds(!0),this.renderer.filtermanager.pushfilter(t,r),this.alphamaskindex++},e.prototype.popspritemask=function(){this.renderer.filtermanager.popfilter(),this.alphamaskindex--},e.prototype.pushstencilmask=function(t){this.renderer.currentrenderer.stop(),this.renderer.stencilmanager.pushstencil(t)},e.prototype.popstencilmask=function(){this.renderer.currentrenderer.stop(),this.renderer.stencilmanager.popstencil()},e.prototype.pushscissormask=function(t,e){e.renderable=!0;var r=this.renderer._activerendertarget,n=e.getbounds();n.fit(r.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.scissor_test);var i=this.renderer.resolution;this.renderer.gl.scissor(n.x*i,(r.root?r.size.height-n.y-n.height:n.y)*i,n.width*i,n.height*i),this.scissorrendertarget=r,this.scissordata=e,this.scissor=!0},e.prototype.popscissormask=function(){this.scissorrendertarget=null,this.scissordata=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.scissor_test)},e}(u.default);r.default=c},{"../filters/spritemask/spritemaskfilter":87,"./webglmanager":91}],90:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=t("./webglmanager"),u=n(a),h=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));return n.stencilmaskstack=null,n}return s(e,t),e.prototype.setmaskstack=function(t){this.stencilmaskstack=t;var e=this.renderer.gl;0===t.length?e.disable(e.stencil_test):e.enable(e.stencil_test)},e.prototype.pushstencil=function(t){this.renderer.setobjectrenderer(this.renderer.plugins.graphics),this.renderer._activerendertarget.attachstencilbuffer();var e=this.renderer.gl,r=this.stencilmaskstack;0===r.length&&(e.enable(e.stencil_test),e.clear(e.stencil_buffer_bit),e.stencilfunc(e.always,1,1)),r.push(t),e.colormask(!1,!1,!1,!1),e.stencilop(e.keep,e.keep,e.incr),this.renderer.plugins.graphics.render(t),e.colormask(!0,!0,!0,!0),e.stencilfunc(e.notequal,0,r.length),e.stencilop(e.keep,e.keep,e.keep)},e.prototype.popstencil=function(){this.renderer.setobjectrenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilmaskstack,r=e.pop();0===e.length?t.disable(t.stencil_test):(t.colormask(!1,!1,!1,!1),t.stencilop(t.keep,t.keep,t.decr),
this.renderer.plugins.graphics.render(r),t.colormask(!0,!0,!0,!0),t.stencilfunc(t.notequal,0,e.length),t.stencilop(t.keep,t.keep,t.keep))},e.prototype.destroy=function(){u.default.prototype.destroy.call(this),this.stencilmaskstack.stencilstack=null},e}(u.default);r.default=h},{"./webglmanager":91}],91:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var i=function(){function t(e){n(this,t),this.renderer=e,this.renderer.on("context",this.oncontextchange,this)}return t.prototype.oncontextchange=function(){},t.prototype.destroy=function(){this.renderer.off("context",this.oncontextchange,this),this.renderer=null},t}();r.default=i},{}],92:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=t("../managers/webglmanager"),u=n(a),h=function(t){function e(){return i(this,e),o(this,t.apply(this,arguments))}return s(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(u.default);r.default=h},{"../managers/webglmanager":91}],93:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=t("pixi-gl-core"),s=n(o),a=t("../../../utils/createindicesforquads"),u=n(a),h=function(){function t(e,r){i(this,t),this.gl=e,this.vertices=new float32array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new float32array([0,0,1,0,1,1,0,1]),this.interleaved=new float32array(16);for(var n=0;n<4;n++)this.interleaved[4*n]=this.vertices[2*n],this.interleaved[4*n+1]=this.vertices[2*n+1],this.interleaved[4*n+2]=this.uvs[2*n],this.interleaved[4*n+3]=this.uvs[2*n+1];this.indices=(0,u.default)(1),this.vertexbuffer=s.default.glbuffer.createvertexbuffer(e,this.interleaved,e.static_draw),this.indexbuffer=s.default.glbuffer.createindexbuffer(e,this.indices,e.static_draw),this.vao=new s.default.vertexarrayobject(e,r)}return t.prototype.initvao=function(t){this.vao.clear().addindex(this.indexbuffer).addattribute(this.vertexbuffer,t.attributes.avertexposition,this.gl.float,!1,16,0).addattribute(this.vertexbuffer,t.attributes.atexturecoord,this.gl.float,!1,16,8)},t.prototype.map=function(t,e){var r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+e.width/t.width,this.uvs[3]=n,this.uvs[4]=r+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=r,this.uvs[7]=n+e.height/t.height,r=e.x,n=e.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+e.width,this.vertices[3]=n,this.vertices[4]=r+e.width,this.vertices[5]=n+e.height,this.vertices[6]=r,this.vertices[7]=n+e.height,this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexbuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deletebuffer(this.vertexbuffer),t.deletebuffer(this.indexbuffer)},t}();r.default=h},{"../../../utils/createindicesforquads":120,"pixi-gl-core":12}],94:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=t("../../../math"),s=t("../../../const"),a=t("../../../settings"),u=n(a),h=t("pixi-gl-core"),l=function(){function t(e,r,n,a,l,c){i(this,t),this.gl=e,this.framebuffer=null,this.texture=null,this.clearcolor=[0,0,0,0],this.size=new o.rectangle(0,0,1,1),this.resolution=l||u.default.resolution,this.projectionmatrix=new o.matrix,this.transform=null,this.frame=null,this.defaultframe=new o.rectangle,this.destinationframe=null,this.sourceframe=null,this.stencilbuffer=null,this.stencilmaskstack=[],this.filterdata=null,this.scalemode=void 0!==a?a:u.default.scale_mode,this.root=c,this.root?(this.framebuffer=new h.glframebuffer(e,100,100),this.framebuffer.framebuffer=null):(this.framebuffer=h.glframebuffer.creatergba(e,100,100),this.scalemode===s.scale_modes.nearest?this.framebuffer.texture.enablenearestscaling():this.framebuffer.texture.enablelinearscaling(),this.texture=this.framebuffer.texture),this.setframe(),this.resize(r,n)}return t.prototype.clear=function(t){var e=t||this.clearcolor;this.framebuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachstencilbuffer=function(){this.root||this.framebuffer.enablestencil()},t.prototype.setframe=function(t,e){this.destinationframe=t||this.destinationframe||this.defaultframe,this.sourceframe=e||this.sourceframe||t},t.prototype.activate=function(){var t=this.gl;this.framebuffer.bind(),this.calculateprojection(this.destinationframe,this.sourceframe),this.transform&&this.projectionmatrix.append(this.transform),this.destinationframe!==this.sourceframe?(t.enable(t.scissor_test),t.scissor(0|this.destinationframe.x,0|this.destinationframe.y,this.destinationframe.width*this.resolution|0,this.destinationframe.height*this.resolution|0)):t.disable(t.scissor_test),t.viewport(0|this.destinationframe.x,0|this.destinationframe.y,this.destinationframe.width*this.resolution|0,this.destinationframe.height*this.resolution|0)},t.prototype.calculateprojection=function(t,e){var r=this.projectionmatrix;e=e||t,r.identity(),this.root?(r.a=1/t.width*2,r.d=-1/t.height*2,r.tx=-1-e.x*r.a,r.ty=1-e.y*r.d):(r.a=1/t.width*2,r.d=1/t.height*2,r.tx=-1-e.x*r.a,r.ty=-1-e.y*r.d)},t.prototype.resize=function(t,e){if(t=0|t,e=0|e,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultframe.width=t,this.defaultframe.height=e,this.framebuffer.resize(t*this.resolution,e*this.resolution);var r=this.frame||this.size;this.calculateprojection(r)}},t.prototype.destroy=function(){this.framebuffer.destroy(),this.framebuffer=null,this.texture=null},t}();r.default=l},{"../../../const":44,"../../../math":68,"../../../settings":99,"pixi-gl-core":12}],95:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){var r=!e;if(r){var n=document.createelement("canvas");n.width=1,n.height=1,e=a.default.createcontext(n)}for(var i=e.createshader(e.fragment_shader);;){var s=u.replace(/%forloop%/gi,o(t));if(e.shadersource(i,s),e.compileshader(i),e.getshaderparameter(i,e.compile_status))break;t=t/2|0}return r&&e.getextension("webgl_lose_context")&&e.getextension("webgl_lose_context").losecontext(),t}function o(t){for(var e="",r=0;r<t;++r)r>0&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}r.__esmodule=!0,r.default=i;var s=t("pixi-gl-core"),a=n(s),u=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_fragcolor = vec4(0.0);","}"].join("\n")},{"pixi-gl-core":12}],96:[function(t,e,r){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[i.blend_modes.normal]=[t.one,t.one_minus_src_alpha],e[i.blend_modes.add]=[t.one,t.dst_alpha],e[i.blend_modes.multiply]=[t.dst_color,t.one_minus_src_alpha],e[i.blend_modes.screen]=[t.one,t.one_minus_src_color],e[i.blend_modes.overlay]=[t.one,t.one_minus_src_alpha],e[i.blend_modes.darken]=[t.one,t.one_minus_src_alpha],e[i.blend_modes.lighten]=[t.one,t.one_minus_src_alpha],e[i.blend_modes.color_dodge]=[t.one,t.one_minus_src_alpha],e[i.blend_modes.color_burn]=[t.one,t.one_minus_src_alpha],e[i.blend_modes.hard_light]=[t.one,t.one_minus_src_alpha],e[i.blend_modes.soft_light]=[t.one,t.one_minus_src_alpha],e[i.blend_modes.difference]=[t.one,t.one_minus_src_alpha],e[i.blend_modes.exclusion]=[t.one,t.one_minus_src_alpha],e[i.blend_modes.hue]=[t.one,t.one_minus_src_alpha],e[i.blend_modes.saturation]=[t.one,t.one_minus_src_alpha],e[i.blend_modes.color]=[t.one,t.one_minus_src_alpha],e[i.blend_modes.luminosity]=[t.one,t.one_minus_src_alpha],e}r.__esmodule=!0,r.default=n;var i=t("../../../const")},{"../../../const":44}],97:[function(t,e,r){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[i.draw_modes.points]=t.points,e[i.draw_modes.lines]=t.lines,e[i.draw_modes.line_loop]=t.line_loop,e[i.draw_modes.line_strip]=t.line_strip,e[i.draw_modes.triangles]=t.triangles,e[i.draw_modes.triangle_strip]=t.triangle_strip,e[i.draw_modes.triangle_fan]=t.triangle_fan,e}r.__esmodule=!0,r.default=n;var i=t("../../../const")},{"../../../const":44}],98:[function(t,e,r){"use strict";function n(t){var e=t.getcontextattributes();e.stencil||console.warn("provided webgl context does not have a stencil buffer, masks may not render correctly")}r.__esmodule=!0,r.default=n},{}],99:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}r.__esmodule=!0;var i=t("./utils/maxrecommendedtextures"),o=n(i),s=t("./utils/canuploadsamebuffer"),a=n(s);r.default={target_fpms:.06,mipmap_textures:!0,resolution:1,filter_resolution:1,sprite_max_textures:(0,o.default)(32),sprite_batch_size:4096,retina_prefix:/@([0-9\.]+)x/,render_options:{view:null,antialias:!1,forcefxaa:!1,autoresize:!1,transparent:!1,backgroundcolor:0,clearbeforerender:!0,preservedrawingbuffer:!1,roundpixels:!1,width:800,height:600,legacy:!1},transform_mode:0,gc_mode:0,gc_max_idle:3600,gc_max_check_count:600,wrap_mode:0,scale_mode:0,precision_vertex:"highp",precision_fragment:"mediump",can_upload_same_buffer:(0,a.default)()}},{"./utils/canuploadsamebuffer":119,"./utils/maxrecommendedtextures":123}],100:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("../math"),h=t("../utils"),l=t("../const"),c=t("../textures/texture"),d=n(c),f=t("../display/container"),p=n(f),v=new u.point,y=function(t){function e(r){i(this,e);var n=o(this,t.call(this));return n._anchor=new u.observablepoint(n._onanchorupdate,n),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintrgb=null,n.tint=16777215,n.blendmode=l.blend_modes.normal,n.shader=null,n.cachedtint=16777215,n.texture=r||d.default.empty,n.vertexdata=new float32array(8),n.vertextrimmeddata=null,n._transformid=-1,n._textureid=-1,n._transformtrimmedid=-1,n._texturetrimmedid=-1,n.pluginname="sprite",n}return s(e,t),e.prototype._ontextureupdate=function(){this._textureid=-1,this._texturetrimmedid=-1,this._width&&(this.scale.x=(0,h.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,h.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onanchorupdate=function(){this._transformid=-1,this._transformtrimmedid=-1},e.prototype.calculatevertices=function(){if(this._transformid!==this.transform._worldid||this._textureid!==this._texture._updateid){this._transformid=this.transform._worldid,this._textureid=this._texture._updateid;var t=this._texture,e=this.transform.worldtransform,r=e.a,n=e.b,i=e.c,o=e.d,s=e.tx,a=e.ty,u=this.vertexdata,h=t.trim,l=t.orig,c=this._anchor,d=0,f=0,p=0,v=0;h?(f=h.x-c._x*l.width,d=f+h.width,v=h.y-c._y*l.height,p=v+h.height):(f=-c._x*l.width,d=f+l.width,v=-c._y*l.height,p=v+l.height),u[0]=r*f+i*v+s,u[1]=o*v+n*f+a,u[2]=r*d+i*v+s,u[3]=o*v+n*d+a,u[4]=r*d+i*p+s,u[5]=o*p+n*d+a,u[6]=r*f+i*p+s,u[7]=o*p+n*f+a}},e.prototype.calculatetrimmedvertices=function(){if(this.vertextrimmeddata){if(this._transformtrimmedid===this.transform._worldid&&this._texturetrimmedid===this._texture._updateid)return}else this.vertextrimmeddata=new float32array(8);this._transformtrimmedid=this.transform._worldid,this._texturetrimmedid=this._texture._updateid;var t=this._texture,e=this.vertextrimmeddata,r=t.orig,n=this._anchor,i=this.transform.worldtransform,o=i.a,s=i.b,a=i.c,u=i.d,h=i.tx,l=i.ty,c=-n._x*r.width,d=c+r.width,f=-n._y*r.height,p=f+r.height;e[0]=o*c+a*f+h,e[1]=u*f+s*c+l,e[2]=o*d+a*f+h,e[3]=u*f+s*d+l,e[4]=o*d+a*p+h,e[5]=u*p+s*d+l,e[6]=o*c+a*p+h,e[7]=u*p+s*c+l},e.prototype._renderwebgl=function(t){this.calculatevertices(),t.setobjectrenderer(t.plugins[this.pluginname]),t.plugins[this.pluginname].render(this)},e.prototype._rendercanvas=function(t){t.plugins[this.pluginname].render(this)},e.prototype._calculatebounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculatevertices(),this._bounds.addquad(this.vertexdata)):(this.calculatetrimmedvertices(),this._bounds.addquad(this.vertextrimmeddata))},e.prototype.getlocalbounds=function(e){return 0===this.children.length?(this._bounds.minx=this._texture.orig.width*-this._anchor._x,this._bounds.miny=this._texture.orig.height*-this._anchor._y,this._bounds.maxx=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxy=this._texture.orig.height*(1-this._anchor._x),e||(this._localboundsrect||(this._localboundsrect=new u.rectangle),e=this._localboundsrect),this._bounds.getrectangle(e)):t.prototype.getlocalbounds.call(this,e)},e.prototype.containspoint=function(t){this.worldtransform.applyinverse(t,v);var e=this._texture.orig.width,r=this._texture.orig.height,n=-e*this.anchor.x,i=0;return v.x>n&&v.x<n+e&&(i=-r*this.anchor.y,v.y>i&&v.y<i+r)},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._anchor=null;var r="boolean"==typeof e?e:e&&e.texture;if(r){var n="boolean"==typeof e?e:e&&e.basetexture;this._texture.destroy(!!n)}this._texture=null,this.shader=null},e.from=function(t){return new e(d.default.from(t))},e.fromframe=function(t){var r=h.texturecache[t];if(!r)throw new error('the frameid "'+t+'" does not exist in the texture cache');return new e(r)},e.fromimage=function(t,r,n){return new e(d.default.fromimage(t,r,n))},a(e,[{key:"width",get:function(){return math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,h.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,h.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintrgb=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedtint=16777215,this._textureid=-1,this._texturetrimmedid=-1,t&&(t.basetexture.hasloaded?this._ontextureupdate():t.once("update",this._ontextureupdate,this)))}}]),e}(p.default);r.default=y},{"../const":44,"../display/container":46,"../math":68,"../textures/texture":113,"../utils":122}],101:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=t("../../renderers/canvas/canvasrenderer"),s=n(o),a=t("../../const"),u=t("../../math"),h=t("./canvastinter"),l=n(h),c=new u.matrix,d=function(){function t(e){i(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,r=this.renderer,n=e._frame.width,i=e._frame.height,o=t.transform.worldtransform,s=0,h=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.basetexture.source&&(r.setblendmode(t.blendmode),e.valid)){r.context.globalalpha=t.worldalpha;var d=e.basetexture.scalemode===a.scale_modes.linear;r.smoothproperty&&r.context[r.smoothproperty]!==d&&(r.context[r.smoothproperty]=d),e.trim?(s=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,h=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(s=(.5-t.anchor.x)*e.orig.width,h=(.5-t.anchor.y)*e.orig.height),e.rotate&&(o.copy(c),o=c,u.groupd8.matrixappendrotationinv(o,e.rotate,s,h),s=0,h=0),s-=n/2,h-=i/2,r.roundpixels?(r.context.settransform(o.a,o.b,o.c,o.d,o.tx*r.resolution|0,o.ty*r.resolution|0),s=0|s,h=0|h):r.context.settransform(o.a,o.b,o.c,o.d,o.tx*r.resolution,o.ty*r.resolution);var f=e.basetexture.resolution;16777215!==t.tint?(t.cachedtint!==t.tint&&(t.cachedtint=t.tint,t.tintedtexture=l.default.gettintedtexture(t,t.tint)),r.context.drawimage(t.tintedtexture,0,0,n*f,i*f,s*r.resolution,h*r.resolution,n*r.resolution,i*r.resolution)):r.context.drawimage(e.basetexture.source,e._frame.x*f,e._frame.y*f,n*f,i*f,s*r.resolution,h*r.resolution,n*r.resolution,i*r.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();r.default=d,s.default.registerplugin("sprite",d)},{"../../const":44,"../../math":68,"../../renderers/canvas/canvasrenderer":75,"./canvastinter":102}],102:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}r.__esmodule=!0;var i=t("../../utils"),o=t("../../renderers/canvas/utils/canusenewcanvasblendmodes"),s=n(o),a={gettintedtexture:function(t,e){var r=t._texture;e=a.roundcolor(e);var n="#"+("00000"+(0|e).tostring(16)).substr(-6);if(r.tintcache=r.tintcache||{},r.tintcache[n])return r.tintcache[n];var i=a.canvas||document.createelement("canvas");if(a.tintmethod(r,e,i),a.converttinttoimage){var o=new image;o.src=i.todataurl(),r.tintcache[n]=o}else r.tintcache[n]=i,a.canvas=null;return i},tintwithmultiply:function(t,e,r){var n=r.getcontext("2d"),i=t._frame.clone(),o=t.basetexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,r.width=math.ceil(i.width),r.height=math.ceil(i.height),n.fillstyle="#"+("00000"+(0|e).tostring(16)).substr(-6),n.fillrect(0,0,i.width,i.height),n.globalcompositeoperation="multiply",n.drawimage(t.basetexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.globalcompositeoperation="destination-atop",n.drawimage(t.basetexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},tintwithoverlay:function(t,e,r){var n=r.getcontext("2d"),i=t._frame.clone(),o=t.basetexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,r.width=math.ceil(i.width),r.height=math.ceil(i.height),n.globalcompositeoperation="copy",n.fillstyle="#"+("00000"+(0|e).tostring(16)).substr(-6),n.fillrect(0,0,i.width,i.height),n.globalcompositeoperation="destination-atop",n.drawimage(t.basetexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},tintwithperpixel:function(t,e,r){var n=r.getcontext("2d"),o=t._frame.clone(),s=t.basetexture.resolution;o.x*=s,o.y*=s,o.width*=s,o.height*=s,r.width=math.ceil(o.width),r.height=math.ceil(o.height),n.globalcompositeoperation="copy",n.drawimage(t.basetexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var a=(0,i.hex2rgb)(e),u=a[0],h=a[1],l=a[2],c=n.getimagedata(0,0,o.width,o.height),d=c.data,f=0;f<d.length;f+=4)d[f+0]*=u,d[f+1]*=h,d[f+2]*=l;n.putimagedata(c,0,0)},roundcolor:function(t){var e=a.cachestepspercolorchannel,r=(0,i.hex2rgb)(t);return r[0]=math.min(255,r[0]/e*e),r[1]=math.min(255,r[1]/e*e),r[2]=math.min(255,r[2]/e*e),(0,i.rgb2hex)(r)},cachestepspercolorchannel:8,converttinttoimage:!1,canusemultiply:(0,s.default)(),tintmethod:0};a.tintmethod=a.canusemultiply?a.tintwithmultiply:a.tintwithperpixel,r.default=a},{"../../renderers/canvas/utils/canusenewcanvasblendmodes":78,"../../utils":122}],103:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var i=function(){function t(e){n(this,t),this.vertices=new arraybuffer(e),this.float32view=new float32array(this.vertices),this.uint32view=new uint32array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();r.default=i},{}],104:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=t("../../renderers/webgl/utils/objectrenderer"),u=n(a),h=t("../../renderers/webgl/webglrenderer"),l=n(h),c=t("../../utils/createindicesforquads"),d=n(c),f=t("./generatemultitextureshader"),p=n(f),v=t("../../renderers/webgl/utils/checkmaxifstatmentsinshader"),y=n(v),g=t("./batchbuffer"),m=n(g),_=t("../../settings"),b=n(_),x=t("pixi-gl-core"),t=n(x),w=t("bit-twiddle"),e=n(w),s=0,o=0,p=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));n.vertsize=5,n.vertbytesize=4*n.vertsize,n.size=b.default.sprite_batch_size,n.buffers=[];for(var s=1;s<=e.default.nextpow2(n.size);s*=2)n.buffers.push(new m.default(4*s*n.vertbytesize));n.indices=(0,d.default)(n.size),n.shader=null,n.currentindex=0,n.groups=[];for(var a=0;a<n.size;a++)n.groups[a]={textures:[],texturecount:0,ids:[],size:0,start:0,blend:0};return n.sprites=[],n.vertexbuffers=[],n.vaos=[],n.vaomax=2,n.vertexcount=0,n.renderer.on("prerender",n.onprerender,n),n}return s(e,t),e.prototype.oncontextchange=function(){var t=this.renderer.gl;this.renderer.legacy?this.max_textures=1:(this.max_textures=math.min(t.getparameter(t.max_texture_image_units),b.default.sprite_max_textures),this.max_textures=(0,y.default)(this.max_textures,t)),this.shader=(0,p.default)(t,this.max_textures),this.indexbuffer=t.default.glbuffer.createindexbuffer(t,this.indices,t.static_draw),this.renderer.bindvao(null);for(var e=this.shader.attributes,r=0;r<this.vaomax;r++){var n=this.vertexbuffers[r]=t.default.glbuffer.createvertexbuffer(t,null,t.stream_draw),i=this.renderer.createvao().addindex(this.indexbuffer).addattribute(n,e.avertexposition,t.float,!1,this.vertbytesize,0).addattribute(n,e.atexturecoord,t.unsigned_short,!0,this.vertbytesize,8).addattribute(n,e.acolor,t.unsigned_byte,!0,this.vertbytesize,12);e.atextureid&&i.addattribute(n,e.atextureid,t.float,!1,this.vertbytesize,16),this.vaos[r]=i}this.vao=this.vaos[0],this.currentblendmode=99999,this.boundtextures=new array(this.max_textures)},e.prototype.onprerender=function(){this.vertexcount=0},e.prototype.render=function(t){this.currentindex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentindex++]=t)},e.prototype.flush=function(){if(0!==this.currentindex){var t=this.renderer.gl,e=this.max_textures,r=e.default.nextpow2(this.currentindex),n=e.default.log2(r),i=this.buffers[n],o=this.sprites,s=this.groups,a=i.float32view,u=i.uint32view,h=this.boundtextures,l=this.renderer.boundtextures,c=this.renderer.texturegc.count,d=0,f=void 0,p=void 0,v=1,y=0,g=s[0],m=void 0,_=void 0,x=o[0].blendmode;g.texturecount=0,g.start=0,g.blend=x,s++;var w=void 0;for(w=0;w<e;++w)h[w]=l[w],h[w]._virtalboundid=w;for(w=0;w<this.currentindex;++w){var p=o[w];if(f=p._texture.basetexture,x!==p.blendmode&&(x=p.blendmode,p=null,y=e,s++),p!==f&&(p=f,f._enabled!==s)){if(y===e&&(s++,g.size=w-g.start,y=0,g=s[v++],g.blend=x,g.texturecount=0,g.start=w),f.touched=c,f._virtalboundid===-1)for(var m=0;m<e;++m){var c=(m+o)%e,r=h[c];if(r._enabled!==s){o++,r._virtalboundid=-1,f._virtalboundid=c,h[c]=f;break}}f._enabled=s,g.texturecount++,g.ids[y]=f._virtalboundid,g.textures[y++]=f}if(m=p.vertexdata,_=p._texture._uvs.uvsuint32,this.renderer.roundpixels){var a=this.renderer.resolution;a[d]=(m[0]*a|0)/a,a[d+1]=(m[1]*a|0)/a,a[d+5]=(m[2]*a|0)/a,a[d+6]=(m[3]*a|0)/a,a[d+10]=(m[4]*a|0)/a,a[d+11]=(m[5]*a|0)/a,a[d+15]=(m[6]*a|0)/a,a[d+16]=(m[7]*a|0)/a}else a[d]=m[0],a[d+1]=m[1],a[d+5]=m[2],a[d+6]=m[3],a[d+10]=m[4],a[d+11]=m[5],a[d+15]=m[6],a[d+16]=m[7];u[d+2]=_[0],u[d+7]=_[1],u[d+12]=_[2],u[d+17]=_[3],u[d+3]=u[d+8]=u[d+13]=u[d+18]=p._tintrgb+(255*math.min(p.worldalpha,1)<<24),a[d+4]=a[d+9]=a[d+14]=a[d+19]=f._virtalboundid,d+=20}if(g.size=w-g.start,b.default.can_upload_same_buffer)this.vertexbuffers[this.vertexcount].upload(i.vertices,0,!0);else{if(this.vaomax<=this.vertexcount){this.vaomax++;var i=this.shader.attributes,d=this.vertexbuffers[this.vertexcount]=t.default.glbuffer.createvertexbuffer(t,null,t.stream_draw),l=this.renderer.createvao().addindex(this.indexbuffer).addattribute(d,i.avertexposition,t.float,!1,this.vertbytesize,0).addattribute(d,i.atexturecoord,t.unsigned_short,!0,this.vertbytesize,8).addattribute(d,i.acolor,t.unsigned_byte,!0,this.vertbytesize,12);i.atextureid&&l.addattribute(d,i.atextureid,t.float,!1,this.vertbytesize,16),this.vaos[this.vertexcount]=l}this.renderer.bindvao(this.vaos[this.vertexcount]),this.vertexbuffers[this.vertexcount].upload(i.vertices,0,!1),this.vertexcount++}for(w=0;w<e;++w)l[w]._virtalboundid=-1;for(w=0;w<v;++w){for(var f=s[w],n=f.texturecount,k=0;k<n;k++)p=f.textures[k],l[f.ids[k]]!==p&&this.renderer.bindtexture(p,f.ids[k],!0),p._virtalboundid=-1;this.renderer.state.setblendmode(f.blend),t.drawelements(t.triangles,6*f.size,t.unsigned_short,6*f.start*2)}this.currentindex=0}},e.prototype.start=function(){this.renderer.bindshader(this.shader),b.default.can_upload_same_buffer&&(this.renderer.bindvao(this.vaos[this.vertexcount]),this.vertexbuffers[this.vertexcount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaomax;e++)this.vertexbuffers[e]&&this.vertexbuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexbuffer&&this.indexbuffer.destroy(),this.renderer.off("prerender",this.onprerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexbuffers=null,this.vaos=null,this.indexbuffer=null,this.indices=null,this.sprites=null;for(var r=0;r<this.buffers.length;++r)this.buffers[r].destroy()},e}(u.default);r.default=p,l.default.registerplugin("sprite",p)},{"../../renderers/webgl/webglrenderer":82,"../../renderers/webgl/utils/objectrenderer":92,"../../renderers/webgl/utils/checkmaxifstatmentsinshader":95,"../../settings":99,"../../utils/createindicesforquads":120,"./batchbuffer":103,"./generatemultitextureshader":105,"bit-twiddle":1,"pixi-gl-core":12}],105:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){var r="precision highp float;\nattribute vec2 avertexposition;\nattribute vec2 atexturecoord;\nattribute vec4 acolor;\nattribute float atextureid;\n\nuniform mat3 projectionmatrix;\n\nvarying vec2 vtexturecoord;\nvarying vec4 vcolor;\nvarying float vtextureid;\n\nvoid main(void){\n    gl_position = vec4((projectionmatrix * vec3(avertexposition, 1.0)).xy, 0.0, 1.0);\n\n    vtexturecoord = atexturecoord;\n    vtextureid = atextureid;\n    vcolor = vec4(acolor.rgb * acolor.a, acolor.a);\n}\n",n=u;n=n.replace(/%count%/gi,e),n=n.replace(/%forloop%/gi,o(e));for(var i=new a.default(t,r,n),s=[],h=0;h<e;h++)s[h]=h;return i.bind(),i.uniforms.usamplers=s,i}function o(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)r>0&&(e+="\nelse "),r<t-1&&(e+="if(textureid == "+r+".0)"),e+="\n{",e+="\n\tcolor = texture2d(usamplers["+r+"], vtexturecoord);",e+="\n}";return e+="\n",e+="\n"}r.__esmodule=!0,r.default=i;var s=t("../../shader"),a=n(s),u=(t("path"),["varying vec2 vtexturecoord;","varying vec4 vcolor;","varying float vtextureid;","uniform sampler2d usamplers[%count%];","void main(void){","vec4 color;","float textureid = floor(vtextureid+0.5);","%forloop%","gl_fragcolor = color * vcolor;","}"].join("\n"))},{"../../shader":42,path:22}],106:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("../sprites/sprite"),h=n(u),l=t("../textures/texture"),c=n(l),d=t("../math"),f=t("../utils"),p=t("../const"),v=t("../settings"),y=n(v),g=t("./textstyle"),m=n(g),_=t("./textmetrics"),b=n(_),x=t("../utils/trimcanvas"),t=n(x),w={texture:!0,children:!1,basetexture:!0},e=function(t){function e(r,n,s){i(this,e),s=s||document.createelement("canvas"),s.width=3,s.height=3;var a=c.default.fromcanvas(s,y.default.scale_mode,"text");a.orig=new d.rectangle,a.trim=new d.rectangle;var u=o(this,t.call(this,a));return c.default.addtocache(u._texture,u._texture.basetexture.texturecacheids[0]),u.canvas=s,u.context=u.canvas.getcontext("2d"),u.resolution=y.default.resolution,u._text=null,u._style=null,u._stylelistener=null,u._font="",u.text=r,u.style=n,u.localstyleid=-1,u}return s(e,t),e.prototype.updatetext=function(t){var e=this._style;if(this.localstyleid!==e.styleid&&(this.dirty=!0,this.localstyleid=e.styleid),this.dirty||!t){this._font=this._style.tofontstring();var r=b.default.measuretext(this._text,this._style,this._style.wordwrap,this.canvas),n=r.width,i=r.height,o=r.lines,s=r.lineheight,a=r.linewidths,u=r.maxlinewidth,h=r.fontproperties;this.canvas.width=math.ceil((n+2*e.padding)*this.resolution),this.canvas.height=math.ceil((i+2*e.padding)*this.resolution),this.context.scale(this.resolution,this.resolution),this.context.clearrect(0,0,this.canvas.width,this.canvas.height),this.context.font=this._font,this.context.strokestyle=e.stroke,this.context.linewidth=e.strokethickness,this.context.textbaseline=e.textbaseline,this.context.linejoin=e.linejoin,this.context.miterlimit=e.miterlimit;var l=void 0,c=void 0;if(e.dropshadow){this.context.shadowblur=e.dropshadowblur,this.context.globalalpha=e.dropshadowalpha,e.dropshadowblur>0?this.context.shadowcolor=e.dropshadowcolor:this.context.fillstyle=e.dropshadowcolor;for(var d=math.cos(e.dropshadowangle)*e.dropshadowdistance,f=math.sin(e.dropshadowangle)*e.dropshadowdistance,p=0;p<o.length;p++)l=e.strokethickness/2,c=e.strokethickness/2+p*s+h.ascent,"right"===e.align?l+=u-a[p]:"center"===e.align&&(l+=(u-a[p])/2),e.fill&&(this.drawletterspacing(o[p],l+d+e.padding,c+f+e.padding),e.stroke&&e.strokethickness&&(this.context.strokestyle=e.dropshadowcolor,this.drawletterspacing(o[p],l+d+e.padding,c+f+e.padding,!0),this.context.strokestyle=e.stroke))}this.context.shadowblur=0,this.context.globalalpha=1,this.context.fillstyle=this._generatefillstyle(e,o);for(var v=0;v<o.length;v++)l=e.strokethickness/2,c=e.strokethickness/2+v*s+h.ascent,"right"===e.align?l+=u-a[v]:"center"===e.align&&(l+=(u-a[v])/2),
e.stroke&&e.strokethickness&&this.drawletterspacing(o[v],l+e.padding,c+e.padding,!0),e.fill&&this.drawletterspacing(o[v],l+e.padding,c+e.padding);this.updatetexture()}},e.prototype.drawletterspacing=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this._style,o=i.letterspacing;if(0===o)return void(n?this.context.stroketext(t,e,r):this.context.filltext(t,e,r));for(var s=string.prototype.split.call(t,""),a=e,u=0,h="";u<t.length;)h=s[u++],n?this.context.stroketext(h,a,r):this.context.filltext(h,a,r),a+=this.context.measuretext(h).width+o},e.prototype.updatetexture=function(){if(this._style.trim){var t=(0,t.default)(this.canvas);this.canvas.width=t.width,this.canvas.height=t.height,this.context.putimagedata(t.data,0,0)}var e=this._texture,r=this._style,n=r.trim?0:r.padding;e.basetexture.hasloaded=!0,e.basetexture.resolution=this.resolution,e.basetexture.realwidth=this.canvas.width,e.basetexture.realheight=this.canvas.height,e.basetexture.width=this.canvas.width/this.resolution,e.basetexture.height=this.canvas.height/this.resolution,e.trim.width=e._frame.width=this.canvas.width/this.resolution,e.trim.height=e._frame.height=this.canvas.height/this.resolution,e.trim.x=-n,e.trim.y=-n,e.orig.width=e._frame.width-2*n,e.orig.height=e._frame.height-2*n,this._ontextureupdate(),e.basetexture.emit("update",e.basetexture),this.dirty=!1},e.prototype.renderwebgl=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updatetext(!0),t.prototype.renderwebgl.call(this,e)},e.prototype._rendercanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updatetext(!0),t.prototype._rendercanvas.call(this,e)},e.prototype.getlocalbounds=function(e){return this.updatetext(!0),t.prototype.getlocalbounds.call(this,e)},e.prototype._calculatebounds=function(){this.updatetext(!0),this.calculatevertices(),this._bounds.addquad(this.vertexdata)},e.prototype._onstylechange=function(){this.dirty=!0},e.prototype._generatefillstyle=function(t,e){if(!array.isarray(t.fill))return t.fill;if(navigator.iscocoonjs)return t.fill[0];var r=void 0,n=void 0,i=void 0,o=void 0,s=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,u=t.fill.slice(),h=t.fillgradientstops.slice();if(!h.length)for(var l=u.length+1,c=1;c<l;++c)h.push(c/l);if(u.unshift(t.fill[0]),h.unshift(0),u.push(t.fill[t.fill.length-1]),h.push(1),t.fillgradienttype===p.text_gradient.linear_vertical){r=this.context.createlineargradient(s/2,0,s/2,a),n=(u.length+1)*e.length,i=0;for(var d=0;d<e.length;d++){i+=1;for(var f=0;f<u.length;f++)o="number"==typeof h[f]?h[f]/e.length+d/e.length:i/n,r.addcolorstop(o,u[f]),i++}}else{r=this.context.createlineargradient(0,a/2,s,a/2),n=u.length+1,i=1;for(var v=0;v<u.length;v++)o="number"==typeof h[v]?h[v]:i/n,r.addcolorstop(o,u[v]),i++}return r},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=object.assign({},w,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},a(e,[{key:"width",get:function(){return this.updatetext(!0),math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updatetext(!0);var e=(0,f.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updatetext(!0),math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updatetext(!0);var e=(0,f.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){t=t||{},t instanceof m.default?this._style=t:this._style=new m.default(t),this.localstyleid=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=string(""===t||null===t||void 0===t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(h.default);r.default=e},{"../const":44,"../math":68,"../settings":99,"../sprites/sprite":100,"../textures/texture":113,"../utils":122,"../utils/trimcanvas":126,"./textmetrics":107,"./textstyle":108}],107:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var i=function(){function t(e,r,i,o,s,a,u,h,l){n(this,t),this.text=e,this.style=r,this.width=i,this.height=o,this.lines=s,this.linewidths=a,this.lineheight=u,this.maxlinewidth=h,this.fontproperties=l}return t.measuretext=function(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t._canvas;n=n||r.wordwrap;var o=r.tofontstring(),s=t.measurefont(o),a=i.getcontext("2d");a.font=o;for(var u=n?t.wordwrap(e,r,i):e,h=u.split(/(?:\r\n|\r|\n)/),l=new array(h.length),c=0,d=0;d<h.length;d++){var f=a.measuretext(h[d]).width+(h[d].length-1)*r.letterspacing;l[d]=f,c=math.max(c,f)}var p=c+r.strokethickness;r.dropshadow&&(p+=r.dropshadowdistance);var v=r.lineheight||s.fontsize+r.strokethickness,y=math.max(v,s.fontsize+r.strokethickness)+(h.length-1)*v;return r.dropshadow&&(y+=r.dropshadowdistance),new t(e,r,p,y,h,l,v,c,s)},t.wordwrap=function(e,r){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas,i=n.getcontext("2d"),o="",s=e.split("\n"),a=r.wordwrapwidth,u={},h=0;h<s.length;h++){for(var l=a,c=s[h].split(" "),d=0;d<c.length;d++){var f=i.measuretext(c[d]).width;if(r.breakwords&&f>a)for(var p=c[d].split(""),v=0;v<p.length;v++){var y=p[v],g=u[y];void 0===g&&(g=i.measuretext(y).width,u[y]=g),g>l?(o+="\n"+y,l=a-g):(0===v&&(o+=" "),o+=y,l-=g)}else{var m=f+i.measuretext(" ").width;0===d||m>l?(d>0&&(o+="\n"),o+=c[d],l=a-f):(l-=m,o+=" "+c[d])}}h<s.length-1&&(o+="\n")}return o},t.measurefont=function(e){if(t._fonts[e])return t._fonts[e];var r={},n=t._canvas,i=t._context;i.font=e;var o=math.ceil(i.measuretext("|mq").width),s=math.ceil(i.measuretext("m").width),a=2*s;s=1.4*s|0,n.width=o,n.height=a,i.fillstyle="#f00",i.fillrect(0,0,o,a),i.font=e,i.textbaseline="alphabetic",i.fillstyle="#000",i.filltext("|mq",0,s);var u=i.getimagedata(0,0,o,a).data,h=u.length,l=4*o,c=0,d=0,f=!1;for(c=0;c<s;++c){for(var p=0;p<l;p+=4)if(255!==u[d+p]){f=!0;break}if(f)break;d+=l}for(r.ascent=s-c,d=h-l,f=!1,c=a;c>s;--c){for(var v=0;v<l;v+=4)if(255!==u[d+v]){f=!0;break}if(f)break;d-=l}return r.descent=c-s,r.fontsize=r.ascent+r.descent,t._fonts[e]=r,r},t}();r.default=i;var o=document.createelement("canvas");o.width=o.height=10,i._canvas=o,i._context=o.getcontext("2d"),i._fonts={}},{}],108:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function i(t){return"number"==typeof t?(0,h.hex2string)(t):("string"==typeof t&&0===t.indexof("0x")&&(t=t.replace("0x","#")),t)}function o(t){if(array.isarray(t)){for(var e=0;e<t.length;++e)t[e]=i(t[e]);return t}return i(t)}function s(t,e){if(!array.isarray(t)||!array.isarray(e))return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}r.__esmodule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("../const"),h=t("../utils"),l={align:"left",breakwords:!1,dropshadow:!1,dropshadowalpha:1,dropshadowangle:math.pi/6,dropshadowblur:0,dropshadowcolor:"#000000",dropshadowdistance:5,fill:"black",fillgradienttype:u.text_gradient.linear_vertical,fillgradientstops:[],fontfamily:"arial",fontsize:26,fontstyle:"normal",fontvariant:"normal",fontweight:"normal",letterspacing:0,lineheight:0,linejoin:"miter",miterlimit:10,padding:0,stroke:"black",strokethickness:0,textbaseline:"alphabetic",trim:!1,wordwrap:!1,wordwrapwidth:100},c=function(){function t(e){n(this,t),this.styleid=0,object.assign(this,l,e)}return t.prototype.clone=function(){var e={};for(var r in l)e[r]=this[r];return new t(e)},t.prototype.reset=function(){object.assign(this,l)},t.prototype.tofontstring=function(){var t="number"==typeof this.fontsize?this.fontsize+"px":this.fontsize,e=this.fontfamily;array.isarray(this.fontfamily)||(e=this.fontfamily.split(","));for(var r=e.length-1;r>=0;r--){var n=e[r].trim();/([\"\'])[^\'\"]+\1/.test(n)||(n='"'+n+'"'),e[r]=n}return this.fontstyle+" "+this.fontvariant+" "+this.fontweight+" "+t+" "+e.join(",")},a(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleid++)}},{key:"breakwords",get:function(){return this._breakwords},set:function(t){this._breakwords!==t&&(this._breakwords=t,this.styleid++)}},{key:"dropshadow",get:function(){return this._dropshadow},set:function(t){this._dropshadow!==t&&(this._dropshadow=t,this.styleid++)}},{key:"dropshadowalpha",get:function(){return this._dropshadowalpha},set:function(t){this._dropshadowalpha!==t&&(this._dropshadowalpha=t,this.styleid++)}},{key:"dropshadowangle",get:function(){return this._dropshadowangle},set:function(t){this._dropshadowangle!==t&&(this._dropshadowangle=t,this.styleid++)}},{key:"dropshadowblur",get:function(){return this._dropshadowblur},set:function(t){this._dropshadowblur!==t&&(this._dropshadowblur=t,this.styleid++)}},{key:"dropshadowcolor",get:function(){return this._dropshadowcolor},set:function(t){var e=o(t);this._dropshadowcolor!==e&&(this._dropshadowcolor=e,this.styleid++)}},{key:"dropshadowdistance",get:function(){return this._dropshadowdistance},set:function(t){this._dropshadowdistance!==t&&(this._dropshadowdistance=t,this.styleid++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=o(t);this._fill!==e&&(this._fill=e,this.styleid++)}},{key:"fillgradienttype",get:function(){return this._fillgradienttype},set:function(t){this._fillgradienttype!==t&&(this._fillgradienttype=t,this.styleid++)}},{key:"fillgradientstops",get:function(){return this._fillgradientstops},set:function(t){s(this._fillgradientstops,t)||(this._fillgradientstops=t,this.styleid++)}},{key:"fontfamily",get:function(){return this._fontfamily},set:function(t){this.fontfamily!==t&&(this._fontfamily=t,this.styleid++)}},{key:"fontsize",get:function(){return this._fontsize},set:function(t){this._fontsize!==t&&(this._fontsize=t,this.styleid++)}},{key:"fontstyle",get:function(){return this._fontstyle},set:function(t){this._fontstyle!==t&&(this._fontstyle=t,this.styleid++)}},{key:"fontvariant",get:function(){return this._fontvariant},set:function(t){this._fontvariant!==t&&(this._fontvariant=t,this.styleid++)}},{key:"fontweight",get:function(){return this._fontweight},set:function(t){this._fontweight!==t&&(this._fontweight=t,this.styleid++)}},{key:"letterspacing",get:function(){return this._letterspacing},set:function(t){this._letterspacing!==t&&(this._letterspacing=t,this.styleid++)}},{key:"lineheight",get:function(){return this._lineheight},set:function(t){this._lineheight!==t&&(this._lineheight=t,this.styleid++)}},{key:"linejoin",get:function(){return this._linejoin},set:function(t){this._linejoin!==t&&(this._linejoin=t,this.styleid++)}},{key:"miterlimit",get:function(){return this._miterlimit},set:function(t){this._miterlimit!==t&&(this._miterlimit=t,this.styleid++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleid++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=o(t);this._stroke!==e&&(this._stroke=e,this.styleid++)}},{key:"strokethickness",get:function(){return this._strokethickness},set:function(t){this._strokethickness!==t&&(this._strokethickness=t,this.styleid++)}},{key:"textbaseline",get:function(){return this._textbaseline},set:function(t){this._textbaseline!==t&&(this._textbaseline=t,this.styleid++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleid++)}},{key:"wordwrap",get:function(){return this._wordwrap},set:function(t){this._wordwrap!==t&&(this._wordwrap=t,this.styleid++)}},{key:"wordwrapwidth",get:function(){return this._wordwrapwidth},set:function(t){this._wordwrapwidth!==t&&(this._wordwrapwidth=t,this.styleid++)}}]),t}();r.default=c},{"../const":44,"../utils":122}],109:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=t("./basetexture"),u=n(a),h=t("../settings"),l=n(h),c=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments[2],a=arguments[3];i(this,e);var u=o(this,t.call(this,null,s));return u.resolution=a||l.default.resolution,u.width=r,u.height=n,u.realwidth=u.width*u.resolution,u.realheight=u.height*u.resolution,u.scalemode=void 0!==s?s:l.default.scale_mode,u.hasloaded=!0,u._glrendertargets={},u._canvasrendertarget=null,u.valid=!1,u}return s(e,t),e.prototype.resize=function(t,e){t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realwidth=this.width*this.resolution,this.realheight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(u.default);r.default=c},{"../settings":99,"./basetexture":110}],110:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a="function"==typeof symbol&&"symbol"==typeof symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof symbol&&t.constructor===symbol&&t!==symbol.prototype?"symbol":typeof t},u=t("../utils"),h=t("../settings"),l=n(h),c=t("eventemitter3"),d=n(c),f=t("../utils/determinecrossorigin"),p=n(f),v=t("bit-twiddle"),y=n(v),g=function(t){function e(r,n,s){i(this,e);var a=o(this,t.call(this));return a.uid=(0,u.uid)(),a.touched=0,a.resolution=s||l.default.resolution,a.width=100,a.height=100,a.realwidth=100,a.realheight=100,a.scalemode=void 0!==n?n:l.default.scale_mode,a.hasloaded=!1,a.isloading=!1,a.source=null,a.origsource=null,a.imagetype=null,a.sourcescale=1,a.premultipliedalpha=!0,a.imageurl=null,a.ispoweroftwo=!1,a.mipmap=l.default.mipmap_textures,a.wrapmode=l.default.wrap_mode,a._gltextures={},a._enabled=0,a._virtalboundid=-1,a._destroyed=!1,a.texturecacheids=[],r&&a.loadsource(r),a}return s(e,t),e.prototype.update=function(){"svg"!==this.imagetype&&(this.realwidth=this.source.naturalwidth||this.source.videowidth||this.source.width,this.realheight=this.source.naturalheight||this.source.videoheight||this.source.height,this._updatedimensions()),this.emit("update",this)},e.prototype._updatedimensions=function(){this.width=this.realwidth/this.resolution,this.height=this.realheight/this.resolution,this.ispoweroftwo=y.default.ispow2(this.realwidth)&&y.default.ispow2(this.realheight)},e.prototype.loadsource=function(t){var e=this,r=this.isloading;this.hasloaded=!1,this.isloading=!1,r&&this.source&&(this.source.onload=null,this.source.onerror=null);var n=!this.source;if(this.source=t,(t.src&&t.complete||t.getcontext)&&t.width&&t.height)this._updateimagetype(),"svg"===this.imagetype?this._loadsvgsource():this._sourceloaded(),n&&this.emit("loaded",this);else if(!t.getcontext){var i=function(){e.isloading=!0;var n=e;if(t.onload=function(){if(n._updateimagetype(),t.onload=null,t.onerror=null,n.isloading)return n.isloading=!1,n._sourceloaded(),"svg"===n.imagetype?void n._loadsvgsource():void n.emit("loaded",n)},t.onerror=function(){t.onload=null,t.onerror=null,n.isloading&&(n.isloading=!1,n.emit("error",n))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===n.imagetype)return n._loadsvgsource(),{v:void 0};e.isloading=!1,t.width&&t.height?(e._sourceloaded(),r&&e.emit("loaded",e)):r&&e.emit("error",e)}}();if("object"===("undefined"==typeof i?"undefined":a(i)))return i.v}},e.prototype._updateimagetype=function(){if(this.imageurl){var t=(0,u.decomposedatauri)(this.imageurl),e=void 0;if(t&&"image"===t.mediatype){var r=t.subtype.split("+")[0];if(e=(0,u.geturlfileextension)("."+r),!e)throw new error("invalid image type in data uri.")}else e=(0,u.geturlfileextension)(this.imageurl),e||(e="png");this.imagetype=e}},e.prototype._loadsvgsource=function(){if("svg"===this.imagetype){var t=(0,u.decomposedatauri)(this.imageurl);t?this._loadsvgsourceusingdatauri(t):this._loadsvgsourceusingxhr()}},e.prototype._loadsvgsourceusingdatauri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new error("your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadsvgsourceusingstring(e)},e.prototype._loadsvgsourceusingxhr=function(){var t=this,e=new xmlhttprequest;e.onload=function(){if(e.readystate!==e.done||200!==e.status)throw new error("failed to load svg using xhr.");t._loadsvgsourceusingstring(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("get",this.imageurl,!0),e.send()},e.prototype._loadsvgsourceusingstring=function(t){var r=(0,u.getsvgsize)(t),n=r.width,i=r.height;if(!n||!i)throw new error("the svg image must have width and height defined (in pixels), canvas api needs them.");this.realwidth=math.round(n*this.sourcescale),this.realheight=math.round(i*this.sourcescale),this._updatedimensions();var o=document.createelement("canvas");o.width=this.realwidth,o.height=this.realheight,o._pixiid="canvas_"+(0,u.uid)(),o.getcontext("2d").drawimage(this.source,0,0,n,i,0,0,this.realwidth,this.realheight),this.origsource=this.source,this.source=o,e.addtocache(this,o._pixiid),this.isloading=!1,this._sourceloaded(),this.emit("loaded",this)},e.prototype._sourceloaded=function(){this.hasloaded=!0,this.update()},e.prototype.destroy=function(){this.imageurl&&(delete u.texturecache[this.imageurl],this.imageurl=null,navigator.iscocoonjs||(this.source.src="")),this.source=null,this.dispose(),e.removefromcache(this),this.texturecacheids=null,this._destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.updatesourceimage=function(t){this.source.src=t,this.loadsource(this.source)},e.fromimage=function(t,r,n,i){var o=u.basetexturecache[t];if(!o){var s=new image;void 0===r&&0!==t.indexof("data:")&&(s.crossorigin=(0,p.default)(t)),o=new e(s,n),o.imageurl=t,i&&(o.sourcescale=i),o.resolution=(0,u.getresolutionofurl)(t),s.src=t,e.addtocache(o,t)}return o},e.fromcanvas=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";t._pixiid||(t._pixiid=n+"_"+(0,u.uid)());var i=u.basetexturecache[t._pixiid];return i||(i=new e(t,r),e.addtocache(i,t._pixiid)),i},e.from=function(t,r,n){if("string"==typeof t)return e.fromimage(t,void 0,r,n);if(t instanceof htmlimageelement){var i=t.src,o=u.basetexturecache[i];return o||(o=new e(t,r),o.imageurl=i,n&&(o.sourcescale=n),o.resolution=(0,u.getresolutionofurl)(i),e.addtocache(o,i)),o}return t instanceof htmlcanvaselement?e.fromcanvas(t,r):t},e.addtocache=function(t,e){e&&(t.texturecacheids.indexof(e)===-1&&t.texturecacheids.push(e),u.basetexturecache[e]=t)},e.removefromcache=function(t){if("string"==typeof t){var e=u.basetexturecache[t];if(e){var r=e.texturecacheids.indexof(t);return r>-1&&e.texturecacheids.splice(r,1),delete u.basetexturecache[t],e}}else if(t&&t.texturecacheids){for(var n=0;n<t.texturecacheids.length;++n)delete u.basetexturecache[t.texturecacheids[n]];return t.texturecacheids.length=0,t}return null},e}(d.default);r.default=g},{"../settings":99,"../utils":122,"../utils/determinecrossorigin":121,"bit-twiddle":1,eventemitter3:3}],111:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=t("./baserendertexture"),u=n(a),h=t("./texture"),l=n(h),c=function(t){function e(r,n){i(this,e);var s=null;if(!(r instanceof u.default)){var a=arguments[1],h=arguments[2],l=arguments[3],c=arguments[4];console.warn("please use rendertexture.create("+a+", "+h+") instead of the ctor directly."),s=arguments[0],n=null,r=new u.default(a,h,l,c)}var d=o(this,t.call(this,r,n));return d.legacyrenderer=s,d.valid=!0,d._updateuvs(),d}return s(e,t),e.prototype.resize=function(t,e,r){this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r||this.basetexture.resize(t,e),this._updateuvs()},e.create=function(t,r,n,i){return new e(new u.default(t,r,n,i))},e}(l.default);r.default=c},{"./baserendertexture":109,"./texture":113}],112:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("../"),s=t("../utils"),a=function(){function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(this,t),this.basetexture=e,this.textures={},this.data=r,this.resolution=this._updateresolution(i||this.basetexture.imageurl),this._frames=this.data.frames,this._framekeys=object.keys(this._frames),this._batchindex=0,this._callback=null}return i(t,null,[{key:"batch_size",get:function(){return 1e3}}]),t.prototype._updateresolution=function(t){var e=this.data.meta.scale,r=(0,s.getresolutionofurl)(t,null);return null===r&&(r=void 0!==e?parsefloat(e):1),1!==r&&(this.basetexture.resolution=r,this.basetexture.update()),r},t.prototype.parse=function(e){this._batchindex=0,this._callback=e,this._framekeys.length<=t.batch_size?(this._processframes(0),this._parsecomplete()):this._nextbatch()},t.prototype._processframes=function(e){for(var r=e,n=t.batch_size;r-e<n&&r<this._framekeys.length;){var i=this._framekeys[r],s=this._frames[i].frame;if(s){var a=null,u=null,h=new o.rectangle(0,0,this._frames[i].sourcesize.w/this.resolution,this._frames[i].sourcesize.h/this.resolution);a=this._frames[i].rotated?new o.rectangle(s.x/this.resolution,s.y/this.resolution,s.h/this.resolution,s.w/this.resolution):new o.rectangle(s.x/this.resolution,s.y/this.resolution,s.w/this.resolution,s.h/this.resolution),this._frames[i].trimmed&&(u=new o.rectangle(this._frames[i].spritesourcesize.x/this.resolution,this._frames[i].spritesourcesize.y/this.resolution,s.w/this.resolution,s.h/this.resolution)),this.textures[i]=new o.texture(this.basetexture,a,h,u,this._frames[i].rotated?2:0),o.texture.addtocache(this.textures[i],i)}r++}},t.prototype._parsecomplete=function(){var t=this._callback;this._callback=null,this._batchindex=0,t.call(this,this.textures)},t.prototype._nextbatch=function(){var e=this;this._processframes(this._batchindex*t.batch_size),this._batchindex++,settimeout(function(){e._batchindex*t.batch_size<e._framekeys.length?e._nextbatch():e._parsecomplete()},0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._framekeys=null,this.data=null,this.textures=null,t&&this.basetexture.destroy(),this.basetexture=null},t}();r.default=a},{"../":63,"../utils":122}],113:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}function a(){var t=document.createelement("canvas");t.width=10,t.height=10;var e=t.getcontext("2d");return e.fillstyle="white",e.fillrect(0,0,10,10),new t(new c.default(t))}function u(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}r.__esmodule=!0;var h=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("./basetexture"),c=n(l),d=t("./videobasetexture"),f=n(d),p=t("./textureuvs"),v=n(p),y=t("eventemitter3"),g=n(y),m=t("../math"),_=t("../utils"),b=t("../settings"),x=n(b),t=function(t){function e(r,n,s,a,u){i(this,e);var h=o(this,t.call(this));if(h.noframe=!1,n||(h.noframe=!0,n=new m.rectangle(0,0,1,1)),r instanceof e&&(r=r.basetexture),h.basetexture=r,h._frame=n,h.trim=a,h.valid=!1,h.requiresupdate=!1,h._uvs=null,h.orig=s||n,h._rotate=number(u||0),u===!0)h._rotate=2;else if(h._rotate%2!==0)throw new error("attempt to use diamond-shaped uvs. if you are sure, set rotation manually");return r.hasloaded?(h.noframe&&(n=new m.rectangle(0,0,r.width,r.height),r.on("update",h.onbasetextureupdated,h)),h.frame=n):r.once("loaded",h.onbasetextureloaded,h),h._updateid=0,h.transform=null,h.texturecacheids=[],h}return s(e,t),e.prototype.update=function(){this.basetexture.update()},e.prototype.onbasetextureloaded=function(t){this._updateid++,this.noframe?this.frame=new m.rectangle(0,0,t.width,t.height):this.frame=this._frame,this.basetexture.on("update",this.onbasetextureupdated,this),this.emit("update",this)},e.prototype.onbasetextureupdated=function(t){this._updateid++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},e.prototype.destroy=function(t){this.basetexture&&(t&&(_.texturecache[this.basetexture.imageurl]&&e.removefromcache(this.basetexture.imageurl),this.basetexture.destroy()),this.basetexture.off("update",this.onbasetextureupdated,this),this.basetexture.off("loaded",this.onbasetextureloaded,this),this.basetexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removefromcache(this),this.texturecacheids=null},e.prototype.clone=function(){return new e(this.basetexture,this.frame,this.orig,this.trim,this.rotate)},e.prototype._updateuvs=function(){this._uvs||(this._uvs=new v.default),this._uvs.set(this._frame,this.basetexture,this.rotate),this._updateid++},e.fromimage=function(t,r,n,i){var o=_.texturecache[t];return o||(o=new e(c.default.fromimage(t,r,n,i)),e.addtocache(o,t)),o},e.fromframe=function(t){var e=_.texturecache[t];if(!e)throw new error('the frameid "'+t+'" does not exist in the texture cache');return e},e.fromcanvas=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new e(c.default.fromcanvas(t,r,n))},e.fromvideo=function(t,r){return"string"==typeof t?e.fromvideourl(t,r):new e(f.default.fromvideo(t,r))},e.fromvideourl=function(t,r){return new e(f.default.fromurl(t,r))},e.from=function(t){if("string"==typeof t){var r=_.texturecache[t];if(!r){var n=null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/);return n?e.fromvideourl(t):e.fromimage(t)}return r}return t instanceof htmlimageelement?new e(c.default.from(t)):t instanceof htmlcanvaselement?e.fromcanvas(t,x.default.scale_mode,"htmlcanvaselement"):t instanceof htmlvideoelement?e.fromvideo(t):t instanceof c.default?new e(t):t},e.fromloader=function(t,r,n){var i=new c.default(t,(void 0),(0,_.getresolutionofurl)(r)),o=new e(i);return i.imageurl=r,n||(n=r),c.default.addtocache(o.basetexture,n),e.addtocache(o,n),n!==r&&(c.default.addtocache(o.basetexture,r),e.addtocache(o,r)),o},e.addtocache=function(t,e){e&&(t.texturecacheids.indexof(e)===-1&&t.texturecacheids.push(e),_.texturecache[e]=t)},e.removefromcache=function(t){if("string"==typeof t){var e=_.texturecache[t];if(e){var r=e.texturecacheids.indexof(t);return r>-1&&e.texturecacheids.splice(r,1),delete _.texturecache[t],e}}else if(t&&t.texturecacheids){for(var n=0;n<t.texturecacheids.length;++n)delete _.texturecache[t.texturecacheids[n]];return t.texturecacheids.length=0,t}return null},h(e,[{key:"frame",get:function(){return this._frame},set:function(t){if(this._frame=t,this.noframe=!1,t.x+t.width>this.basetexture.width||t.y+t.height>this.basetexture.height)throw new error("texture error: frame does not fit inside the base texture dimensions: "+("x: "+t.x+" + "+t.width+" > "+this.basetexture.width+" ")+("y: "+t.y+" + "+t.height+" > "+this.basetexture.height));this.valid=t&&t.width&&t.height&&this.basetexture.hasloaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateuvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateuvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),e}(g.default);r.default=t,t.empty=new t(new c.default),u(t.empty),u(t.empty.basetexture),t.white=a(),u(t.white),u(t.white.basetexture)},{"../math":68,"../settings":99,"../utils":122,"./basetexture":110,"./textureuvs":114,"./videobasetexture":115,eventemitter3:3}],114:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=t("../math/groupd8"),s=n(o),a=function(){function t(){i(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsuint32=new uint32array(4)}return t.prototype.set=function(t,e,r){var n=e.width,i=e.height;if(r){var o=t.width/2/n,a=t.height/2/i,u=t.x/n+o,h=t.y/i+a;r=s.default.add(r,s.default.nw),this.x0=u+o*s.default.ux(r),this.y0=h+a*s.default.uy(r),r=s.default.add(r,2),this.x1=u+o*s.default.ux(r),this.y1=h+a*s.default.uy(r),r=s.default.add(r,2),this.x2=u+o*s.default.ux(r),this.y2=h+a*s.default.uy(r),r=s.default.add(r,2),this.x3=u+o*s.default.ux(r),this.y3=h+a*s.default.uy(r)}else this.x0=t.x/n,this.y0=t.y/i,this.x1=(t.x+t.width)/n,this.y1=t.y/i,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/i,this.x3=t.x/n,this.y3=(t.y+t.height)/i;this.uvsuint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsuint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsuint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsuint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},t}();r.default=a},{"../math/groupd8":64}],115:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");
return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}function a(t,e){e||(e="video/"+t.substr(t.lastindexof(".")+1));var r=document.createelement("source");return r.src=t,r.type=e,r}r.__esmodule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("./basetexture"),l=n(h),c=t("../utils"),d=t("../ticker"),f=t("../const"),p=function(t){function e(r,n){if(i(this,e),!r)throw new error("no video source element specified.");(r.readystate===r.have_enough_data||r.readystate===r.have_future_data)&&r.width&&r.height&&(r.complete=!0);var s=o(this,t.call(this,r,n));return s.width=r.videowidth,s.height=r.videoheight,s._autoupdate=!0,s._isautoupdating=!1,s.autoplay=!0,s.update=s.update.bind(s),s._oncanplay=s._oncanplay.bind(s),r.addeventlistener("play",s._onplaystart.bind(s)),r.addeventlistener("pause",s._onplaystop.bind(s)),s.hasloaded=!1,s.__loaded=!1,s._issourceready()?s._oncanplay():(r.addeventlistener("canplay",s._oncanplay),r.addeventlistener("canplaythrough",s._oncanplay)),s}return s(e,t),e.prototype._issourceplaying=function(){var t=this.source;return t.currenttime>0&&t.paused===!1&&t.ended===!1&&t.readystate>2},e.prototype._issourceready=function(){return 3===this.source.readystate||4===this.source.readystate},e.prototype._onplaystart=function(){this.hasloaded||this._oncanplay(),!this._isautoupdating&&this.autoupdate&&(d.shared.add(this.update,this,f.update_priority.high),this._isautoupdating=!0)},e.prototype._onplaystop=function(){this._isautoupdating&&(d.shared.remove(this.update,this),this._isautoupdating=!1)},e.prototype._oncanplay=function(){this.hasloaded=!0,this.source&&(this.source.removeeventlistener("canplay",this._oncanplay),this.source.removeeventlistener("canplaythrough",this._oncanplay),this.width=this.source.videowidth,this.height=this.source.videoheight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._issourceplaying()?this._onplaystart():this.autoplay&&this.source.play())},e.prototype.destroy=function(){this._isautoupdating&&d.shared.remove(this.update,this),this.source&&this.source._pixiid&&(l.default.removefromcache(this.source._pixiid),delete this.source._pixiid),t.prototype.destroy.call(this)},e.fromvideo=function(t,r){t._pixiid||(t._pixiid="video_"+(0,c.uid)());var n=c.basetexturecache[t._pixiid];return n||(n=new e(t,r),l.default.addtocache(n,t._pixiid)),n},e.fromurl=function(t,r){var n=document.createelement("video");if(n.setattribute("webkit-playsinline",""),n.setattribute("playsinline",""),array.isarray(t))for(var i=0;i<t.length;++i)n.appendchild(a(t[i].src||t[i],t[i].mime));else n.appendchild(a(t.src||t,t.mime));return n.load(),e.fromvideo(n,r)},u(e,[{key:"autoupdate",get:function(){return this._autoupdate},set:function(t){t!==this._autoupdate&&(this._autoupdate=t,!this._autoupdate&&this._isautoupdating?(d.shared.remove(this.update,this),this._isautoupdating=!1):this._autoupdate&&!this._isautoupdating&&(d.shared.add(this.update,this,f.update_priority.high),this._isautoupdating=!0))}}]),e}(l.default);r.default=p,p.fromurls=p.fromurl},{"../const":44,"../ticker":118,"../utils":122,"./basetexture":110}],116:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=t("../settings"),a=n(s),u=t("../const"),h=t("./tickerlistener"),l=n(h),c=function(){function t(){var e=this;i(this,t),this._head=new l.default(null,null,1/0),this._requestid=null,this._maxelapsedms=100,this.autostart=!1,this.deltatime=1,this.elapsedms=1/a.default.target_fpms,this.lasttime=0,this.speed=1,this.started=!1,this._tick=function(t){e._requestid=null,e.started&&(e.update(t),e.started&&null===e._requestid&&e._head.next&&(e._requestid=requestanimationframe(e._tick)))}}return t.prototype._requestifneeded=function(){null===this._requestid&&this._head.next&&(this.lasttime=performance.now(),this._requestid=requestanimationframe(this._tick))},t.prototype._cancelifneeded=function(){null!==this._requestid&&(cancelanimationframe(this._requestid),this._requestid=null)},t.prototype._startifpossible=function(){this.started?this._requestifneeded():this.autostart&&this.start()},t.prototype.add=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.update_priority.normal;return this._addlistener(new l.default(t,e,r))},t.prototype.addonce=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.update_priority.normal;return this._addlistener(new l.default(t,e,r,(!0)))},t.prototype._addlistener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}else t.connect(r);return this._startifpossible(),this},t.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelifneeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestifneeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelifneeded())},t.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},t.prototype.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;if(t>this.lasttime){e=this.elapsedms=t-this.lasttime,e>this._maxelapsedms&&(e=this._maxelapsedms),this.deltatime=e*a.default.target_fpms*this.speed;for(var r=this._head,n=r.next;n;)n=n.emit(this.deltatime);r.next||this._cancelifneeded()}else this.deltatime=this.elapsedms=0;this.lasttime=t},o(t,[{key:"fps",get:function(){return 1e3/this.elapsedms}},{key:"minfps",get:function(){return 1e3/this._maxelapsedms},set:function(t){var e=math.min(math.max(0,t)/1e3,a.default.target_fpms);this._maxelapsedms=1/e}}]),t}();r.default=c},{"../const":44,"../settings":99,"./tickerlistener":117}],117:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var i=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n(this,t),this.fn=e,this.context=r,this.priority=i,this.once=o,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.previous;return this.next=t?null:e,this.previous=null,e},t}();r.default=i},{}],118:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}r.__esmodule=!0,r.ticker=r.shared=void 0;var i=t("./ticker"),o=n(i),s=new o.default;s.autostart=!0,s.destroy=function(){},r.shared=s,r.ticker=o.default},{"./ticker":116}],119:[function(t,e,r){"use strict";function n(){var t=!!navigator.platform&&/ipad|iphone|ipod/.test(navigator.platform);return!t}r.__esmodule=!0,r.default=n},{}],120:[function(t,e,r){"use strict";function n(t){for(var e=6*t,r=new uint16array(e),n=0,i=0;n<e;n+=6,i+=4)r[n+0]=i+0,r[n+1]=i+1,r[n+2]=i+2,r[n+3]=i+0,r[n+4]=i+2,r[n+5]=i+3;return r}r.__esmodule=!0,r.default=n},{}],121:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexof("data:"))return"";e=e||window.location,a||(a=document.createelement("a")),a.href=t,t=s.default.parse(a.href);var r=!t.port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&r&&t.protocol===e.protocol?"":"anonymous"}r.__esmodule=!0,r.default=i;var o=t("url"),s=n(o),a=void 0},{url:28}],122:[function(t,e,r){"use strict";function n(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esmodule?t:{default:t}}function o(){return++a}function s(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function a(t){return t=t.tostring(16),t="000000".substr(0,6-t.length)+t,"#"+t}function u(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}function h(t,e){var r=t.default.retina_prefix.exec(t);return r?parsefloat(r[1]):void 0!==e?e:1}function l(t){var e=b.data_uri.exec(t);if(e)return{mediatype:e[1]?e[1].tolowercase():void 0,subtype:e[2]?e[2].tolowercase():void 0,encoding:e[3]?e[3].tolowercase():void 0,data:e[4]}}function c(t){var e=b.url_file_extension.exec(t);if(e)return e[1].tolowercase()}function d(t){var e=b.svg_size.exec(t),r={};return e&&(r[e[1]]=math.round(parsefloat(e[3])),r[e[5]]=math.round(parsefloat(e[7]))),r}function f(){i=!0}function p(t){if(!i){if(navigator.useragent.tolowercase().indexof("chrome")>-1){var e=["\n %c %c %c pixi.js "+b.version+" -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("pixi.js "+b.version+" - "+t+" - http://www.pixijs.com/");i=!0}}function v(){var t={stencil:!0,failifmajorperformancecaveat:!0};try{if(!window.webglrenderingcontext)return!1;var e=document.createelement("canvas"),r=e.getcontext("webgl",t)||e.getcontext("experimental-webgl",t),n=!(!r||!r.getcontextattributes().stencil);if(r){var i=r.getextension("webgl_lose_context");i&&i.losecontext()}return r=null,n}catch(t){return!1}}function y(t){return 0===t?0:t<0?-1:1}function g(t,e,r){var n=t.length;if(!(e>=n||0===r)){r=e+r>n?n-e:r;for(var i=n-r,o=e;o<i;++o)t[o]=t[o+r];t.length=i}}function m(){var t=void 0;for(t in d)d[t].destroy();for(t in l)l[t].destroy()}function _(){var t=void 0;for(t in d)delete d[t];for(t in l)delete l[t]}r.__esmodule=!0,r.basetexturecache=r.texturecache=r.mixins=r.plugintarget=r.eventemitter=r.ismobile=void 0,r.uid=o,r.hex2rgb=s,r.hex2string=a,r.rgb2hex=u,r.getresolutionofurl=h,r.decomposedatauri=l,r.geturlfileextension=c,r.getsvgsize=d,r.skiphello=f,r.sayhello=p,r.iswebglsupported=v,r.sign=y,r.removeitems=g,r.destroytexturecache=m,r.cleartexturecache=_;var b=t("../const"),x=t("../settings"),t=i(x),w=t("eventemitter3"),e=i(w),s=t("./plugintarget"),o=i(s),p=t("./mixin"),m=n(p),c=t("ismobilejs"),r=n(c),a=0,i=!1;r.ismobile=r,r.eventemitter=e.default,r.plugintarget=o.default,r.mixins=m;var d=r.texturecache=object.create(null),l=r.basetexturecache=object.create(null)},{"../const":44,"../settings":99,"./mixin":124,"./plugintarget":125,eventemitter3:3,ismobilejs:4}],123:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t){return s.default.tablet||s.default.phone?4:t}r.__esmodule=!0,r.default=i;var o=t("ismobilejs"),s=n(o)},{ismobilejs:4}],124:[function(t,e,r){"use strict";function n(t,e){if(t&&e)for(var r=object.keys(e),n=0;n<r.length;++n){var i=r[n];object.defineproperty(t,i,object.getownpropertydescriptor(e,i))}}function i(t,e){s.push(t,e)}function o(){for(var t=0;t<s.length;t+=2)n(s[t],s[t+1]);s.length=0}r.__esmodule=!0,r.mixin=n,r.delaymixin=i,r.performmixins=o;var s=[]},{}],125:[function(t,e,r){"use strict";function n(t){t.__plugins={},t.registerplugin=function(e,r){t.__plugins[e]=r},t.prototype.initplugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyplugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}r.__esmodule=!0,r.default={mixin:function(t){n(t)}}},{}],126:[function(t,e,r){"use strict";function n(t){var e=t.width,r=t.height,n=t.getcontext("2d"),i=n.getimagedata(0,0,e,r),o=i.data,s=o.length,a={top:null,left:null,right:null,bottom:null},u=void 0,h=void 0,l=void 0;for(u=0;u<s;u+=4)0!==o[u+3]&&(h=u/4%e,l=~~(u/4/e),null===a.top&&(a.top=l),null===a.left?a.left=h:h<a.left&&(a.left=h),null===a.right?a.right=h+1:a.right<h&&(a.right=h+1),null===a.bottom?a.bottom=l:a.bottom<l&&(a.bottom=l));e=a.right-a.left,r=a.bottom-a.top+1;var c=n.getimagedata(a.left,a.top,e,r);return{height:r,width:e,data:c}}r.__esmodule=!0,r.default=n},{}],127:[function(t,e,r){"use strict";function n(t){}function i(t){var e=t.mesh,r=t.particles,i=t.extras,o=t.filters,s=t.prepare,a=t.loaders,u=t.interaction;object.defineproperties(t,{spritebatch:{get:function(){throw new referenceerror("spritebatch does not exist any more, please use the new particlecontainer instead.")}},assetloader:{get:function(){throw new referenceerror("the loader system was overhauled in pixi v3, please see the new pixi.loaders.loader class.")}},stage:{get:function(){return n("you do not need to use a pixi stage any more, you can simply render any container."),t.container}},displayobjectcontainer:{get:function(){return n("displayobjectcontainer has been shortened to container, please use container from now on."),t.container}},strip:{get:function(){return n("the strip class has been renamed to mesh and moved to mesh.mesh, please use mesh.mesh from now on."),e.mesh}},rope:{get:function(){return n("the rope class has been moved to mesh.rope, please use mesh.rope from now on."),e.rope}},particlecontainer:{get:function(){return n("the particlecontainer class has been moved to particles.particlecontainer, please use particles.particlecontainer from now on."),r.particlecontainer}},movieclip:{get:function(){return n("the movieclip class has been moved to extras.animatedsprite, please use extras.animatedsprite."),i.animatedsprite}},tilingsprite:{get:function(){return n("the tilingsprite class has been moved to extras.tilingsprite, please use extras.tilingsprite from now on."),i.tilingsprite}},bitmaptext:{get:function(){return n("the bitmaptext class has been moved to extras.bitmaptext, please use extras.bitmaptext from now on."),i.bitmaptext}},blendmodes:{get:function(){return n("the blendmodes has been moved to blend_modes, please use blend_modes from now on."),t.blend_modes}},scalemodes:{get:function(){return n("the scalemodes has been moved to scale_modes, please use scale_modes from now on."),t.scale_modes}},basetexturecache:{get:function(){return n("the basetexturecache class has been moved to utils.basetexturecache, please use utils.basetexturecache from now on."),t.utils.basetexturecache}},texturecache:{get:function(){return n("the texturecache class has been moved to utils.texturecache, please use utils.texturecache from now on."),t.utils.texturecache}},math:{get:function(){return n("the math namespace is deprecated, please access members already accessible on pixi."),t}},abstractfilter:{get:function(){return n("astractfilter has been renamed to filter, please use pixi.filter"),t.filter}},transformmanual:{get:function(){return n("transformmanual has been renamed to transformbase, please update your pixi-spine"),t.transformbase}},target_fpms:{get:function(){return n("pixi.target_fpms has been deprecated, please use pixi.settings.target_fpms"),t.settings.target_fpms},set:function(e){n("pixi.target_fpms has been deprecated, please use pixi.settings.target_fpms"),t.settings.target_fpms=e}},filter_resolution:{get:function(){return n("pixi.filter_resolution has been deprecated, please use pixi.settings.filter_resolution"),t.settings.filter_resolution},set:function(e){n("pixi.filter_resolution has been deprecated, please use pixi.settings.filter_resolution"),t.settings.filter_resolution=e}},resolution:{get:function(){return n("pixi.resolution has been deprecated, please use pixi.settings.resolution"),t.settings.resolution},set:function(e){n("pixi.resolution has been deprecated, please use pixi.settings.resolution"),t.settings.resolution=e}},mipmap_textures:{get:function(){return n("pixi.mipmap_textures has been deprecated, please use pixi.settings.mipmap_textures"),t.settings.mipmap_textures},set:function(e){n("pixi.mipmap_textures has been deprecated, please use pixi.settings.mipmap_textures"),t.settings.mipmap_textures=e}},sprite_batch_size:{get:function(){return n("pixi.sprite_batch_size has been deprecated, please use pixi.settings.sprite_batch_size"),t.settings.sprite_batch_size},set:function(e){n("pixi.sprite_batch_size has been deprecated, please use pixi.settings.sprite_batch_size"),t.settings.sprite_batch_size=e}},sprite_max_textures:{get:function(){return n("pixi.sprite_max_textures has been deprecated, please use pixi.settings.sprite_max_textures"),t.settings.sprite_max_textures},set:function(e){n("pixi.sprite_max_textures has been deprecated, please use pixi.settings.sprite_max_textures"),t.settings.sprite_max_textures=e}},retina_prefix:{get:function(){return n("pixi.retina_prefix has been deprecated, please use pixi.settings.retina_prefix"),t.settings.retina_prefix},set:function(e){n("pixi.retina_prefix has been deprecated, please use pixi.settings.retina_prefix"),t.settings.retina_prefix=e}},default_render_options:{get:function(){return n("pixi.default_render_options has been deprecated, please use pixi.settings.default_render_options"),t.settings.render_options}}});for(var h=[{parent:"transform_mode",target:"transform_mode"},{parent:"gc_modes",target:"gc_mode"},{parent:"wrap_modes",target:"wrap_mode"},{parent:"scale_modes",target:"scale_mode"},{parent:"precision",target:"precision_fragment"}],l=function(e){var r=h[e];object.defineproperty(t[r.parent],"default",{get:function(){return n("pixi."+r.parent+".default has been deprecated, please use pixi.settings."+r.target),t.settings[r.target]},set:function(e){n("pixi."+r.parent+".default has been deprecated, please use pixi.settings."+r.target),t.settings[r.target]=e}})},c=0;c<h.length;c++)l(c);object.defineproperties(t.settings,{precision:{get:function(){return n("pixi.settings.precision has been deprecated, please use pixi.settings.precision_fragment"),t.settings.precision_fragment},set:function(e){n("pixi.settings.precision has been deprecated, please use pixi.settings.precision_fragment"),t.settings.precision_fragment=e}}}),object.defineproperties(i,{movieclip:{get:function(){return n("the movieclip class has been renamed to animatedsprite, please use animatedsprite from now on."),i.animatedsprite}}}),t.displayobject.prototype.generatetexture=function(t,e,r){return n("generatetexture has moved to the renderer, please use renderer.generatetexture(displayobject)"),t.generatetexture(this,e,r)},t.graphics.prototype.generatetexture=function(t,e){return n("graphics generate texture has moved to the renderer. or to render a graphics to a texture using canvas please use generatecanvastexture"),this.generatecanvastexture(t,e)},t.rendertexture.prototype.render=function(t,e,r,i){this.legacyrenderer.render(t,this,r,e,!i),n("rendertexture.render is now deprecated, please use renderer.render(displayobject, rendertexture)")},t.rendertexture.prototype.getimage=function(t){return n("rendertexture.getimage is now deprecated, please use renderer.extract.image(target)"),this.legacyrenderer.extract.image(t)},t.rendertexture.prototype.getbase64=function(t){return n("rendertexture.getbase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyrenderer.extract.base64(t)},t.rendertexture.prototype.getcanvas=function(t){return n("rendertexture.getcanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyrenderer.extract.canvas(t)},t.rendertexture.prototype.getpixels=function(t){return n("rendertexture.getpixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyrenderer.pixels(t)},t.sprite.prototype.settexture=function(t){this.texture=t,n("settexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},i.bitmaptext.prototype.settext=function(t){this.text=t,n("settext is now deprecated, please use the text property, e.g : mybitmaptext.text = 'my text';")},t.text.prototype.settext=function(t){this.text=t,n("settext is now deprecated, please use the text property, e.g : mytext.text = 'my text';")},t.text.calculatefontproperties=function(e){return n("text.calculatefontproperties is now deprecated, please use the textmetrics.measurefont"),t.textmetrics.measurefont(e)},object.defineproperties(t.text,{fontpropertiescache:{get:function(){return n("text.fontpropertiescache is deprecated"),t.textmetrics._fonts}},fontpropertiescanvas:{get:function(){return n("text.fontpropertiescanvas is deprecated"),t.textmetrics._canvas}},fontpropertiescontext:{get:function(){return n("text.fontpropertiescontext is deprecated"),t.textmetrics._context}}}),t.text.prototype.setstyle=function(t){this.style=t,n("setstyle is now deprecated, please use the style property, e.g : mytext.style = style;")},t.text.prototype.determinefontproperties=function(e){return n("determinefontproperties is now deprecated, please use textmetrics.measurefont method"),t.textmetrics.measurefont(e)},t.text.getfontstyle=function(e){return n("getfontstyle is now deprecated, please use textstyle.tofontstring() instead"),e=e||{},e instanceof t.textstyle||(e=new t.textstyle(e)),e.tofontstring()},object.defineproperties(t.textstyle.prototype,{font:{get:function(){n("text style property 'font' is now deprecated, please use the 'fontfamily', 'fontsize', 'fontstyle', 'fontvariant' and 'fontweight' properties from now on");var t="number"==typeof this._fontsize?this._fontsize+"px":this._fontsize;return this._fontstyle+" "+this._fontvariant+" "+this._fontweight+" "+t+" "+this._fontfamily},set:function(t){n("text style property 'font' is now deprecated, please use the 'fontfamily','fontsize',fontstyle','fontvariant' and 'fontweight' properties from now on"),t.indexof("italic")>1?this._fontstyle="italic":t.indexof("oblique")>-1?this._fontstyle="oblique":this._fontstyle="normal",t.indexof("small-caps")>-1?this._fontvariant="small-caps":this._fontvariant="normal";var e=t.split(" "),r=-1;this._fontsize=26;for(var i=0;i<e.length;++i)if(e[i].match(/(px|pt|em|%)/)){r=i,this._fontsize=e[i];break}this._fontweight="normal";for(var o=0;o<r;++o)if(e[o].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontweight=e[o];break}if(r>-1&&r<e.length-1){this._fontfamily="";for(var s=r+1;s<e.length;++s)this._fontfamily+=e[s]+" ";this._fontfamily=this._fontfamily.slice(0,-1)}else this._fontfamily="arial";this.styleid++}}}),t.texture.prototype.setframe=function(t){this.frame=t,n("setframe is now deprecated, please use the frame property, e.g: mytexture.frame = frame;")},t.texture.addtexturetocache=function(e,r){t.texture.addtocache(e,r),n("texture.addtexturetocache is deprecated, please use texture.addtocache from now on.")},t.texture.removetexturefromcache=function(e){return n("texture.removetexturefromcache is deprecated, please use texture.removefromcache from now on. be aware that texture.removefromcache does not automatically its basetexture from the basetexturecache. for that, use basetexture.removefromcache"),t.basetexture.removefromcache(e),t.texture.removefromcache(e)},object.defineproperties(o,{abstractfilter:{get:function(){return n("astractfilter has been renamed to filter, please use pixi.filter"),t.abstractfilter}},spritemaskfilter:{get:function(){return n("filters.spritemaskfilter is an undocumented alias, please use spritemaskfilter from now on."),t.spritemaskfilter}}}),t.utils.uuid=function(){return n("utils.uuid() is deprecated, please use utils.uid() from now on."),t.utils.uid()},t.utils.canusenewcanvasblendmodes=function(){return n("utils.canusenewcanvasblendmodes() is deprecated, please use canvastinter.canusemultiply from now on"),t.canvastinter.canusemultiply};var d=!0;object.defineproperty(t.utils,"_saidhello",{set:function(t){t&&(n("pixi.utils._saidhello is deprecated, please use pixi.utils.skiphello()"),this.skiphello()),d=t},get:function(){return d}}),s.baseprepare.prototype.register=function(t,e){return n("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerfindhook & renderer.plugins.prepare.registeruploadhook"),t&&this.registerfindhook(t),e&&this.registeruploadhook(e),this},object.defineproperty(s.canvas,"uploads_per_frame",{set:function(){n("pixi.canvasprepare.uploads_per_frame has been removed. please set renderer.plugins.prepare.limiter.maxitemsperframe on your renderer")},get:function(){return n("pixi.canvasprepare.uploads_per_frame has been removed. please use renderer.plugins.prepare.limiter"),nan}}),object.defineproperty(s.webgl,"uploads_per_frame",{set:function(){n("pixi.webglprepare.uploads_per_frame has been removed. please set renderer.plugins.prepare.limiter.maxitemsperframe on your renderer")},get:function(){return n("pixi.webglprepare.uploads_per_frame has been removed. please use renderer.plugins.prepare.limiter"),nan}}),a.loader&&!function(){var t=a.resource,e=a.loader;object.defineproperties(t.prototype,{isjson:{get:function(){return n("the isjson property is deprecated, please use `resource.type === resource.type.json`."),this.type===t.type.json}},isxml:{get:function(){return n("the isxml property is deprecated, please use `resource.type === resource.type.xml`."),this.type===t.type.xml}},isimage:{get:function(){return n("the isimage property is deprecated, please use `resource.type === resource.type.image`."),this.type===t.type.image}},isaudio:{get:function(){return n("the isaudio property is deprecated, please use `resource.type === resource.type.audio`."),this.type===t.type.audio}},isvideo:{get:function(){return n("the isvideo property is deprecated, please use `resource.type === resource.type.video`."),this.type===t.type.video}}}),object.defineproperties(e.prototype,{before:{get:function(){return n("the before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return n("the after() method is deprecated, please use use()."),this.use}}})}(),object.defineproperty(u.interactivetarget,"defaultcursor",{set:function(t){n("property defaultcursor has been replaced with 'cursor'. "),this.cursor=t},get:function(){return n("property defaultcursor has been replaced with 'cursor'. "),this.cursor}}),object.defineproperty(u.interactionmanager,"defaultcursorstyle",{set:function(t){n("property defaultcursorstyle has been replaced with 'cursorstyles.default'. "),this.cursorstyles.default=t},get:function(){return n("property defaultcursorstyle has been replaced with 'cursorstyles.default'. "),this.cursorstyles.default}}),object.defineproperty(u.interactionmanager,"currentcursorstyle",{set:function(t){n("property currentcursorstyle has been removed.see the currentcursormode property, which works differently."),this.currentcursormode=t},get:function(){return n("property currentcursorstyle has been removed.see the currentcursormode property, which works differently."),this.currentcursormode}})}r.__esmodule=!0,r.default=i},{}],128:[function(t,e,r){"use strict";function n(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=t("../../core"),s=n(o),a=new s.rectangle,u=function(){function t(e){i(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function t(e){var t=new image;return t.src=this.base64(e),t},t.prototype.base64=function(t){return this.canvas(t).todataurl()},t.prototype.canvas=function(t){var e=this.renderer,r=void 0,n=void 0,i=void 0,o=void 0;t&&(o=t instanceof s.rendertexture?t:e.generatetexture(t)),o?(r=o.basetexture._canvasrendertarget.context,n=o.basetexture._canvasrendertarget.resolution,i=o.frame):(r=e.rootcontext,i=a,i.width=this.renderer.width,i.height=this.renderer.height);var u=i.width*n,h=i.height*n,l=new s.canvasrendertarget(u,h),c=r.getimagedata(i.x*n,i.y*n,u,h);return l.context.putimagedata(c,0,0),l.canvas},t.prototype.pixels=function(t){var e=this.renderer,r=void 0,n=void 0,i=void 0,o=void 0;return t&&(o=t instanceof s.rendertexture?t:e.generatetexture(t)),o?(r=o.basetexture._canvasrendertarget.context,n=o.basetexture._canvasrendertarget.resolution,i=o.frame):(r=e.rootcontext,i=a,i.width=e.width,i.height=e.height),r.getimagedata(0,0,i.width*n,i.height*n).data},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();r.default=u,s.canvasrenderer.registerplugin("extract",u)},{"../../core":63}],129:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}r.__esmodule=!0;var i=t("./webgl/webglextract");object.defineproperty(r,"webgl",{enumerable:!0,get:function(){return n(i).default}});var o=t("./canvas/canvasextract");object.defineproperty(r,"canvas",{enumerable:!0,get:function(){return n(o).default}})},{"./canvas/canvasextract":128,"./webgl/webglextract":130}],130:[function(t,e,r){"use strict";function n(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=t("../../core"),s=n(o),a=new s.rectangle,u=4,h=function(){function t(e){i(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function t(e){var t=new image;return t.src=this.base64(e),t},t.prototype.base64=function(t){return this.canvas(t).todataurl()},t.prototype.canvas=function(t){var e=this.renderer,r=void 0,n=void 0,i=void 0,o=!1,h=void 0;t&&(h=t instanceof s.rendertexture?t:this.renderer.generatetexture(t)),h?(r=h.basetexture._glrendertargets[this.renderer.context_uid],n=r.resolution,i=h.frame,o=!1):(r=this.renderer.rootrendertarget,n=r.resolution,o=!0,i=a,i.width=r.size.width,i.height=r.size.height);var l=i.width*n,c=i.height*n,d=new s.canvasrendertarget(l,c);if(r){e.bindrendertarget(r);var f=new uint8array(u*l*c),p=e.gl;p.readpixels(i.x*n,i.y*n,l,c,p.rgba,p.unsigned_byte,f);var v=d.context.getimagedata(0,0,l,c);v.data.set(f),d.context.putimagedata(v,0,0),o&&(d.context.scale(1,-1),d.context.drawimage(d.canvas,0,-c))}return d.canvas},t.prototype.pixels=function(t){var e=this.renderer,r=void 0,n=void 0,i=void 0,o=void 0;t&&(o=t instanceof s.rendertexture?t:this.renderer.generatetexture(t)),o?(r=o.basetexture._glrendertargets[this.renderer.context_uid],n=r.resolution,i=o.frame):(r=this.renderer.rootrendertarget,n=r.resolution,i=a,i.width=r.size.width,i.height=r.size.height);var h=i.width*n,l=i.height*n,c=new uint8array(u*h*l);if(r){e.bindrendertarget(r);var d=e.gl;d.readpixels(i.x*n,i.y*n,h,l,d.rgba,d.unsigned_byte,c)}return c},t.prototype.destroy=function(){
this.renderer.extract=null,this.renderer=null},t}();r.default=h,s.webglrenderer.registerplugin("extract",h)},{"../../core":63}],131:[function(t,e,r){"use strict";function n(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("../core"),h=n(u),l=function(t){function e(r,n){i(this,e);var s=o(this,t.call(this,r[0]instanceof h.texture?r[0]:r[0].texture));return s._textures=null,s._durations=null,s.textures=r,s._autoupdate=n!==!1,s.animationspeed=1,s.loop=!0,s.oncomplete=null,s.onframechange=null,s._currenttime=0,s.playing=!1,s}return s(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoupdate&&h.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoupdate&&h.ticker.shared.add(this.update,this,h.update_priority.high))},e.prototype.gotoandstop=function(t){this.stop();var e=this.currentframe;this._currenttime=t,e!==this.currentframe&&this.updatetexture()},e.prototype.gotoandplay=function(t){var e=this.currentframe;this._currenttime=t,e!==this.currentframe&&this.updatetexture(),this.play()},e.prototype.update=function(t){var e=this.animationspeed*t,r=this.currentframe;if(null!==this._durations){var n=this._currenttime%1*this._durations[this.currentframe];for(n+=e/60*1e3;n<0;)this._currenttime--,n+=this._durations[this.currentframe];var i=math.sign(this.animationspeed*t);for(this._currenttime=math.floor(this._currenttime);n>=this._durations[this.currentframe];)n-=this._durations[this.currentframe]*i,this._currenttime+=i;this._currenttime+=n/this._durations[this.currentframe]}else this._currenttime+=e;this._currenttime<0&&!this.loop?(this.gotoandstop(0),this.oncomplete&&this.oncomplete()):this._currenttime>=this._textures.length&&!this.loop?(this.gotoandstop(this._textures.length-1),this.oncomplete&&this.oncomplete()):r!==this.currentframe&&this.updatetexture()},e.prototype.updatetexture=function(){this._texture=this._textures[this.currentframe],this._textureid=-1,this.onframechange&&this.onframechange(this.currentframe)},e.prototype.destroy=function(){this.stop(),t.prototype.destroy.call(this)},e.fromframes=function(t){for(var r=[],n=0;n<t.length;++n)r.push(h.texture.fromframe(t[n]));return new e(r)},e.fromimages=function(t){for(var r=[],n=0;n<t.length;++n)r.push(h.texture.fromimage(t[n]));return new e(r)},a(e,[{key:"totalframes",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof h.texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}}},{key:"currentframe",get:function(){var t=math.floor(this._currenttime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(h.sprite);r.default=l},{"../core":63}],132:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function s(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("../core"),l=i(h),c=t("../core/math/observablepoint"),d=n(c),f=function(t){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e);var i=s(this,t.call(this));return i._textwidth=0,i._textheight=0,i._glyphs=[],i._font={tint:void 0!==n.tint?n.tint:16777215,align:n.align||"left",name:null,size:0},i.font=n.font,i._text=r,i.maxwidth=0,i.maxlineheight=0,i._anchor=new d.default(function(){i.dirty=!0},i,0,0),i.dirty=!1,i.updatetext(),i}return a(e,t),e.prototype.updatetext=function(){for(var t=e.fonts[this._font.name],r=this._font.size/t.size,n=new l.point,i=[],o=[],s=null,a=0,u=0,h=0,c=-1,d=0,f=0,p=0;p<this.text.length;p++){var v=this.text.charcodeat(p);if(/(\s)/.test(this.text.charat(p))&&(c=p,d=a),/(?:\r\n|\r|\n)/.test(this.text.charat(p)))o.push(a),u=math.max(u,a),h++,n.x=0,n.y+=t.lineheight,s=null;else if(c!==-1&&this.maxwidth>0&&n.x*r>this.maxwidth)l.utils.removeitems(i,c,p-c),p=c,c=-1,o.push(d),u=math.max(u,d),h++,n.x=0,n.y+=t.lineheight,s=null;else{var y=t.chars[v];y&&(s&&y.kerning[s]&&(n.x+=y.kerning[s]),i.push({texture:y.texture,line:h,charcode:v,position:new l.point(n.x+y.xoffset,n.y+y.yoffset)}),a=n.x+(y.texture.width+y.xoffset),n.x+=y.xadvance,f=math.max(f,y.yoffset+y.texture.height),s=v)}}o.push(a),u=math.max(u,a);for(var g=[],m=0;m<=h;m++){var _=0;"right"===this._font.align?_=u-o[m]:"center"===this._font.align&&(_=(u-o[m])/2),g.push(_)}for(var b=i.length,x=this.tint,t=0;t<b;t++){var w=this._glyphs[t];w?w.texture=i[t].texture:(w=new l.sprite(i[t].texture),this._glyphs.push(w)),w.position.x=(i[t].position.x+g[i[t].line])*r,w.position.y=i[t].position.y*r,w.scale.x=w.scale.y=r,w.tint=x,w.parent||this.addchild(w)}for(var e=b;e<this._glyphs.length;++e)this.removechild(this._glyphs[e]);if(this._textwidth=u*r,this._textheight=(n.y+t.lineheight)*r,0!==this.anchor.x||0!==this.anchor.y)for(var s=0;s<b;s++)this._glyphs[s].x-=this._textwidth*this.anchor.x,this._glyphs[s].y-=this._textheight*this.anchor.y;this.maxlineheight=f*r},e.prototype.updatetransform=function(){this.validate(),this.containerupdatetransform()},e.prototype.getlocalbounds=function(){return this.validate(),t.prototype.getlocalbounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updatetext(),this.dirty=!1)},e.registerfont=function(t,r){var n={},i=t.getelementsbytagname("info")[0],o=t.getelementsbytagname("common")[0];n.font=i.getattribute("face"),n.size=parseint(i.getattribute("size"),10),n.lineheight=parseint(o.getattribute("lineheight"),10),n.chars={};for(var s=t.getelementsbytagname("char"),a=0;a<s.length;a++){var u=s[a],h=parseint(u.getattribute("id"),10),c=new l.rectangle(parseint(u.getattribute("x"),10)+r.frame.x,parseint(u.getattribute("y"),10)+r.frame.y,parseint(u.getattribute("width"),10),parseint(u.getattribute("height"),10));n.chars[h]={xoffset:parseint(u.getattribute("xoffset"),10),yoffset:parseint(u.getattribute("yoffset"),10),xadvance:parseint(u.getattribute("xadvance"),10),kerning:{},texture:new l.texture(r.basetexture,c)}}for(var d=t.getelementsbytagname("kerning"),f=0;f<d.length;f++){var p=d[f],v=parseint(p.getattribute("first"),10),y=parseint(p.getattribute("second"),10),g=parseint(p.getattribute("amount"),10);n.chars[y]&&(n.chars[y].kerning[v]=g)}return e.fonts[n.font]=n,n},u(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseint(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseint(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.tostring()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"textwidth",get:function(){return this.validate(),this._textwidth}},{key:"textheight",get:function(){return this.validate(),this._textheight}}]),e}(l.container);r.default=f,f.fonts={}},{"../core":63,"../core/math/observablepoint":66}],133:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=t("../core/math/matrix"),a=n(s),u=new a.default,h=function(){function t(e,r){i(this,t),this._texture=e,this.mapcoord=new a.default,this.uclampframe=new float32array(4),this.uclampoffset=new float32array(2),this._lasttextureid=-1,this.clampoffset=0,this.clampmargin="undefined"==typeof r?.5:r}return t.prototype.multiplyuvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapcoord,n=0;n<t.length;n+=2){var i=t[n],o=t[n+1];e[n]=i*r.a+o*r.c+r.tx,e[n+1]=i*r.b+o*r.d+r.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lasttextureid===e._updateid)return!1;this._lasttextureid=e._updateid;var r=e._uvs;this.mapcoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var n=e.orig,i=e.trim;i&&(u.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapcoord.append(u));var o=e.basetexture,s=this.uclampframe,a=this.clampmargin/o.resolution,h=this.clampoffset;return s[0]=(e._frame.x+a+h)/o.width,s[1]=(e._frame.y+a+h)/o.height,s[2]=(e._frame.x+e._frame.width-a+h)/o.width,s[3]=(e._frame.y+e._frame.height-a+h)/o.height,this.uclampoffset[0]=h/o.realwidth,this.uclampoffset[1]=h/o.realheight,!0},o(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lasttextureid=-1}}]),t}();r.default=h},{"../core/math/matrix":65}],134:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function s(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("../core"),l=i(h),c=t("../core/sprites/canvas/canvastinter"),d=n(c),f=t("./texturetransform"),p=n(f),v=new l.point,y=function(t){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;o(this,e);var a=s(this,t.call(this,r));return a.tiletransform=new l.transformstatic,a._width=n,a._height=i,a._canvaspattern=null,a.uvtransform=r.transform||new p.default(r),a.pluginname="tilingsprite",a.uvrespectanchor=!1,a}return a(e,t),e.prototype._ontextureupdate=function(){this.uvtransform&&(this.uvtransform.texture=this._texture)},e.prototype._renderwebgl=function(t){var e=this._texture;e&&e.valid&&(this.tiletransform.updatelocaltransform(),this.uvtransform.update(),t.setobjectrenderer(t.plugins[this.pluginname]),t.plugins[this.pluginname].render(this))},e.prototype._rendercanvas=function(t){var e=this._texture;if(e.basetexture.hasloaded){var r=t.context,n=this.worldtransform,i=t.resolution,o=e.basetexture,s=o.resolution,a=this.tileposition.x/this.tilescale.x%e._frame.width*s,u=this.tileposition.y/this.tilescale.y%e._frame.height*s;if(!this._canvaspattern){var h=new l.canvasrendertarget(e._frame.width,e._frame.height,s);16777215!==this.tint?(this.cachedtint!==this.tint&&(this.cachedtint=this.tint,this.tintedtexture=d.default.gettintedtexture(this,this.tint)),h.context.drawimage(this.tintedtexture,0,0)):h.context.drawimage(o.source,-e._frame.x,-e._frame.y),this._canvaspattern=h.context.createpattern(h.canvas,"repeat")}r.globalalpha=this.worldalpha,r.settransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),t.setblendmode(this.blendmode),r.fillstyle=this._canvaspattern,r.scale(this.tilescale.x/s,this.tilescale.y/s);var c=this.anchor.x*-this._width,f=this.anchor.y*-this._height;this.uvrespectanchor?(r.translate(a,u),r.fillrect(-a+c,-u+f,this._width/this.tilescale.x*s,this._height/this.tilescale.y*s)):(r.translate(a+c,u+f),r.fillrect(-a,-u,this._width/this.tilescale.x*s,this._height/this.tilescale.y*s))}},e.prototype._calculatebounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addframe(this.transform,t,e,r,n)},e.prototype.getlocalbounds=function(e){return 0===this.children.length?(this._bounds.minx=this._width*-this._anchor._x,this._bounds.miny=this._height*-this._anchor._y,this._bounds.maxx=this._width*(1-this._anchor._x),this._bounds.maxy=this._height*(1-this._anchor._x),e||(this._localboundsrect||(this._localboundsrect=new l.rectangle),e=this._localboundsrect),this._bounds.getrectangle(e)):t.prototype.getlocalbounds.call(this,e)},e.prototype.containspoint=function(t){this.worldtransform.applyinverse(t,v);var e=this._width,r=this._height,n=-e*this.anchor._x;if(v.x>n&&v.x<n+e){var i=-r*this.anchor._y;if(v.y>i&&v.y<i+r)return!0}return!1},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.tiletransform=null,this.uvtransform=null},e.from=function(t,r,n){return new e(l.texture.from(t),r,n)},e.fromframe=function(t,r,n){var i=l.utils.texturecache[t];if(!i)throw new error('the frameid "'+t+'" does not exist in the texture cache '+this);return new e(i,r,n)},e.fromimage=function(t,r,n,i,o){return new e(l.texture.fromimage(t,i,o),r,n)},u(e,[{key:"clampmargin",get:function(){return this.uvtransform.clampmargin},set:function(t){this.uvtransform.clampmargin=t,this.uvtransform.update(!0)}},{key:"tilescale",get:function(){return this.tiletransform.scale},set:function(t){this.tiletransform.scale.copy(t)}},{key:"tileposition",get:function(){return this.tiletransform.position},set:function(t){this.tiletransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(l.sprite);r.default=y},{"../core":63,"../core/sprites/canvas/canvastinter":102,"./texturetransform":133}],135:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}var s=t("../core"),a=i(s),u=t("../core/textures/texture"),h=n(u),l=t("../core/textures/basetexture"),c=n(l),d=t("../core/utils"),f=a.displayobject,p=new a.matrix;f.prototype._cacheasbitmap=!1,f.prototype._cachedata=!1;var v=function t(){o(this,t),this.texturecacheid=null,this.originalrenderwebgl=null,this.originalrendercanvas=null,this.originalcalculatebounds=null,this.originalgetlocalbounds=null,this.originalupdatetransform=null,this.originalhittest=null,this.originaldestroy=null,this.originalmask=null,this.originalfilterarea=null,this.sprite=null};object.defineproperties(f.prototype,{cacheasbitmap:{get:function(){return this._cacheasbitmap},set:function(t){if(this._cacheasbitmap!==t){this._cacheasbitmap=t;var e=void 0;t?(this._cachedata||(this._cachedata=new v),e=this._cachedata,e.originalrenderwebgl=this.renderwebgl,e.originalrendercanvas=this.rendercanvas,e.originalupdatetransform=this.updatetransform,e.originalcalculatebounds=this._calculatebounds,e.originalgetlocalbounds=this.getlocalbounds,e.originaldestroy=this.destroy,e.originalcontainspoint=this.containspoint,e.originalmask=this._mask,e.originalfilterarea=this.filterarea,this.renderwebgl=this._rendercachedwebgl,this.rendercanvas=this._rendercachedcanvas,this.destroy=this._cacheasbitmapdestroy):(e=this._cachedata,e.sprite&&this._destroycacheddisplayobject(),this.renderwebgl=e.originalrenderwebgl,this.rendercanvas=e.originalrendercanvas,this._calculatebounds=e.originalcalculatebounds,this.getlocalbounds=e.originalgetlocalbounds,this.destroy=e.originaldestroy,this.updatetransform=e.originalupdatetransform,this.containspoint=e.originalcontainspoint,this._mask=e.originalmask,this.filterarea=e.originalfilterarea)}}}}),f.prototype._rendercachedwebgl=function(t){!this.visible||this.worldalpha<=0||!this.renderable||(this._initcacheddisplayobject(t),this._cachedata.sprite._transformid=-1,this._cachedata.sprite.worldalpha=this.worldalpha,this._cachedata.sprite._renderwebgl(t))},f.prototype._initcacheddisplayobject=function(t){if(!this._cachedata||!this._cachedata.sprite){var e=this.alpha;this.alpha=1,t.currentrenderer.flush();var r=this.getlocalbounds().clone();if(this._filters){var n=this._filters[0].padding;r.pad(n)}var i=t._activerendertarget,o=t.filtermanager.filterstack,s=a.rendertexture.create(0|r.width,0|r.height),u="cacheasbitmap_"+(0,d.uid)();this._cachedata.texturecacheid=u,c.default.addtocache(s.basetexture,u),h.default.addtocache(s,u);var l=p;l.tx=-r.x,l.ty=-r.y,this.transform.worldtransform.identity(),this.renderwebgl=this._cachedata.originalrenderwebgl,t.render(this,s,!0,l,!0),t.bindrendertarget(i),t.filtermanager.filterstack=o,this.renderwebgl=this._rendercachedwebgl,this.updatetransform=this.displayobjectupdatetransform,this._mask=null,this.filterarea=null;var f=new a.sprite(s);f.transform.worldtransform=this.transform.worldtransform,f.anchor.x=-(r.x/r.width),f.anchor.y=-(r.y/r.height),f.alpha=e,f._bounds=this._bounds,this._calculatebounds=this._calculatecachedbounds,this.getlocalbounds=this._getcachedlocalbounds,this._cachedata.sprite=f,this.transform._parentid=-1,this.parent?this.updatetransform():(this.parent=t._tempdisplayobjectparent,this.updatetransform(),this.parent=null),this.containspoint=f.containspoint.bind(f)}},f.prototype._rendercachedcanvas=function(t){!this.visible||this.worldalpha<=0||!this.renderable||(this._initcacheddisplayobjectcanvas(t),this._cachedata.sprite.worldalpha=this.worldalpha,this._cachedata.sprite.rendercanvas(t))},f.prototype._initcacheddisplayobjectcanvas=function(t){if(!this._cachedata||!this._cachedata.sprite){var e=this.getlocalbounds(),r=this.alpha;this.alpha=1;var n=t.context,i=a.rendertexture.create(0|e.width,0|e.height),o="cacheasbitmap_"+(0,d.uid)();this._cachedata.texturecacheid=o,c.default.addtocache(i.basetexture,o),h.default.addtocache(i,o);var s=p;this.transform.localtransform.copy(s),s.invert(),s.tx-=e.x,s.ty-=e.y,this.rendercanvas=this._cachedata.originalrendercanvas,t.render(this,i,!0,s,!1),t.context=n,this.rendercanvas=this._rendercachedcanvas,this._calculatebounds=this._calculatecachedbounds,this._mask=null,this.filterarea=null;var u=new a.sprite(i);u.transform.worldtransform=this.transform.worldtransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u._bounds=this._bounds,u.alpha=r,this.parent?this.updatetransform():(this.parent=t._tempdisplayobjectparent,this.updatetransform(),this.parent=null),this.updatetransform=this.displayobjectupdatetransform,this._cachedata.sprite=u,this.containspoint=u.containspoint.bind(u)}},f.prototype._calculatecachedbounds=function(){this._cachedata.sprite._calculatebounds()},f.prototype._getcachedlocalbounds=function(){return this._cachedata.sprite.getlocalbounds()},f.prototype._destroycacheddisplayobject=function(){this._cachedata.sprite._texture.destroy(!0),this._cachedata.sprite=null,c.default.removefromcache(this._cachedata.texturecacheid),h.default.removefromcache(this._cachedata.texturecacheid),this._cachedata.texturecacheid=null},f.prototype._cacheasbitmapdestroy=function(t){this.cacheasbitmap=!1,this.destroy(t)}},{"../core":63,"../core/textures/basetexture":110,"../core/textures/texture":113,"../core/utils":122}],136:[function(t,e,r){"use strict";function n(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var i=t("../core"),o=n(i);o.displayobject.prototype.name=null,o.container.prototype.getchildbyname=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"../core":63}],137:[function(t,e,r){"use strict";function n(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var i=t("../core"),o=n(i);o.displayobject.prototype.getglobalposition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.point,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toglobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},{"../core":63}],138:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}r.__esmodule=!0,r.bitmaptext=r.tilingspriterenderer=r.tilingsprite=r.animatedsprite=void 0;var i=t("./animatedsprite");object.defineproperty(r,"animatedsprite",{enumerable:!0,get:function(){return n(i).default}});var o=t("./tilingsprite");object.defineproperty(r,"tilingsprite",{enumerable:!0,get:function(){return n(o).default}});var s=t("./webgl/tilingspriterenderer");object.defineproperty(r,"tilingspriterenderer",{enumerable:!0,get:function(){return n(s).default}});var a=t("./bitmaptext");object.defineproperty(r,"bitmaptext",{enumerable:!0,get:function(){return n(a).default}}),t("./cacheasbitmap"),t("./getchildbyname"),t("./getglobalposition")},{"./animatedsprite":131,"./bitmaptext":132,"./tilingsprite":134,"./cacheasbitmap":135,"./getchildbyname":136,"./getglobalposition":137,"./webgl/tilingspriterenderer":139}],139:[function(t,e,r){"use strict";function n(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=t("../../core"),u=n(a),h=t("../../core/const"),l=(t("path"),new u.matrix),c=new float32array(4),d=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));return n.shader=null,n.simpleshader=null,n.quad=null,n}return s(e,t),e.prototype.oncontextchange=function(){var t=this.renderer.gl;this.shader=new u.shader(t,"attribute vec2 avertexposition;\nattribute vec2 atexturecoord;\n\nuniform mat3 projectionmatrix;\nuniform mat3 translationmatrix;\nuniform mat3 utransform;\n\nvarying vec2 vtexturecoord;\n\nvoid main(void)\n{\n    gl_position = vec4((projectionmatrix * translationmatrix * vec3(avertexposition, 1.0)).xy, 0.0, 1.0);\n\n    vtexturecoord = (utransform * vec3(atexturecoord, 1.0)).xy;\n}\n","varying vec2 vtexturecoord;\n\nuniform sampler2d usampler;\nuniform vec4 ucolor;\nuniform mat3 umapcoord;\nuniform vec4 uclampframe;\nuniform vec2 uclampoffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vtexturecoord - uclampoffset, vec2(1.0, 1.0)) + uclampoffset;\n    coord = (umapcoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uclampframe.xy, uclampframe.zw);\n\n    vec4 sample = texture2d(usampler, coord);\n    vec4 color = vec4(ucolor.rgb * ucolor.a, ucolor.a);\n\n    gl_fragcolor = sample * color ;\n}\n"),this.simpleshader=new u.shader(t,"attribute vec2 avertexposition;\nattribute vec2 atexturecoord;\n\nuniform mat3 projectionmatrix;\nuniform mat3 translationmatrix;\nuniform mat3 utransform;\n\nvarying vec2 vtexturecoord;\n\nvoid main(void)\n{\n    gl_position = vec4((projectionmatrix * translationmatrix * vec3(avertexposition, 1.0)).xy, 0.0, 1.0);\n\n    vtexturecoord = (utransform * vec3(atexturecoord, 1.0)).xy;\n}\n","varying vec2 vtexturecoord;\n\nuniform sampler2d usampler;\nuniform vec4 ucolor;\n\nvoid main(void)\n{\n    vec4 sample = texture2d(usampler, vtexturecoord);\n    vec4 color = vec4(ucolor.rgb * ucolor.a, ucolor.a);\n    gl_fragcolor = sample * color;\n}\n"),this.renderer.bindvao(null),this.quad=new u.quad(t,this.renderer.state.attribstate),this.quad.initvao(this.shader)},e.prototype.render=function(t){var e=this.renderer,r=this.quad;e.bindvao(r.vao);var n=r.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y),t.uvrespectanchor&&(n=r.uvs,n[0]=n[6]=-t.anchor.x,n[1]=n[3]=-t.anchor.y,n[2]=n[4]=1-t.anchor.x,n[5]=n[7]=1-t.anchor.y),r.upload();var i=t._texture,o=i.basetexture,s=t.tiletransform.localtransform,a=t.uvtransform,d=o.ispoweroftwo&&i.frame.width===o.width&&i.frame.height===o.height;d&&(o._gltextures[e.context_uid]?d=o.wrapmode!==h.wrap_modes.clamp:o.wrapmode===h.wrap_modes.clamp&&(o.wrapmode=h.wrap_modes.repeat));var f=d?this.simpleshader:this.shader;e.bindshader(f);var p=i.width,v=i.height,y=t._width,g=t._height;l.set(s.a*p/y,s.b*p/g,s.c*v/y,s.d*v/g,s.tx/y,s.ty/g),l.invert(),d?l.prepend(a.mapcoord):(f.uniforms.umapcoord=a.mapcoord.toarray(!0),f.uniforms.uclampframe=a.uclampframe,f.uniforms.uclampoffset=a.uclampoffset),f.uniforms.utransform=l.toarray(!0);var m=c;u.utils.hex2rgb(t.tint,m),m[3]=t.worldalpha,f.uniforms.ucolor=m,f.uniforms.translationmatrix=t.transform.worldtransform.toarray(!0),f.uniforms.usampler=e.bindtexture(i),e.setblendmode(t.blendmode),r.vao.draw(this.renderer.gl.triangles,6,0)},e}(u.objectrenderer);r.default=d,u.webglrenderer.registerplugin("tilingsprite",d)},{"../../core":63,"../../core/const":44,path:22}],140:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function s(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("../../core"),l=i(h),c=t("./blurxfilter"),d=n(c),f=t("./bluryfilter"),p=n(f),v=function(t){function e(r,n,i,a){o(this,e);var u=s(this,t.call(this));return u.blurxfilter=new d.default(r,n,i,a),u.bluryfilter=new p.default(r,n,i,a),u.padding=0,u.resolution=i||l.settings.resolution,u.quality=n||4,u.blur=r||8,u}return a(e,t),e.prototype.apply=function(t,e,r){var n=t.getrendertarget(!0);this.blurxfilter.apply(t,e,n,!0),this.bluryfilter.apply(t,n,r,!1),t.returnrendertarget(n)},u(e,[{key:"blur",get:function(){return this.blurxfilter.blur},set:function(t){this.blurxfilter.blur=this.bluryfilter.blur=t,this.padding=2*math.max(math.abs(this.blurxfilter.strength),math.abs(this.bluryfilter.strength))}},{key:"quality",get:function(){return this.blurxfilter.quality},set:function(t){this.blurxfilter.quality=this.bluryfilter.quality=t}},{key:"blurx",get:function(){return this.blurxfilter.blur},set:function(t){this.blurxfilter.blur=t,this.padding=2*math.max(math.abs(this.blurxfilter.strength),math.abs(this.bluryfilter.strength))}},{key:"blury",get:function(){return this.bluryfilter.blur},set:function(t){this.bluryfilter.blur=t,this.padding=2*math.max(math.abs(this.blurxfilter.strength),math.abs(this.bluryfilter.strength))}}]),e}(l.filter);r.default=v},{"../../core":63,"./blurxfilter":141,"./bluryfilter":142}],141:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function s(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("../../core"),l=i(h),c=t("./generateblurvertsource"),d=n(c),f=t("./generateblurfragsource"),p=n(f),v=t("./getmaxblurkernelsize"),y=n(v),g=function(t){function e(r,n,i,a){o(this,e),a=a||5;var u=(0,d.default)(a,!0),h=(0,p.default)(a),c=s(this,t.call(this,u,h));return c.resolution=i||l.settings.resolution,c._quality=0,c.quality=n||4,c.strength=r||8,c.firstrun=!0,c}return a(e,t),e.prototype.apply=function(t,e,r,n){if(this.firstrun){var i=t.renderer.gl,o=(0,y.default)(i);this.vertexsrc=(0,d.default)(o,!0),this.fragmentsrc=(0,p.default)(o),this.firstrun=!1}if(this.uniforms.strength=1/r.size.width*(r.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyfilter(this,e,r,n);else{for(var s=t.getrendertarget(!0),a=e,u=s,h=0;h<this.passes-1;h++){t.applyfilter(this,a,u,!0);var l=u;u=a,a=l}t.applyfilter(this,a,r,n),t.returnrendertarget(s)}},u(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*math.abs(t),
this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(l.filter);r.default=g},{"../../core":63,"./generateblurfragsource":143,"./generateblurvertsource":144,"./getmaxblurkernelsize":145}],142:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function s(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("../../core"),l=i(h),c=t("./generateblurvertsource"),d=n(c),f=t("./generateblurfragsource"),p=n(f),v=t("./getmaxblurkernelsize"),y=n(v),g=function(t){function e(r,n,i,a){o(this,e),a=a||5;var u=(0,d.default)(a,!1),h=(0,p.default)(a),c=s(this,t.call(this,u,h));return c.resolution=i||l.settings.resolution,c._quality=0,c.quality=n||4,c.strength=r||8,c.firstrun=!0,c}return a(e,t),e.prototype.apply=function(t,e,r,n){if(this.firstrun){var i=t.renderer.gl,o=(0,y.default)(i);this.vertexsrc=(0,d.default)(o,!1),this.fragmentsrc=(0,p.default)(o),this.firstrun=!1}if(this.uniforms.strength=1/r.size.height*(r.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyfilter(this,e,r,n);else{for(var s=t.getrendertarget(!0),a=e,u=s,h=0;h<this.passes-1;h++){t.applyfilter(this,a,u,!0);var l=u;u=a,a=l}t.applyfilter(this,a,r,n),t.returnrendertarget(s)}},u(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(l.filter);r.default=g},{"../../core":63,"./generateblurfragsource":143,"./generateblurvertsource":144,"./getmaxblurkernelsize":145}],143:[function(t,e,r){"use strict";function n(t){for(var e=i[t],r=e.length,n=o,s="",a="gl_fragcolor += texture2d(usampler, vblurtexcoords[%index%]) * %value%;",u=void 0,h=0;h<t;h++){var l=a.replace("%index%",h);u=h,h>=r&&(u=t-h-1),l=l.replace("%value%",e[u]),s+=l,s+="\n"}return n=n.replace("%blur%",s),n=n.replace("%size%",t)}r.__esmodule=!0,r.default=n;var i={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},o=["varying vec2 vblurtexcoords[%size%];","uniform sampler2d usampler;","void main(void)","{","    gl_fragcolor = vec4(0.0);","    %blur%","}"].join("\n")},{}],144:[function(t,e,r){"use strict";function n(t,e){var r=math.ceil(t/2),n=i,o="",s=void 0;s=e?"vblurtexcoords[%index%] = atexturecoord + vec2(%sampleindex% * strength, 0.0);":"vblurtexcoords[%index%] = atexturecoord + vec2(0.0, %sampleindex% * strength);";for(var a=0;a<t;a++){var u=s.replace("%index%",a);u=u.replace("%sampleindex%",a-(r-1)+".0"),o+=u,o+="\n"}return n=n.replace("%blur%",o),n=n.replace("%size%",t)}r.__esmodule=!0,r.default=n;var i=["attribute vec2 avertexposition;","attribute vec2 atexturecoord;","uniform float strength;","uniform mat3 projectionmatrix;","varying vec2 vblurtexcoords[%size%];","void main(void)","{","gl_position = vec4((projectionmatrix * vec3((avertexposition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],145:[function(t,e,r){"use strict";function n(t){for(var e=t.getparameter(t.max_varying_vectors),r=15;r>e;)r-=2;return r}r.__esmodule=!0,r.default=n},{}],146:[function(t,e,r){"use strict";function n(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("../../core"),h=n(u),l=(t("path"),function(t){function e(){i(this,e);var r=o(this,t.call(this,"attribute vec2 avertexposition;\nattribute vec2 atexturecoord;\n\nuniform mat3 projectionmatrix;\n\nvarying vec2 vtexturecoord;\n\nvoid main(void)\n{\n    gl_position = vec4((projectionmatrix * vec3(avertexposition, 1.0)).xy, 0.0, 1.0);\n    vtexturecoord = atexturecoord;\n}","varying vec2 vtexturecoord;\nuniform sampler2d usampler;\nuniform float m[20];\nuniform float ualpha;\n\nvoid main(void)\n{\n    vec4 c = texture2d(usampler, vtexturecoord);\n\n    if (ualpha == 0.0) {\n        gl_fragcolor = c;\n        return;\n    }\n\n    // un-premultiply alpha before applying the color matrix. see issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, ualpha);\n\n    // premultiply alpha again.\n    rgb *= result.a;\n\n    gl_fragcolor = vec4(rgb, result.a);\n}\n"));return r.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],r.alpha=1,r}return s(e,t),e.prototype._loadmatrix=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t;e&&(this._multiply(r,this.uniforms.m,t),r=this._colormatrix(r)),this.uniforms.m=r},e.prototype._multiply=function(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t},e.prototype._colormatrix=function(t){var e=new float32array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadmatrix(r,e)},e.prototype.greyscale=function(t,e){var r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadmatrix(r,e)},e.prototype.blackandwhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadmatrix(e,t)},e.prototype.hue=function(t,e){t=(t||0)/180*math.pi;var r=math.cos(t),n=math.sin(t),i=math.sqrt,o=1/3,s=i(o),a=r+(1-r)*o,u=o*(1-r)-s*n,h=o*(1-r)+s*n,l=o*(1-r)+s*n,c=r+o*(1-r),d=o*(1-r)-s*n,f=o*(1-r)-s*n,p=o*(1-r)+s*n,v=r+o*(1-r),y=[a,u,h,0,0,l,c,d,0,0,f,p,v,0,0,0,0,0,1,0];this._loadmatrix(y,e)},e.prototype.contrast=function(t,e){var r=(t||0)+1,n=-128*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadmatrix(i,e)},e.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],r=2*t/3+1,n=(r-1)*-.5,i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadmatrix(i,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){var e=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadmatrix(e,t)},e.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadmatrix(e,t)},e.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadmatrix(e,t)},e.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadmatrix(e,t)},e.prototype.tobgr=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadmatrix(e,t)},e.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadmatrix(e,t)},e.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadmatrix(e,t)},e.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadmatrix(e,t)},e.prototype.colortone=function(t,e,r,n,i){t=t||.2,e=e||.15,r=r||16770432,n=n||3375104;var o=(r>>16&255)/255,s=(r>>8&255)/255,a=(255&r)/255,u=(n>>16&255)/255,h=(n>>8&255)/255,l=(255&n)/255,c=[.3,.59,.11,0,0,o,s,a,t,0,u,h,l,e,0,o-u,s-h,a-l,0,0];this._loadmatrix(c,i)},e.prototype.night=function(t,e){t=t||.1;var r=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadmatrix(r,e)},e.prototype.predator=function(t,e){var r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadmatrix(r,e)},e.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadmatrix(e,t)},e.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadmatrix(t,!1)},a(e,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.ualpha},set:function(t){this.uniforms.ualpha=t}}]),e}(h.filter));r.default=l,l.prototype.grayscale=l.prototype.greyscale},{"../../core":63,path:22}],147:[function(t,e,r){"use strict";function n(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("../../core"),h=n(u),l=(t("path"),function(t){function e(r,n){i(this,e);var s=new h.matrix;r.renderable=!1;var a=o(this,t.call(this,"attribute vec2 avertexposition;\nattribute vec2 atexturecoord;\n\nuniform mat3 projectionmatrix;\nuniform mat3 filtermatrix;\n\nvarying vec2 vtexturecoord;\nvarying vec2 vfiltercoord;\n\nvoid main(void)\n{\n   gl_position = vec4((projectionmatrix * vec3(avertexposition, 1.0)).xy, 0.0, 1.0);\n   vfiltercoord = ( filtermatrix * vec3( atexturecoord, 1.0)  ).xy;\n   vtexturecoord = atexturecoord;\n}","varying vec2 vfiltercoord;\nvarying vec2 vtexturecoord;\n\nuniform vec2 scale;\n\nuniform sampler2d usampler;\nuniform sampler2d mapsampler;\n\nuniform vec4 filterclamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2d(mapsampler, vfiltercoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_fragcolor = texture2d(usampler, clamp(vec2(vtexturecoord.x + map.x, vtexturecoord.y + map.y), filterclamp.xy, filterclamp.zw));\n}\n"));return a.masksprite=r,a.maskmatrix=s,a.uniforms.mapsampler=r._texture,a.uniforms.filtermatrix=s,a.uniforms.scale={x:1,y:1},null!==n&&void 0!==n||(n=20),a.scale=new h.point(n,n),a}return s(e,t),e.prototype.apply=function(t,e,r){var n=1/r.destinationframe.width*(r.size.width/e.size.width);this.uniforms.filtermatrix=t.calculatespritematrix(this.maskmatrix,this.masksprite),this.uniforms.scale.x=this.scale.x*n,this.uniforms.scale.y=this.scale.y*n,t.applyfilter(this,e,r)},a(e,[{key:"map",get:function(){return this.uniforms.mapsampler},set:function(t){this.uniforms.mapsampler=t}}]),e}(h.filter));r.default=l},{"../../core":63,path:22}],148:[function(t,e,r){"use strict";function n(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=t("../../core"),u=n(a),h=(t("path"),function(t){function e(){return i(this,e),o(this,t.call(this,"\nattribute vec2 avertexposition;\nattribute vec2 atexturecoord;\n\nuniform mat3 projectionmatrix;\n\nvarying vec2 v_rgbnw;\nvarying vec2 v_rgbne;\nvarying vec2 v_rgbsw;\nvarying vec2 v_rgbse;\nvarying vec2 v_rgbm;\n\nuniform vec4 filterarea;\n\nvarying vec2 vtexturecoord;\n\nvec2 mapcoord( vec2 coord )\n{\n    coord *= filterarea.xy;\n    coord += filterarea.zw;\n\n    return coord;\n}\n\nvec2 unmapcoord( vec2 coord )\n{\n    coord -= filterarea.zw;\n    coord /= filterarea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragcoord, vec2 resolution,\n               out vec2 v_rgbnw, out vec2 v_rgbne,\n               out vec2 v_rgbsw, out vec2 v_rgbse,\n               out vec2 v_rgbm) {\n    vec2 inversevp = 1.0 / resolution.xy;\n    v_rgbnw = (fragcoord + vec2(-1.0, -1.0)) * inversevp;\n    v_rgbne = (fragcoord + vec2(1.0, -1.0)) * inversevp;\n    v_rgbsw = (fragcoord + vec2(-1.0, 1.0)) * inversevp;\n    v_rgbse = (fragcoord + vec2(1.0, 1.0)) * inversevp;\n    v_rgbm = vec2(fragcoord * inversevp);\n}\n\nvoid main(void) {\n\n   gl_position = vec4((projectionmatrix * vec3(avertexposition, 1.0)).xy, 0.0, 1.0);\n\n   vtexturecoord = atexturecoord;\n\n   vec2 fragcoord = vtexturecoord * filterarea.xy;\n\n   texcoords(fragcoord, filterarea.xy, v_rgbnw, v_rgbne, v_rgbsw, v_rgbse, v_rgbm);\n}",'varying vec2 v_rgbnw;\nvarying vec2 v_rgbne;\nvarying vec2 v_rgbsw;\nvarying vec2 v_rgbse;\nvarying vec2 v_rgbm;\n\nvarying vec2 vtexturecoord;\nuniform sampler2d usampler;\nuniform vec4 filterarea;\n\n/**\n basic fxaa implementation based on the code on geeks3d.com with the\n modification that the texture2dlod stuff was removed since it\'s\n unsupported by webgl.\n \n --\n \n from:\n https://github.com/mitsuhiko/webgl-meincraft\n \n copyright (c) 2011 by armin ronacher.\n \n some rights reserved.\n \n redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * the names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n this software is provided by the copyright holders and contributors\n "as is" and any express or implied warranties, including, but not\n limited to, the implied warranties of merchantability and fitness for\n a particular purpose are disclaimed. in no event shall the copyright\n owner or contributors be liable for any direct, indirect, incidental,\n special, exemplary, or consequential damages (including, but not\n limited to, procurement of substitute goods or services; loss of use,\n data, or profits; or business interruption) however caused and on any\n theory of liability, whether in contract, strict liability, or tort\n (including negligence or otherwise) arising in any way out of the use\n of this software, even if advised of the possibility of such damage.\n */\n\n#ifndef fxaa_reduce_min\n#define fxaa_reduce_min   (1.0/ 128.0)\n#endif\n#ifndef fxaa_reduce_mul\n#define fxaa_reduce_mul   (1.0 / 8.0)\n#endif\n#ifndef fxaa_span_max\n#define fxaa_span_max     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2d tex, vec2 fragcoord, vec2 resolution,\n          vec2 v_rgbnw, vec2 v_rgbne,\n          vec2 v_rgbsw, vec2 v_rgbse,\n          vec2 v_rgbm) {\n    vec4 color;\n    mediump vec2 inversevp = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbnw = texture2d(tex, v_rgbnw).xyz;\n    vec3 rgbne = texture2d(tex, v_rgbne).xyz;\n    vec3 rgbsw = texture2d(tex, v_rgbsw).xyz;\n    vec3 rgbse = texture2d(tex, v_rgbse).xyz;\n    vec4 texcolor = texture2d(tex, v_rgbm);\n    vec3 rgbm  = texcolor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumanw = dot(rgbnw, luma);\n    float lumane = dot(rgbne, luma);\n    float lumasw = dot(rgbsw, luma);\n    float lumase = dot(rgbse, luma);\n    float lumam  = dot(rgbm,  luma);\n    float lumamin = min(lumam, min(min(lumanw, lumane), min(lumasw, lumase)));\n    float lumamax = max(lumam, max(max(lumanw, lumane), max(lumasw, lumase)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumanw + lumane) - (lumasw + lumase));\n    dir.y =  ((lumanw + lumasw) - (lumane + lumase));\n    \n    float dirreduce = max((lumanw + lumane + lumasw + lumase) *\n                          (0.25 * fxaa_reduce_mul), fxaa_reduce_min);\n    \n    float rcpdirmin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirreduce);\n    dir = min(vec2(fxaa_span_max, fxaa_span_max),\n              max(vec2(-fxaa_span_max, -fxaa_span_max),\n                  dir * rcpdirmin)) * inversevp;\n    \n    vec3 rgba = 0.5 * (\n                       texture2d(tex, fragcoord * inversevp + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2d(tex, fragcoord * inversevp + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbb = rgba * 0.5 + 0.25 * (\n                                     texture2d(tex, fragcoord * inversevp + dir * -0.5).xyz +\n                                     texture2d(tex, fragcoord * inversevp + dir * 0.5).xyz);\n    \n    float lumab = dot(rgbb, luma);\n    if ((lumab < lumamin) || (lumab > lumamax))\n        color = vec4(rgba, texcolor.a);\n    else\n        color = vec4(rgbb, texcolor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragcoord = vtexturecoord * filterarea.xy;\n\n      vec4 color;\n\n    color = fxaa(usampler, fragcoord, filterarea.xy, v_rgbnw, v_rgbne, v_rgbsw, v_rgbse, v_rgbm);\n\n      gl_fragcolor = color;\n}\n'))}return s(e,t),e}(u.filter));r.default=h},{"../../core":63,path:22}],149:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}r.__esmodule=!0;var i=t("./fxaa/fxaafilter");object.defineproperty(r,"fxaafilter",{enumerable:!0,get:function(){return n(i).default}});var o=t("./noise/noisefilter");object.defineproperty(r,"noisefilter",{enumerable:!0,get:function(){return n(o).default}});var s=t("./displacement/displacementfilter");object.defineproperty(r,"displacementfilter",{enumerable:!0,get:function(){return n(s).default}});var a=t("./blur/blurfilter");object.defineproperty(r,"blurfilter",{enumerable:!0,get:function(){return n(a).default}});var u=t("./blur/blurxfilter");object.defineproperty(r,"blurxfilter",{enumerable:!0,get:function(){return n(u).default}});var h=t("./blur/bluryfilter");object.defineproperty(r,"bluryfilter",{enumerable:!0,get:function(){return n(h).default}});var l=t("./colormatrix/colormatrixfilter");object.defineproperty(r,"colormatrixfilter",{enumerable:!0,get:function(){return n(l).default}});var c=t("./void/voidfilter");object.defineproperty(r,"voidfilter",{enumerable:!0,get:function(){return n(c).default}})},{"./blur/blurfilter":140,"./blur/blurxfilter":141,"./blur/bluryfilter":142,"./colormatrix/colormatrixfilter":146,"./displacement/displacementfilter":147,"./fxaa/fxaafilter":148,"./noise/noisefilter":150,"./void/voidfilter":151}],150:[function(t,e,r){"use strict";function n(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("../../core"),h=n(u),l=(t("path"),function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:math.random();i(this,e);var s=o(this,t.call(this,"attribute vec2 avertexposition;\nattribute vec2 atexturecoord;\n\nuniform mat3 projectionmatrix;\n\nvarying vec2 vtexturecoord;\n\nvoid main(void)\n{\n    gl_position = vec4((projectionmatrix * vec3(avertexposition, 1.0)).xy, 0.0, 1.0);\n    vtexturecoord = atexturecoord;\n}","precision highp float;\n\nvarying vec2 vtexturecoord;\nvarying vec4 vcolor;\n\nuniform float unoise;\nuniform float useed;\nuniform sampler2d usampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2d(usampler, vtexturecoord);\n    float randomvalue = rand(gl_fragcoord.xy * useed);\n    float diff = (randomvalue - 0.5) * unoise;\n\n    // un-premultiply alpha before applying the color matrix. see issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_fragcolor = color;\n}\n"));return s.noise=r,s.seed=n,s}return s(e,t),a(e,[{key:"noise",get:function(){return this.uniforms.unoise},set:function(t){this.uniforms.unoise=t}},{key:"seed",get:function(){return this.uniforms.useed},set:function(t){this.uniforms.useed=t}}]),e}(h.filter));r.default=l},{"../../core":63,path:22}],151:[function(t,e,r){"use strict";function n(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=t("../../core"),u=n(a),h=(t("path"),function(t){function e(){i(this,e);var r=o(this,t.call(this,"attribute vec2 avertexposition;\nattribute vec2 atexturecoord;\n\nuniform mat3 projectionmatrix;\n\nvarying vec2 vtexturecoord;\n\nvoid main(void)\n{\n    gl_position = vec4((projectionmatrix * vec3(avertexposition, 1.0)).xy, 0.0, 1.0);\n    vtexturecoord = atexturecoord;\n}","varying vec2 vtexturecoord;\n\nuniform sampler2d usampler;\n\nvoid main(void)\n{\n   gl_fragcolor = texture2d(usampler, vtexturecoord);\n}\n"));return r.glshaderkey="void",r}return s(e,t),e}(u.filter));r.default=h},{"../../core":63,path:22}],152:[function(t,e,r){"use strict";function n(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=t("../core"),s=n(o),a=function(){function t(){i(this,t),this.global=new s.point,this.target=null,this.originalevent=null,this.identifier=null}return t.prototype.getlocalposition=function(t,e,r){return t.worldtransform.applyinverse(r||this.global,e)},t}();r.default=a},{"../core":63}],153:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var i=function(){function t(){n(this,t),this.stopped=!1,this.target=null,this.currenttarget=null,this.type=null,this.data=null}return t.prototype.stoppropagation=function(){this.stopped=!0},t.prototype._reset=function(){this.stopped=!1,this.currenttarget=null,this.target=null},t}();r.default=i},{}],154:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function s(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var u="function"==typeof symbol&&"symbol"==typeof symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof symbol&&t.constructor===symbol&&t!==symbol.prototype?"symbol":typeof t},h=t("../core"),l=i(h),c=t("./interactiondata"),d=n(c),f=t("./interactionevent"),p=n(f),v=t("./interactiontrackingdata"),y=n(v),g=t("eventemitter3"),m=n(g),_=t("./interactivetarget"),b=n(_);l.utils.mixins.delaymixin(l.displayobject.prototype,b.default);var x="mouse",t={target:null,data:{global:null}},w=function(t){function e(r,n){o(this,e);var i=s(this,t.call(this));return n=n||{},i.renderer=r,i.autopreventdefault=void 0===n.autopreventdefault||n.autopreventdefault,i.interactionfrequency=n.interactionfrequency||10,i.mouse=new d.default,i.mouse.identifier=x,i.mouse.global.set(-999999),i.activeinteractiondata={},i.activeinteractiondata[x]=i.mouse,i.interactiondatapool=[],i.eventdata=new p.default,i.interactiondomelement=null,i.movewheninside=!1,i.eventsadded=!1,i.mouseoverrenderer=!1,i.supportstouchevents="ontouchstart"in window,i.supportspointerevents=!!window.pointerevent,i.onpointerup=i.onpointerup.bind(i),i.processpointerup=i.processpointerup.bind(i),i.onpointercancel=i.onpointercancel.bind(i),i.processpointercancel=i.processpointercancel.bind(i),i.onpointerdown=i.onpointerdown.bind(i),i.processpointerdown=i.processpointerdown.bind(i),i.onpointermove=i.onpointermove.bind(i),i.processpointermove=i.processpointermove.bind(i),i.onpointerout=i.onpointerout.bind(i),i.processpointeroverout=i.processpointeroverout.bind(i),i.onpointerover=i.onpointerover.bind(i),i.cursorstyles={default:"inherit",pointer:"pointer"},i.currentcursormode=null,i.cursor=null,i._temppoint=new l.point,i.resolution=1,i.settargetelement(i.renderer.view,i.renderer.resolution),i}return a(e,t),e.prototype.hittest=function(t,e){return t.target=null,t.data.global=t,e||(e=this.renderer._lastobjectrendered),this.processinteractive(t,e,null,!0),t.target},e.prototype.settargetelement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeevents(),this.interactiondomelement=t,this.resolution=e,this.addevents()},e.prototype.addevents=function(){this.interactiondomelement&&(l.ticker.shared.add(this.update,this,l.update_priority.interaction),window.navigator.mspointerenabled?(this.interactiondomelement.style["-ms-content-zooming"]="none",this.interactiondomelement.style["-ms-touch-action"]="none"):this.supportspointerevents&&(this.interactiondomelement.style["touch-action"]="none"),this.supportspointerevents?(window.document.addeventlistener("pointermove",this.onpointermove,!0),this.interactiondomelement.addeventlistener("pointerdown",this.onpointerdown,!0),this.interactiondomelement.addeventlistener("pointerleave",this.onpointerout,!0),this.interactiondomelement.addeventlistener("pointerover",this.onpointerover,!0),window.addeventlistener("pointercancel",this.onpointercancel,!0),window.addeventlistener("pointerup",this.onpointerup,!0)):(window.document.addeventlistener("mousemove",this.onpointermove,!0),
this.interactiondomelement.addeventlistener("mousedown",this.onpointerdown,!0),this.interactiondomelement.addeventlistener("mouseout",this.onpointerout,!0),this.interactiondomelement.addeventlistener("mouseover",this.onpointerover,!0),window.addeventlistener("mouseup",this.onpointerup,!0),this.supportstouchevents&&(this.interactiondomelement.addeventlistener("touchstart",this.onpointerdown,!0),this.interactiondomelement.addeventlistener("touchcancel",this.onpointercancel,!0),this.interactiondomelement.addeventlistener("touchend",this.onpointerup,!0),this.interactiondomelement.addeventlistener("touchmove",this.onpointermove,!0))),this.eventsadded=!0)},e.prototype.removeevents=function(){this.interactiondomelement&&(l.ticker.shared.remove(this.update,this),window.navigator.mspointerenabled?(this.interactiondomelement.style["-ms-content-zooming"]="",this.interactiondomelement.style["-ms-touch-action"]=""):this.supportspointerevents&&(this.interactiondomelement.style["touch-action"]=""),this.supportspointerevents?(window.document.removeeventlistener("pointermove",this.onpointermove,!0),this.interactiondomelement.removeeventlistener("pointerdown",this.onpointerdown,!0),this.interactiondomelement.removeeventlistener("pointerleave",this.onpointerout,!0),this.interactiondomelement.removeeventlistener("pointerover",this.onpointerover,!0),window.removeeventlistener("pointercancel",this.onpointercancel,!0),window.removeeventlistener("pointerup",this.onpointerup,!0)):(window.document.removeeventlistener("mousemove",this.onpointermove,!0),this.interactiondomelement.removeeventlistener("mousedown",this.onpointerdown,!0),this.interactiondomelement.removeeventlistener("mouseout",this.onpointerout,!0),this.interactiondomelement.removeeventlistener("mouseover",this.onpointerover,!0),window.removeeventlistener("mouseup",this.onpointerup,!0),this.supportstouchevents&&(this.interactiondomelement.removeeventlistener("touchstart",this.onpointerdown,!0),this.interactiondomelement.removeeventlistener("touchcancel",this.onpointercancel,!0),this.interactiondomelement.removeeventlistener("touchend",this.onpointerup,!0),this.interactiondomelement.removeeventlistener("touchmove",this.onpointermove,!0))),this.interactiondomelement=null,this.eventsadded=!1)},e.prototype.update=function(t){if(this._deltatime+=t,!(this._deltatime<this.interactionfrequency)&&(this._deltatime=0,this.interactiondomelement)){if(this.didmove)return void(this.didmove=!1);this.cursor=null;for(var e in this.activeinteractiondata)if(this.activeinteractiondata.hasownproperty(e)){var r=this.activeinteractiondata[e];if(r.originalevent&&"touch"!==r.pointertype){var n=this.configureinteractioneventfordomevent(this.eventdata,r.originalevent,r);this.processinteractive(n,this.renderer._lastobjectrendered,this.processpointeroverout,!0)}}this.setcursormode(this.cursor)}},e.prototype.setcursormode=function(t){if(t=t||"default",this.currentcursormode!==t){this.currentcursormode=t;var e=this.cursorstyles[t];if(e)switch("undefined"==typeof e?"undefined":u(e)){case"string":this.interactiondomelement.style.cursor=e;break;case"function":e(t);break;case"object":object.assign(this.interactiondomelement.style,e)}}},e.prototype.dispatchevent=function(t,e,r){r.stopped||(r.currenttarget=t,r.type=e,t.emit(e,r),t[e]&&t[e](r))},e.prototype.mappositiontopoint=function(t,e,r){var n=void 0;n=this.interactiondomelement.parentelement?this.interactiondomelement.getboundingclientrect():{x:0,y:0,width:0,height:0};var i=navigator.iscocoonjs?this.resolution:1/this.resolution;t.x=(e-n.left)*(this.interactiondomelement.width/n.width)*i,t.y=(r-n.top)*(this.interactiondomelement.height/n.height)*i},e.prototype.processinteractive=function(t,e,r,n,i){if(!e||!e.visible)return!1;var o=t.data.global;i=e.interactive||i;var s=!1,a=i;if(e.hitarea?a=!1:n&&e._mask&&(e._mask.containspoint(o)||(n=!1)),e.interactivechildren&&e.children)for(var u=e.children,h=u.length-1;h>=0;h--){var l=u[h],c=this.processinteractive(t,l,r,n,a);if(c){if(!l.parent)continue;a=!1,c&&(t.target&&(n=!1),s=!0)}}return i&&(n&&!t.target&&(e.hitarea?(e.worldtransform.applyinverse(o,this._temppoint),e.hitarea.contains(this._temppoint.x,this._temppoint.y)&&(s=!0)):e.containspoint&&e.containspoint(o)&&(s=!0)),e.interactive&&(s&&!t.target&&(t.target=e),r&&r(t,e,!!s))),s},e.prototype.onpointerdown=function(t){var e=this.normalizetopointerdata(t);this.autopreventdefault&&e[0].isnormalized&&t.preventdefault();for(var r=e.length,n=0;n<r;n++){var i=e[n],o=this.getinteractiondataforpointerid(i),s=this.configureinteractioneventfordomevent(this.eventdata,i,o);if(s.data.originalevent=t,this.processinteractive(s,this.renderer._lastobjectrendered,this.processpointerdown,!0),this.emit("pointerdown",s),"touch"===i.pointertype)this.emit("touchstart",s);else if("mouse"===i.pointertype){var a=2===i.button||3===i.which;this.emit(a?"rightdown":"mousedown",this.eventdata)}}},e.prototype.processpointerdown=function(t,e,r){var n=t.data.originalevent,i=t.data.identifier;if(r)if(e.trackedpointers[i]||(e.trackedpointers[i]=new y.default(i)),this.dispatchevent(e,"pointerdown",t),"touchstart"===n.type||"touch"===n.pointertype)this.dispatchevent(e,"touchstart",t);else if("mousedown"===n.type||"mouse"===n.pointertype){var o=2===n.button||3===n.which;o?e.trackedpointers[i].rightdown=!0:e.trackedpointers[i].leftdown=!0,this.dispatchevent(e,o?"rightdown":"mousedown",t)}},e.prototype.onpointercomplete=function(t,e,r){for(var n=this.normalizetopointerdata(t),i=n.length,o=t.target!==this.interactiondomelement?"outside":"",s=0;s<i;s++){var a=n[s],u=this.getinteractiondataforpointerid(a),h=this.configureinteractioneventfordomevent(this.eventdata,a,u);if(h.data.originalevent=t,this.processinteractive(h,this.renderer._lastobjectrendered,r,e||!o),this.emit(e?"pointercancel":"pointerup"+o,h),"mouse"===a.pointertype){var l=2===a.button||3===a.which;this.emit(l?"rightup"+o:"mouseup"+o,h)}else"touch"===a.pointertype&&(this.emit(e?"touchcancel":"touchend"+o,h),this.releaseinteractiondataforpointerid(a.pointerid,u))}},e.prototype.onpointercancel=function(t){this.onpointercomplete(t,!0,this.processpointercancel)},e.prototype.processpointercancel=function(t,e){var r=t.data.originalevent,n=t.data.identifier;void 0!==e.trackedpointers[n]&&(delete e.trackedpointers[n],this.dispatchevent(e,"pointercancel",t),"touchcancel"!==r.type&&"touch"!==r.pointertype||this.dispatchevent(e,"touchcancel",t))},e.prototype.onpointerup=function(t){this.onpointercomplete(t,!1,this.processpointerup)},e.prototype.processpointerup=function(t,e,r){var n=t.data.originalevent,i=t.data.identifier,o=e.trackedpointers[i],s="touchend"===n.type||"touch"===n.pointertype,a=0===n.type.indexof("mouse")||"mouse"===n.pointertype;if(a){var u=2===n.button||3===n.which,h=y.default.flags,l=u?h.right_down:h.left_down,c=void 0!==o&&o.flags&l;r?(this.dispatchevent(e,u?"rightup":"mouseup",t),c&&this.dispatchevent(e,u?"rightclick":"click",t)):c&&this.dispatchevent(e,u?"rightupoutside":"mouseupoutside",t),o&&(u?o.rightdown=!1:o.leftdown=!1)}r?(this.dispatchevent(e,"pointerup",t),s&&this.dispatchevent(e,"touchend",t),o&&(this.dispatchevent(e,"pointertap",t),s&&(this.dispatchevent(e,"tap",t),o.over=!1))):o&&(this.dispatchevent(e,"pointerupoutside",t),s&&this.dispatchevent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedpointers[i]},e.prototype.onpointermove=function(t){var e=this.normalizetopointerdata(t);"mouse"===e[0].pointertype&&(this.didmove=!0,this.cursor=null);for(var r=e.length,n=0;n<r;n++){var i=e[n],o=this.getinteractiondataforpointerid(i),s=this.configureinteractioneventfordomevent(this.eventdata,i,o);s.data.originalevent=t;var a="touch"!==i.pointertype||this.movewheninside;this.processinteractive(s,this.renderer._lastobjectrendered,this.processpointermove,a),this.emit("pointermove",s),"touch"===i.pointertype&&this.emit("touchmove",s),"mouse"===i.pointertype&&this.emit("mousemove",s)}"mouse"===e[0].pointertype&&this.setcursormode(this.cursor)},e.prototype.processpointermove=function(t,e,r){var n=t.data.originalevent,i="touchmove"===n.type||"touch"===n.pointertype,o="mousemove"===n.type||"mouse"===n.pointertype;o&&this.processpointeroverout(t,e,r),this.movewheninside&&!r||(this.dispatchevent(e,"pointermove",t),i&&this.dispatchevent(e,"touchmove",t),o&&this.dispatchevent(e,"mousemove",t))},e.prototype.onpointerout=function(t){var e=this.normalizetopointerdata(t),r=e[0];"mouse"===r.pointertype&&(this.mouseoverrenderer=!1,this.setcursormode(null));var n=this.getinteractiondataforpointerid(r),i=this.configureinteractioneventfordomevent(this.eventdata,r,n);i.data.originalevent=r,this.processinteractive(i,this.renderer._lastobjectrendered,this.processpointeroverout,!1),this.emit("pointerout",i),"mouse"===r.pointertype?this.emit("mouseout",i):this.releaseinteractiondataforpointerid(n.identifier)},e.prototype.processpointeroverout=function(t,e,r){var n=t.data.originalevent,i=t.data.identifier,o="mouseover"===n.type||"mouseout"===n.type||"mouse"===n.pointertype,s=e.trackedpointers[i];r&&!s&&(s=e.trackedpointers[i]=new y.default(i)),void 0!==s&&(r&&this.mouseoverrenderer?(s.over||(s.over=!0,this.dispatchevent(e,"pointerover",t),o&&this.dispatchevent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchevent(e,"pointerout",this.eventdata),o&&this.dispatchevent(e,"mouseout",t),s.none&&delete e.trackedpointers[i]))},e.prototype.onpointerover=function(t){var e=this.normalizetopointerdata(t),r=e[0],n=this.getinteractiondataforpointerid(r),i=this.configureinteractioneventfordomevent(this.eventdata,r,n);i.data.originalevent=r,"mouse"===r.pointertype&&(this.mouseoverrenderer=!0),this.emit("pointerover",i),"mouse"===r.pointertype&&this.emit("mouseover",i)},e.prototype.getinteractiondataforpointerid=function(t){var e=t.pointerid;if(e===x||"mouse"===t.pointertype)return this.mouse;if(this.activeinteractiondata[e])return this.activeinteractiondata[e];var r=this.interactiondatapool.pop()||new d.default;return r.identifier=e,this.activeinteractiondata[e]=r,r},e.prototype.releaseinteractiondataforpointerid=function(t){var e=this.activeinteractiondata[t];e&&(delete this.activeinteractiondata[t],this.interactiondatapool.push(e))},e.prototype.configureinteractioneventfordomevent=function(t,e,r){return t.data=r,this.mappositiontopoint(r.global,e.clientx,e.clienty),navigator.iscocoonjs&&"touch"===e.pointertype&&(r.global.x=r.global.x/this.resolution,r.global.y=r.global.y/this.resolution),"touch"===e.pointertype&&(e.globalx=r.global.x,e.globaly=r.global.y),r.originalevent=e,t._reset(),t},e.prototype.normalizetopointerdata=function(t){var e=[];if(this.supportstouchevents&&t instanceof touchevent)for(var r=0,n=t.changedtouches.length;r<n;r++){var i=t.changedtouches[r];"undefined"==typeof i.button&&(i.button=t.touches.length?1:0),"undefined"==typeof i.buttons&&(i.buttons=t.touches.length?1:0),"undefined"==typeof i.isprimary&&(i.isprimary=1===t.touches.length),"undefined"==typeof i.width&&(i.width=i.radiusx||1),"undefined"==typeof i.height&&(i.height=i.radiusy||1),"undefined"==typeof i.tiltx&&(i.tiltx=0),"undefined"==typeof i.tilty&&(i.tilty=0),"undefined"==typeof i.pointertype&&(i.pointertype="touch"),"undefined"==typeof i.pointerid&&(i.pointerid=i.identifier||0),"undefined"==typeof i.pressure&&(i.pressure=i.force||.5),"undefined"==typeof i.rotation&&(i.rotation=i.rotationangle||0),"undefined"==typeof i.layerx&&(i.layerx=i.offsetx=i.clientx),"undefined"==typeof i.layery&&(i.layery=i.offsety=i.clienty),i.isnormalized=!0,e.push(i)}else!(t instanceof mouseevent)||this.supportspointerevents&&t instanceof window.pointerevent?e.push(t):("undefined"==typeof t.isprimary&&(t.isprimary=!0),"undefined"==typeof t.width&&(t.width=1),"undefined"==typeof t.height&&(t.height=1),"undefined"==typeof t.tiltx&&(t.tiltx=0),"undefined"==typeof t.tilty&&(t.tilty=0),"undefined"==typeof t.pointertype&&(t.pointertype="mouse"),"undefined"==typeof t.pointerid&&(t.pointerid=x),"undefined"==typeof t.pressure&&(t.pressure=.5),"undefined"==typeof t.rotation&&(t.rotation=0),t.isnormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeevents(),this.removealllisteners(),this.renderer=null,this.mouse=null,this.eventdata=null,this.interactiondomelement=null,this.onpointerdown=null,this.processpointerdown=null,this.onpointerup=null,this.processpointerup=null,this.onpointercancel=null,this.processpointercancel=null,this.onpointermove=null,this.processpointermove=null,this.onpointerout=null,this.processpointeroverout=null,this.onpointerover=null,this._temppoint=null},e}(m.default);r.default=w,l.webglrenderer.registerplugin("interaction",w),l.canvasrenderer.registerplugin("interaction",w)},{"../core":63,"./interactiondata":152,"./interactionevent":153,"./interactiontrackingdata":155,"./interactivetarget":157,eventemitter3:3}],155:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(e){n(this,t),this._pointerid=e,this._flags=t.flags.none}return t.prototype._doset=function(t,e){e?this._flags=this._flags|t:this._flags=this._flags&~t},i(t,[{key:"pointerid",get:function(){return this._pointerid}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.flags.none}},{key:"over",get:function(){return 0!==(this._flags&this.constructor.flags.over)},set:function(t){this._doset(this.constructor.flags.over,t)}},{key:"rightdown",get:function(){return 0!==(this._flags&this.constructor.flags.right_down)},set:function(t){this._doset(this.constructor.flags.right_down,t)}},{key:"leftdown",get:function(){return 0!==(this._flags&this.constructor.flags.left_down)},set:function(t){this._doset(this.constructor.flags.left_down,t)}}]),t}();r.default=o,o.flags=object.freeze({none:0,over:1,left_down:2,right_down:4})},{}],156:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}r.__esmodule=!0;var i=t("./interactiondata");object.defineproperty(r,"interactiondata",{enumerable:!0,get:function(){return n(i).default}});var o=t("./interactionmanager");object.defineproperty(r,"interactionmanager",{enumerable:!0,get:function(){return n(o).default}});var s=t("./interactivetarget");object.defineproperty(r,"interactivetarget",{enumerable:!0,get:function(){return n(s).default}})},{"./interactiondata":152,"./interactionmanager":154,"./interactivetarget":157}],157:[function(t,e,r){"use strict";r.__esmodule=!0,r.default={interactive:!1,interactivechildren:!0,hitarea:null,get buttonmode(){return"pointer"===this.cursor},set buttonmode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedpointers(){return void 0===this._trackedpointers&&(this._trackedpointers={}),this._trackedpointers},_trackedpointers:void 0}},{}],158:[function(t,e,r){"use strict";function n(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){t.bitmapfont=h.bitmaptext.registerfont(t.data,e)}r.__esmodule=!0,r.parse=i,r.default=function(){return function(t,e){if(!t.data||t.type!==u.resource.type.xml)return void e();if(0===t.data.getelementsbytagname("page").length||0===t.data.getelementsbytagname("info").length||null===t.data.getelementsbytagname("info")[0].getattribute("face"))return void e();var r=t.isdataurl?"":s.dirname(t.url);t.isdataurl&&("."===r&&(r=""),this.baseurl&&r&&("/"===this.baseurl.charat(this.baseurl.length-1)&&(r+="/"),r=r.replace(this.baseurl,""))),r&&"/"!==r.charat(r.length-1)&&(r+="/");var n=r+t.data.getelementsbytagname("page")[0].getattribute("file");if(a.utils.texturecache[n])i(t,a.utils.texturecache[n]),e();else{var o={crossorigin:t.crossorigin,loadtype:u.resource.load_type.image,metadata:t.metadata.imagemetadata,parentresource:t};this.add(t.name+"_image",n,o,function(r){i(t,r.texture),e()})}}};var o=t("path"),s=n(o),a=t("../core"),u=t("resource-loader"),h=t("../extras")},{"../core":63,"../extras":138,path:22,"resource-loader":34}],159:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}r.__esmodule=!0,r.shared=r.resource=r.textureparser=r.getresourcepath=r.spritesheetparser=r.parsebitmapfontdata=r.bitmapfontparser=r.loader=void 0;var i=t("./bitmapfontparser");object.defineproperty(r,"bitmapfontparser",{enumerable:!0,get:function(){return n(i).default}}),object.defineproperty(r,"parsebitmapfontdata",{enumerable:!0,get:function(){return i.parse}});var o=t("./spritesheetparser");object.defineproperty(r,"spritesheetparser",{enumerable:!0,get:function(){return n(o).default}}),object.defineproperty(r,"getresourcepath",{enumerable:!0,get:function(){return o.getresourcepath}});var s=t("./textureparser");object.defineproperty(r,"textureparser",{enumerable:!0,get:function(){return n(s).default}});var a=t("resource-loader");object.defineproperty(r,"resource",{enumerable:!0,get:function(){return a.resource}});var u=t("../core/application"),h=n(u),l=t("./loader"),c=n(l);r.loader=c.default;var d=new c.default;d.destroy=function(){},r.shared=d;var f=h.default.prototype;f._loader=null,object.defineproperty(f,"loader",{get:function(){if(!this._loader){var t=this._options.sharedloader;this._loader=t?d:new c.default}return this._loader}}),f._parentdestroy=f.destroy,f.destroy=function(){this._loader&&(this._loader.destroy(),this._loader=null),this._parentdestroy()}},{"../core/application":41,"./bitmapfontparser":158,"./loader":160,"./spritesheetparser":161,"./textureparser":162,"resource-loader":34}],160:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=t("resource-loader"),u=n(a),h=t("resource-loader/lib/middlewares/parsing/blob"),l=t("eventemitter3"),c=n(l),d=t("./textureparser"),f=n(d),p=t("./spritesheetparser"),v=n(p),y=t("./bitmapfontparser"),g=n(y),m=function(t){function e(r,n){i(this,e);var s=o(this,t.call(this,r,n));c.default.call(s);for(var a=0;a<e._piximiddleware.length;++a)s.use(e._piximiddleware[a]());return s.onstart.add(function(t){return s.emit("start",t)}),s.onprogress.add(function(t,e){return s.emit("progress",t,e)}),s.onerror.add(function(t,e,r){return s.emit("error",t,e,r)}),s.onload.add(function(t,e){return s.emit("load",t,e)}),s.oncomplete.add(function(t,e){return s.emit("complete",t,e)}),s}return s(e,t),e.addpiximiddleware=function(t){e._piximiddleware.push(t)},e.prototype.destroy=function(){this.removealllisteners(),this.reset()},e}(u.default);r.default=m;for(var _ in c.default.prototype)m.prototype[_]=c.default.prototype[_];m._piximiddleware=[h.blobmiddlewarefactory,f.default,v.default,g.default];var b=u.default.resource;b.setextensionxhrtype("fnt",b.xhr_response_type.document)},{"./bitmapfontparser":158,"./spritesheetparser":161,"./textureparser":162,eventemitter3:3,"resource-loader":34,"resource-loader/lib/middlewares/parsing/blob":35}],161:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){return t.isdataurl?t.data.meta.image:a.default.resolve(t.url.replace(e,""),t.data.meta.image)}r.__esmodule=!0,r.default=function(){return function(t,e){var r=t.name+"_image";if(!t.data||t.type!==o.resource.type.json||!t.data.frames||this.resources[r])return void e();var n={crossorigin:t.crossorigin,loadtype:o.resource.load_type.image,metadata:t.metadata.imagemetadata,parentresource:t},s=i(t,this.baseurl);this.add(r,s,n,function(r){var n=new u.spritesheet(r.texture.basetexture,t.data,t.url);n.parse(function(){t.spritesheet=n,t.textures=n.textures,e()})})}},r.getresourcepath=i;var o=t("resource-loader"),s=t("url"),a=n(s),u=t("../core")},{"../core":63,"resource-loader":34,url:28}],162:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}r.__esmodule=!0,r.default=function(){return function(t,e){t.data&&t.type===i.resource.type.image&&(t.texture=s.default.fromloader(t.data,t.url,t.name)),e()}};var i=t("resource-loader"),o=t("../core/textures/texture"),s=n(o)},{"../core/textures/texture":113,"resource-loader":34}],163:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function s(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("../core"),l=i(h),c=t("../extras/texturetransform"),d=n(c),f=new l.point,p=new l.polygon,v=function(t){function e(r,n,i,a,u){o(this,e);var h=s(this,t.call(this));return h._texture=r,h.uvs=i||new float32array([0,0,1,0,1,1,0,1]),h.vertices=n||new float32array([0,0,100,0,100,100,0,100]),h.indices=a||new uint16array([0,1,3,2]),h.dirty=0,h.indexdirty=0,h.blendmode=l.blend_modes.normal,h.canvaspadding=0,h.drawmode=u||e.draw_modes.triangle_mesh,h.shader=null,h.tintrgb=new float32array([1,1,1]),h._gldatas={},h._uvtransform=new d.default(r),h.uploaduvtransform=!1,h.pluginname="mesh",h}return a(e,t),e.prototype._renderwebgl=function(t){this.refresh(),t.setobjectrenderer(t.plugins[this.pluginname]),t.plugins[this.pluginname].render(this)},e.prototype._rendercanvas=function(t){this.refresh(),t.plugins[this.pluginname].render(this)},e.prototype._ontextureupdate=function(){this._uvtransform.texture=this._texture,this.refresh()},e.prototype.multiplyuvs=function(){this.uploaduvtransform||this._uvtransform.multiplyuvs(this.uvs)},e.prototype.refresh=function(t){this._uvtransform.update(t)&&this._refresh()},e.prototype._refresh=function(){},e.prototype._calculatebounds=function(){this._bounds.addvertices(this.transform,this.vertices,0,this.vertices.length)},e.prototype.containspoint=function(t){if(!this.getbounds().contains(t.x,t.y))return!1;this.worldtransform.applyinverse(t,f);for(var r=this.vertices,n=p.points,i=this.indices,o=this.indices.length,s=this.drawmode===e.draw_modes.triangles?3:1,a=0;a+2<o;a+=s){var u=2*i[a],h=2*i[a+1],l=2*i[a+2];if(n[0]=r[u],n[1]=r[u+1],n[2]=r[h],n[3]=r[h+1],n[4]=r[l],n[5]=r[l+1],p.contains(f.x,f.y))return!0}return!1},u(e,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.basetexture.hasloaded?this._ontextureupdate():t.once("update",this._ontextureupdate,this)))}},{key:"tint",get:function(){return l.utils.rgb2hex(this.tintrgb)},set:function(t){this.tintrgb=l.utils.hex2rgb(t,this.tintrgb)}}]),e}(l.container);r.default=v,v.draw_modes={triangle_mesh:0,triangles:1}},{"../core":63,"../extras/texturetransform":133}],164:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),object.defineproperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("./plane"),h=n(u),l=10,c=function(t){function e(r,n,s,a,u){i(this,e);var h=o(this,t.call(this,r,4,4)),c=h.uvs;return c[6]=c[14]=c[22]=c[30]=1,c[25]=c[27]=c[29]=c[31]=1,h._origwidth=r.orig.width,h._origheight=r.orig.height,h._uvw=1/h._origwidth,h._uvh=1/h._origheight,h.width=h._origwidth,h.height=h._origheight,c[2]=c[10]=c[18]=c[26]=h._uvw*n,c[4]=c[12]=c[20]=c[28]=1-h._uvw*a,c[9]=c[11]=c[13]=c[15]=h._uvh*s,c[17]=c[19]=c[21]=c[23]=1-h._uvh*u,h.leftwidth="undefined"!=typeof n?n:l,h.rightwidth="undefined"!=typeof a?a:l,h.topheight="undefined"!=typeof s?s:l,h.bottomheight="undefined"!=typeof u?u:l,h.refresh(!0),h}return s(e,t),e.prototype.updatehorizontalvertices=function(){var t=this.vertices;t[9]=t[11]=t[13]=t[15]=this._topheight,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomheight,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateverticalvertices=function(){var t=this.vertices;t[2]=t[10]=t[18]=t[26]=this._leftwidth,t[4]=t[12]=t[20]=t[28]=this._width-this._rightwidth,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._rendercanvas=function(t){var e=t.context;e.globalalpha=this.worldalpha;var r=this.worldtransform,n=t.resolution;t.roundpixels?e.settransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n|0,r.ty*n|0):e.settransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n);var i=this._texture.basetexture,o=i.source,s=i.width,a=i.height;this.drawsegment(e,o,s,a,0,1,10,11),this.drawsegment(e,o,s,a,2,3,12,13),this.drawsegment(e,o,s,a,4,5,14,15),this.drawsegment(e,o,s,a,8,9,18,19),this.drawsegment(e,o,s,a,10,11,20,21),this.drawsegment(e,o,s,a,12,13,22,23),this.drawsegment(e,o,s,a,16,17,26,27),this.drawsegment(e,o,s,a,18,19,28,29),this.drawsegment(e,o,s,a,20,21,30,31)},e.prototype.drawsegment=function(t,e,r,n,i,o,s,a){var u=this.uvs,h=this.vertices,l=(u[s]-u[i])*r,c=(u[a]-u[o])*n,d=h[s]-h[i],f=h[a]-h[o];l<1&&(l=1),c<1&&(c=1),d<1&&(d=1),f<1&&(f=1),t.drawimage(e,u[i]*r,u[o]*n,l,c,h[i],h[o],d,f)},a(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this.updateverticalvertices()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this.updatehorizontalvertices()}},{key:"leftwidth",get:function(){return this._leftwidth},set:function(t){this._leftwidth=t;var e=this.uvs,r=this.vertices;e[2]=e[10]=e[18]=e[26]=this._uvw*t,r[2]=r[10]=r[18]=r[26]=t,this.dirty=!0}},{key:"rightwidth",get:function(){return this._rightwidth},set:function(t){this._rightwidth=t;var e=this.uvs,r=this.vertices;e[4]=e[12]=e[20]=e[28]=1-this._uvw*t,r[4]=r[12]=r[20]=r[28]=this._width-t,this.dirty=!0}},{key:"topheight",get:function(){return this._topheight},set:function(t){this._topheight=t;var e=this.uvs,r=this.vertices;e[9]=e[11]=e[13]=e[15]=this._uvh*t,r[9]=r[11]=r[13]=r[15]=t,this.dirty=!0}},{key:"bottomheight",get:function(){return this._bottomheight},set:function(t){this._bottomheight=t;var e=this.uvs,r=this.vertices;e[17]=e[19]=e[21]=e[23]=1-this._uvh*t,r[17]=r[19]=r[21]=r[23]=this._height-t,this.dirty=!0}}]),e}(h.default);r.default=c},{"./plane":165}],165:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=t("./mesh"),u=n(a),h=function(t){function e(r,n,s){i(this,e);var a=o(this,t.call(this,r));return a._ready=!0,a.verticesx=n||10,a.verticesy=s||10,a.drawmode=u.default.draw_modes.triangles,a.refresh(),a}return s(e,t),e.prototype._refresh=function(){for(var t=this._texture,e=this.verticesx*this.verticesy,r=[],n=[],i=[],o=[],s=this.verticesx-1,a=this.verticesy-1,u=t.width/s,h=t.height/a,l=0;l<e;l++){var c=l%this.verticesx,d=l/this.verticesx|0;r.push(c*u,d*h),i.push(c/s,d/a)}for(var f=s*a,p=0;p<f;p++){var v=p%s,y=p/s|0,g=y*this.verticesx+v,m=y*this.verticesx+v+1,_=(y+1)*this.verticesx+v,b=(y+1)*this.verticesx+v+1;o.push(g,m,_),o.push(m,b,_)}this.vertices=new float32array(r),this.uvs=new float32array(i),this.colors=new float32array(n),this.indices=new uint16array(o),this.indexdirty=!0,this.multiplyuvs()},e.prototype._ontextureupdate=function(){u.default.prototype._ontextureupdate.call(this),this._ready&&this.refresh()},e}(u.default);r.default=h},{"./mesh":163}],166:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=t("./mesh"),u=n(a),h=function(t){function e(r,n){i(this,e);var s=o(this,t.call(this,r));return s.points=n,s.vertices=new float32array(4*n.length),s.uvs=new float32array(4*n.length),s.colors=new float32array(2*n.length),s.indices=new uint16array(2*n.length),s.autoupdate=!0,s.refresh(),s}return s(e,t),e.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new float32array(4*t.length),this.uvs=new float32array(4*t.length),this.colors=new float32array(2*t.length),this.indices=new uint16array(2*t.length));var e=this.uvs,r=this.indices,n=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,n[0]=1,n[1]=1,r[0]=0,r[1]=1;for(var i=t.length,o=1;o<i;o++){var s=4*o,a=o/(i-1);e[s]=a,e[s+1]=0,e[s+2]=a,e[s+3]=1,s=2*o,n[s]=1,n[s+1]=1,s=2*o,r[s]=s,r[s+1]=s+1}this.dirty++,this.indexdirty++,this.multiplyuvs(),this.refreshvertices()}},e.prototype.refreshvertices=function(){var t=this.points;if(!(t.length<1))for(var e=t[0],r=void 0,n=0,i=0,o=this.vertices,s=t.length,a=0;a<s;a++){var u=t[a],h=4*a;r=a<t.length-1?t[a+1]:u,i=-(r.x-e.x),n=r.y-e.y;var l=10*(1-a/(s-1));l>1&&(l=1);var c=math.sqrt(n*n+i*i),d=this._texture.height/2;n/=c,i/=c,n*=d,i*=d,o[h]=u.x+n,o[h+1]=u.y+i,o[h+2]=u.x-n,o[h+3]=u.y-i,e=u}},e.prototype.updatetransform=function(){this.autoupdate&&this.refreshvertices(),this.containerupdatetransform()},e}(u.default);r.default=h},{"./mesh":163}],167:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);
return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var s=t("../../core"),a=i(s),u=t("../mesh"),h=n(u),l=function(){function t(e){o(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,r=e.context,n=t.worldtransform,i=e.resolution;e.roundpixels?r.settransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i|0,n.ty*i|0):r.settransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),e.setblendmode(t.blendmode),t.drawmode===h.default.draw_modes.triangle_mesh?this._rendertrianglemesh(t):this._rendertriangles(t)},t.prototype._rendertrianglemesh=function(t){for(var e=t.vertices.length/2,r=0;r<e-2;r++){var n=2*r;this._renderdrawtriangle(t,n,n+2,n+4)}},t.prototype._rendertriangles=function(t){for(var e=t.indices,r=e.length,n=0;n<r;n+=3){var i=2*e[n],o=2*e[n+1],s=2*e[n+2];this._renderdrawtriangle(t,i,o,s)}},t.prototype._renderdrawtriangle=function(t,e,r,n){var i=this.renderer.context,o=t.uvs,s=t.vertices,a=t._texture;if(a.valid){var u=a.basetexture,h=u.source,l=u.width,c=u.height,d=void 0,f=void 0,p=void 0,v=void 0,y=void 0,g=void 0;if(t.uploaduvtransform){var m=t._uvtransform.mapcoord;d=(o[e]*m.a+o[e+1]*m.c+m.tx)*u.width,f=(o[r]*m.a+o[r+1]*m.c+m.tx)*u.width,p=(o[n]*m.a+o[n+1]*m.c+m.tx)*u.width,v=(o[e]*m.b+o[e+1]*m.d+m.ty)*u.height,y=(o[r]*m.b+o[r+1]*m.d+m.ty)*u.height,g=(o[n]*m.b+o[n+1]*m.d+m.ty)*u.height}else d=o[e]*u.width,f=o[r]*u.width,p=o[n]*u.width,v=o[e+1]*u.height,y=o[r+1]*u.height,g=o[n+1]*u.height;var _=s[e],b=s[r],x=s[n],t=s[e+1],w=s[r+1],e=s[n+1];if(t.canvaspadding>0){var s=t.canvaspadding/t.worldtransform.a,o=t.canvaspadding/t.worldtransform.d,p=(_+b+x)/3,m=(t+w+e)/3,c=_-p,r=t-m,a=math.sqrt(c*c+r*r);_=p+c/a*(a+s),t=m+r/a*(a+o),c=b-p,r=w-m,a=math.sqrt(c*c+r*r),b=p+c/a*(a+s),w=m+r/a*(a+o),c=x-p,r=e-m,a=math.sqrt(c*c+r*r),x=p+c/a*(a+s),e=m+r/a*(a+o)}i.save(),i.beginpath(),i.moveto(_,t),i.lineto(b,w),i.lineto(x,e),i.closepath(),i.clip();var i=d*y+v*p+f*g-y*p-v*f-d*g,d=_*y+v*x+b*g-y*x-v*b-_*g,l=d*b+_*p+f*x-b*p-_*f-d*x,f=d*y*x+v*b*p+_*f*g-_*y*p-v*f*x-d*b*g,n=t*y+v*e+w*g-y*e-v*w-t*g,k=d*w+t*p+f*e-w*p-t*f-d*e,j=d*y*e+v*w*p+t*f*g-t*y*p-v*f*e-d*w*g;i.transform(d/i,n/i,l/i,k/i,f/i,j/i),i.drawimage(h,0,0,l*u.resolution,c*u.resolution,0,0,l,c),i.restore()}},t.prototype.rendermeshflat=function(t){var e=this.renderer.context,r=t.vertices,n=r.length/2;e.beginpath();for(var i=1;i<n-2;++i){var o=2*i,s=r[o],a=r[o+1],u=r[o+2],h=r[o+3],l=r[o+4],c=r[o+5];e.moveto(s,a),e.lineto(u,h),e.lineto(l,c)}e.fillstyle="#ff0000",e.fill(),e.closepath()},t.prototype.destroy=function(){this.renderer=null},t}();r.default=l,a.canvasrenderer.registerplugin("mesh",l)},{"../../core":63,"../mesh":163}],168:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}r.__esmodule=!0;var i=t("./mesh");object.defineproperty(r,"mesh",{enumerable:!0,get:function(){return n(i).default}});var o=t("./webgl/meshrenderer");object.defineproperty(r,"meshrenderer",{enumerable:!0,get:function(){return n(o).default}});var s=t("./canvas/canvasmeshrenderer");object.defineproperty(r,"canvasmeshrenderer",{enumerable:!0,get:function(){return n(s).default}});var a=t("./plane");object.defineproperty(r,"plane",{enumerable:!0,get:function(){return n(a).default}});var u=t("./ninesliceplane");object.defineproperty(r,"ninesliceplane",{enumerable:!0,get:function(){return n(u).default}});var h=t("./rope");object.defineproperty(r,"rope",{enumerable:!0,get:function(){return n(h).default}})},{"./mesh":163,"./ninesliceplane":164,"./plane":165,"./rope":166,"./canvas/canvasmeshrenderer":167,"./webgl/meshrenderer":169}],169:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function s(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var u=t("../../core"),h=i(u),l=t("pixi-gl-core"),c=n(l),d=t("../mesh"),f=n(d),p=(t("path"),h.matrix.identity),v=function(t){function e(r){o(this,e);var n=s(this,t.call(this,r));return n.shader=null,n}return a(e,t),e.prototype.oncontextchange=function(){var t=this.renderer.gl;this.shader=new h.shader(t,"attribute vec2 avertexposition;\nattribute vec2 atexturecoord;\n\nuniform mat3 projectionmatrix;\nuniform mat3 translationmatrix;\nuniform mat3 utransform;\n\nvarying vec2 vtexturecoord;\n\nvoid main(void)\n{\n    gl_position = vec4((projectionmatrix * translationmatrix * vec3(avertexposition, 1.0)).xy, 0.0, 1.0);\n\n    vtexturecoord = (utransform * vec3(atexturecoord, 1.0)).xy;\n}\n","varying vec2 vtexturecoord;\nuniform float alpha;\nuniform vec3 tint;\n\nuniform sampler2d usampler;\n\nvoid main(void)\n{\n    gl_fragcolor = texture2d(usampler, vtexturecoord) * vec4(tint * alpha, alpha);\n}\n")},e.prototype.render=function(t){var e=this.renderer,r=e.gl,n=t._texture;if(n.valid){var i=t._gldatas[e.context_uid];i||(e.bindvao(null),i={shader:this.shader,vertexbuffer:c.default.glbuffer.createvertexbuffer(r,t.vertices,r.stream_draw),uvbuffer:c.default.glbuffer.createvertexbuffer(r,t.uvs,r.stream_draw),indexbuffer:c.default.glbuffer.createindexbuffer(r,t.indices,r.static_draw),vao:null,dirty:t.dirty,indexdirty:t.indexdirty},i.vao=new c.default.vertexarrayobject(r).addindex(i.indexbuffer).addattribute(i.vertexbuffer,i.shader.attributes.avertexposition,r.float,!1,8,0).addattribute(i.uvbuffer,i.shader.attributes.atexturecoord,r.float,!1,8,0),t._gldatas[e.context_uid]=i),e.bindvao(i.vao),t.dirty!==i.dirty&&(i.dirty=t.dirty,i.uvbuffer.upload(t.uvs)),t.indexdirty!==i.indexdirty&&(i.indexdirty=t.indexdirty,i.indexbuffer.upload(t.indices)),i.vertexbuffer.upload(t.vertices),e.bindshader(i.shader),i.shader.uniforms.usampler=e.bindtexture(n),e.state.setblendmode(t.blendmode),i.shader.uniforms.utransform&&(t.uploaduvtransform?i.shader.uniforms.utransform=t._uvtransform.mapcoord.toarray(!0):i.shader.uniforms.utransform=p.toarray(!0)),i.shader.uniforms.translationmatrix=t.worldtransform.toarray(!0),i.shader.uniforms.alpha=t.worldalpha,i.shader.uniforms.tint=t.tintrgb;var o=t.drawmode===f.default.draw_modes.triangle_mesh?r.triangle_strip:r.triangles;i.vao.draw(o,t.indices.length,0)}},e}(h.objectrenderer);r.default=v,h.webglrenderer.registerplugin("mesh",v)},{"../../core":63,"../mesh":163,path:22,"pixi-gl-core":12}],170:[function(t,e,r){"use strict";function n(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=t("../core"),u=n(a),h=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,n=arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384;i(this,e);var a=o(this,t.call(this)),h=16384;return s>h&&(s=h),s>r&&(s=r),a._properties=[!1,!0,!1,!1,!1],a._maxsize=r,a._batchsize=s,a._glbuffers={},a._buffertoupdate=0,a.interactivechildren=!1,a.blendmode=u.blend_modes.normal,a.roundpixels=!0,a.basetexture=null,a.setproperties(n),a}return s(e,t),e.prototype.setproperties=function(t){t&&(this._properties[0]="scale"in t?!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="alpha"in t?!!t.alpha:this._properties[4])},e.prototype.updatetransform=function(){this.displayobjectupdatetransform()},e.prototype.renderwebgl=function(t){var e=this;this.visible&&!(this.worldalpha<=0)&&this.children.length&&this.renderable&&(this.basetexture||(this.basetexture=this.children[0]._texture.basetexture,this.basetexture.hasloaded||this.basetexture.once("update",function(){return e.onchildrenchange(0)})),t.setobjectrenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onchildrenchange=function(t){var e=math.floor(t/this._batchsize);e<this._buffertoupdate&&(this._buffertoupdate=e)},e.prototype.rendercanvas=function(t){if(this.visible&&!(this.worldalpha<=0)&&this.children.length&&this.renderable){var e=t.context,r=this.worldtransform,n=!0,i=0,o=0,s=0,a=0,u=t.blendmodes[this.blendmode];u!==e.globalcompositeoperation&&(e.globalcompositeoperation=u),e.globalalpha=this.worldalpha,this.displayobjectupdatetransform();for(var h=0;h<this.children.length;++h){var l=this.children[h];if(l.visible){var c=l._texture.frame;if(e.globalalpha=this.worldalpha*l.alpha,l.rotation%(2*math.pi)===0)n&&(e.settransform(r.a,r.b,r.c,r.d,r.tx*t.resolution,r.ty*t.resolution),n=!1),i=l.anchor.x*(-c.width*l.scale.x)+l.position.x+.5,o=l.anchor.y*(-c.height*l.scale.y)+l.position.y+.5,s=c.width*l.scale.x,a=c.height*l.scale.y;else{n||(n=!0),l.displayobjectupdatetransform();var d=l.worldtransform;t.roundpixels?e.settransform(d.a,d.b,d.c,d.d,d.tx*t.resolution|0,d.ty*t.resolution|0):e.settransform(d.a,d.b,d.c,d.d,d.tx*t.resolution,d.ty*t.resolution),i=l.anchor.x*-c.width+.5,o=l.anchor.y*-c.height+.5,s=c.width,a=c.height}var f=l._texture.basetexture.resolution;e.drawimage(l._texture.basetexture.source,c.x*f,c.y*f,c.width*f,c.height*f,i*t.resolution,o*t.resolution,s*t.resolution,a*t.resolution)}}}},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._buffers)for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._properties=null,this._buffers=null},e}(u.container);r.default=h},{"../core":63}],171:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}r.__esmodule=!0;var i=t("./particlecontainer");object.defineproperty(r,"particlecontainer",{enumerable:!0,get:function(){return n(i).default}});var o=t("./webgl/particlerenderer");object.defineproperty(r,"particlerenderer",{enumerable:!0,get:function(){return n(o).default}})},{"./particlecontainer":170,"./webgl/particlerenderer":173}],172:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var o=t("pixi-gl-core"),s=n(o),a=t("../../core/utils/createindicesforquads"),u=n(a),h=function(){function t(e,r,n,o){i(this,t),this.gl=e,this.vertsize=2,this.vertbytesize=4*this.vertsize,this.size=o,this.dynamicproperties=[],this.staticproperties=[];for(var s=0;s<r.length;++s){var a=r[s];a={attribute:a.attribute,size:a.size,uploadfunction:a.uploadfunction,offset:a.offset},n[s]?this.dynamicproperties.push(a):this.staticproperties.push(a)}this.staticstride=0,this.staticbuffer=null,this.staticdata=null,this.dynamicstride=0,this.dynamicbuffer=null,this.dynamicdata=null,this.initbuffers()}return t.prototype.initbuffers=function(){var t=this.gl,e=0;this.indices=(0,u.default)(this.size),this.indexbuffer=s.default.glbuffer.createindexbuffer(t,this.indices,t.static_draw),this.dynamicstride=0;for(var r=0;r<this.dynamicproperties.length;++r){var n=this.dynamicproperties[r];n.offset=e,e+=n.size,this.dynamicstride+=n.size}this.dynamicdata=new float32array(this.size*this.dynamicstride*4),this.dynamicbuffer=s.default.glbuffer.createvertexbuffer(t,this.dynamicdata,t.stream_draw);var i=0;this.staticstride=0;for(var o=0;o<this.staticproperties.length;++o){var a=this.staticproperties[o];a.offset=i,i+=a.size,this.staticstride+=a.size}this.staticdata=new float32array(this.size*this.staticstride*4),this.staticbuffer=s.default.glbuffer.createvertexbuffer(t,this.staticdata,t.static_draw),this.vao=new s.default.vertexarrayobject(t).addindex(this.indexbuffer);for(var h=0;h<this.dynamicproperties.length;++h){var l=this.dynamicproperties[h];this.vao.addattribute(this.dynamicbuffer,l.attribute,t.float,!1,4*this.dynamicstride,4*l.offset)}for(var c=0;c<this.staticproperties.length;++c){var d=this.staticproperties[c];this.vao.addattribute(this.staticbuffer,d.attribute,t.float,!1,4*this.staticstride,4*d.offset)}},t.prototype.uploaddynamic=function(t,e,r){for(var n=0;n<this.dynamicproperties.length;n++){var i=this.dynamicproperties[n];i.uploadfunction(t,e,r,this.dynamicdata,this.dynamicstride,i.offset)}this.dynamicbuffer.upload()},t.prototype.uploadstatic=function(t,e,r){for(var n=0;n<this.staticproperties.length;n++){var i=this.staticproperties[n];i.uploadfunction(t,e,r,this.staticdata,this.staticstride,i.offset)}this.staticbuffer.upload()},t.prototype.destroy=function(){this.dynamicproperties=null,this.dynamicdata=null,this.dynamicbuffer.destroy(),this.staticproperties=null,this.staticdata=null,this.staticbuffer.destroy()},t}();r.default=h},{"../../core/utils/createindicesforquads":120,"pixi-gl-core":12}],173:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function s(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var u=t("../../core"),h=i(u),l=t("./particleshader"),c=n(l),d=t("./particlebuffer"),f=n(d),p=function(t){function e(r){o(this,e);var n=s(this,t.call(this,r));return n.shader=null,n.indexbuffer=null,n.properties=null,n.tempmatrix=new h.matrix,n.context_uid=0,n}return a(e,t),e.prototype.oncontextchange=function(){var t=this.renderer.gl;this.context_uid=this.renderer.context_uid,this.shader=new c.default(t),this.properties=[{attribute:this.shader.attributes.avertexposition,size:2,uploadfunction:this.uploadvertices,offset:0},{attribute:this.shader.attributes.apositioncoord,size:2,uploadfunction:this.uploadposition,offset:0},{attribute:this.shader.attributes.arotation,size:1,uploadfunction:this.uploadrotation,offset:0},{attribute:this.shader.attributes.atexturecoord,size:2,uploadfunction:this.uploaduvs,offset:0},{attribute:this.shader.attributes.acolor,size:1,uploadfunction:this.uploadalpha,offset:0}]},e.prototype.start=function(){this.renderer.bindshader(this.shader)},e.prototype.render=function(t){var e=t.children,r=t._maxsize,n=t._batchsize,i=this.renderer,o=e.length;if(0!==o){o>r&&(o=r);var s=t._glbuffers[i.context_uid];s||(s=t._glbuffers[i.context_uid]=this.generatebuffers(t)),this.renderer.setblendmode(t.blendmode);var a=i.gl,u=t.worldtransform.copy(this.tempmatrix);u.prepend(i._activerendertarget.projectionmatrix),this.shader.uniforms.projectionmatrix=u.toarray(!0),this.shader.uniforms.ualpha=t.worldalpha;var h=e[0]._texture.basetexture;this.shader.uniforms.usampler=i.bindtexture(h);for(var l=0,c=0;l<o;l+=n,c+=1){var d=o-l;d>n&&(d=n);var f=s[c];f.uploaddynamic(e,l,d),t._buffertoupdate===c&&(f.uploadstatic(e,l,d),t._buffertoupdate=c+1),i.bindvao(f.vao),f.vao.draw(a.triangles,6*d)}}},e.prototype.generatebuffers=function(t){for(var e=this.renderer.gl,r=[],n=t._maxsize,i=t._batchsize,o=t._properties,s=0;s<n;s+=i)r.push(new f.default(e,this.properties,o,i));return r},e.prototype.uploadvertices=function(t,e,r,n,i,o){for(var s=0,a=0,u=0,h=0,l=0;l<r;++l){var c=t[e+l],d=c._texture,f=c.scale.x,p=c.scale.y,v=d.trim,y=d.orig;v?(a=v.x-c.anchor.x*y.width,s=a+v.width,h=v.y-c.anchor.y*y.height,u=h+v.height):(s=y.width*(1-c.anchor.x),a=y.width*-c.anchor.x,u=y.height*(1-c.anchor.y),h=y.height*-c.anchor.y),n[o]=a*f,n[o+1]=h*p,n[o+i]=s*f,n[o+i+1]=h*p,n[o+2*i]=s*f,n[o+2*i+1]=u*p,n[o+3*i]=a*f,n[o+3*i+1]=u*p,o+=4*i}},e.prototype.uploadposition=function(t,e,r,n,i,o){for(var s=0;s<r;s++){var a=t[e+s].position;n[o]=a.x,n[o+1]=a.y,n[o+i]=a.x,n[o+i+1]=a.y,n[o+2*i]=a.x,n[o+2*i+1]=a.y,n[o+3*i]=a.x,n[o+3*i+1]=a.y,o+=4*i}},e.prototype.uploadrotation=function(t,e,r,n,i,o){for(var s=0;s<r;s++){var a=t[e+s].rotation;n[o]=a,n[o+i]=a,n[o+2*i]=a,n[o+3*i]=a,o+=4*i}},e.prototype.uploaduvs=function(t,e,r,n,i,o){for(var s=0;s<r;++s){var a=t[e+s]._texture._uvs;a?(n[o]=a.x0,n[o+1]=a.y0,n[o+i]=a.x1,n[o+i+1]=a.y1,n[o+2*i]=a.x2,n[o+2*i+1]=a.y2,n[o+3*i]=a.x3,n[o+3*i+1]=a.y3,o+=4*i):(n[o]=0,n[o+1]=0,n[o+i]=0,n[o+i+1]=0,n[o+2*i]=0,n[o+2*i+1]=0,n[o+3*i]=0,n[o+3*i+1]=0,o+=4*i)}},e.prototype.uploadalpha=function(t,e,r,n,i,o){for(var s=0;s<r;s++){var a=t[e+s].alpha;n[o]=a,n[o+i]=a,n[o+2*i]=a,n[o+3*i]=a,o+=4*i}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deletebuffer(this.indexbuffer),t.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempmatrix=null},e}(h.objectrenderer);r.default=p,h.webglrenderer.registerplugin("particle",p)},{"../../core":63,"./particlebuffer":172,"./particleshader":174}],174:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function o(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}r.__esmodule=!0;var a=t("../../core/shader"),u=n(a),h=function(t){function e(r){return i(this,e),o(this,t.call(this,r,["attribute vec2 avertexposition;","attribute vec2 atexturecoord;","attribute float acolor;","attribute vec2 apositioncoord;","attribute vec2 ascale;","attribute float arotation;","uniform mat3 projectionmatrix;","varying vec2 vtexturecoord;","varying float vcolor;","void main(void){","   vec2 v = avertexposition;","   v.x = (avertexposition.x) * cos(arotation) - (avertexposition.y) * sin(arotation);","   v.y = (avertexposition.x) * sin(arotation) + (avertexposition.y) * cos(arotation);","   v = v + apositioncoord;","   gl_position = vec4((projectionmatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vtexturecoord = atexturecoord;","   vcolor = acolor;","}"].join("\n"),["varying vec2 vtexturecoord;","varying float vcolor;","uniform sampler2d usampler;","uniform float ualpha;","void main(void){","  vec4 color = texture2d(usampler, vtexturecoord) * vcolor * ualpha;","  if (color.a == 0.0) discard;","  gl_fragcolor = color;","}"].join("\n")))}return s(e,t),e}(u.default);r.default=h},{"../../core/shader":42}],175:[function(t,e,r){"use strict";math.sign||(math.sign=function(t){return t=number(t),0===t||isnan(t)?t:t>0?1:-1})},{}],176:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}var i=t("object-assign"),o=n(i);object.assign||(object.assign=o.default)},{"object-assign":5}],177:[function(t,e,r){"use strict";t("./object.assign"),t("./requestanimationframe"),t("./math.sign"),window.arraybuffer||(window.arraybuffer=array),window.float32array||(window.float32array=array),window.uint32array||(window.uint32array=array),window.uint16array||(window.uint16array=array)},{"./math.sign":175,"./object.assign":176,"./requestanimationframe":178}],178:[function(t,e,r){(function(t){"use strict";var e=16;date.now&&date.prototype.gettime||(date.now=function(){return(new date).gettime()}),t.performance&&t.performance.now||!function(){var e=date.now();t.performance||(t.performance={}),t.performance.now=function(){return date.now()-e}}();for(var r=date.now(),n=["ms","moz","webkit","o"],i=0;i<n.length&&!t.requestanimationframe;++i){var o=n[i];t.requestanimationframe=t[o+"requestanimationframe"],t.cancelanimationframe=t[o+"cancelanimationframe"]||t[o+"cancelrequestanimationframe"]}t.requestanimationframe||(t.requestanimationframe=function(t){if("function"!=typeof t)throw new typeerror(t+"is not a function");var n=date.now(),i=e+r-n;return i<0&&(i=0),r=n,settimeout(function(){r=date.now(),t(performance.now())},i)}),t.cancelanimationframe||(t.cancelanimationframe=function(t){return cleartimeout(t)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],179:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function s(t,e){var r=!1;if(t&&t._textures&&t._textures.length)for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof p.texture){var i=t._textures[n].basetexture;e.indexof(i)===-1&&(e.push(i),r=!0)}return r}function a(t,e){return t instanceof p.basetexture&&(e.indexof(t)===-1&&e.push(t),!0)}function u(t,e){if(t._texture&&t._texture instanceof p.texture){var r=t._texture.basetexture;return e.indexof(r)===-1&&e.push(r),!0}return!1}function h(t,e){return e instanceof p.text&&(e.updatetext(!0),!0)}function l(t,e){if(e instanceof p.textstyle){var r=p.text.getfontstyle(e);return p.text.fontpropertiescache[r]||p.text.calculatefontproperties(r),!0}return!1}function c(t,e){if(t instanceof p.text){e.indexof(t.style)===-1&&e.push(t.style),e.indexof(t)===-1&&e.push(t);var r=t._texture.basetexture;return e.indexof(r)===-1&&e.push(r),!0}return!1}function d(t,e){return t instanceof p.textstyle&&(e.indexof(t)===-1&&e.push(t),!0)}r.__esmodule=!0;var f=t("../core"),p=i(f),v=t("./limiters/countlimiter"),y=n(v),g=p.ticker.shared;p.settings.uploads_per_frame=4;var m=function(){function t(e){var r=this;o(this,t),this.limiter=new y.default(p.settings.uploads_per_frame),this.renderer=e,this.uploadhookhelper=null,this.queue=[],this.addhooks=[],this.uploadhooks=[],this.completes=[],this.ticking=!1,this.delayedtick=function(){r.queue&&r.prepareitems()},this.registerfindhook(c),this.registerfindhook(d),this.registerfindhook(s),this.registerfindhook(a),this.registerfindhook(u),this.registeruploadhook(h),this.registeruploadhook(l)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,g.addonce(this.tick,this,p.update_priority.utility))):e&&e()},t.prototype.tick=function(){settimeout(this.delayedtick,0)},t.prototype.prepareitems=function(){for(this.limiter.beginframe();this.queue.length&&this.limiter.allowedtoupload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var r=0,n=this.uploadhooks.length;r<n;r++)if(this.uploadhooks[r](this.uploadhookhelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)g.addonce(this.tick,this,p.update_priority.utility);else{this.ticking=!1;var i=this.completes.slice(0);this.completes.length=0;for(var o=0,s=i.length;o<s;o++)i[o]()}},t.prototype.registerfindhook=function(t){return t&&this.addhooks.push(t),this},t.prototype.registeruploadhook=function(t){return t&&this.uploadhooks.push(t),this},t.prototype.add=function(t){for(var e=0,r=this.addhooks.length;e<r&&!this.addhooks[e](t,this.queue);e++);if(t instanceof p.container)for(var n=t.children.length-1;n>=0;n--)this.add(t.children[n]);return this},t.prototype.destroy=function(){this.ticking&&g.remove(this.tick,this),this.ticking=!1,this.addhooks=null,this.uploadhooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadhookhelper=null},t}();r.default=m},{"../core":63,"./limiters/countlimiter":182}],180:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function s(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}function u(t,e){if(e instanceof l.basetexture){var r=e.source,n=0===r.width?t.canvas.width:math.min(t.canvas.width,r.width),i=0===r.height?t.canvas.height:math.min(t.canvas.height,r.height);return t.ctx.drawimage(r,0,0,n,i,0,0,t.canvas.width,t.canvas.height),!0}return!1}r.__esmodule=!0;var h=t("../../core"),l=i(h),c=t("../baseprepare"),d=n(c),f=16,p=function(t){function e(r){o(this,e);var n=s(this,t.call(this,r));return n.uploadhookhelper=n,n.canvas=document.createelement("canvas"),n.canvas.width=f,n.canvas.height=f,n.ctx=n.canvas.getcontext("2d"),n.registeruploadhook(u),n}return a(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(d.default);r.default=p,l.canvasrenderer.registerplugin("prepare",p)},{"../../core":63,"../baseprepare":179}],181:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}r.__esmodule=!0;var i=t("./webgl/webglprepare");object.defineproperty(r,"webgl",{enumerable:!0,get:function(){return n(i).default}});var o=t("./canvas/canvasprepare");object.defineproperty(r,"canvas",{enumerable:!0,get:function(){return n(o).default}});var s=t("./baseprepare");object.defineproperty(r,"baseprepare",{enumerable:!0,get:function(){return n(s).default}});var a=t("./limiters/countlimiter");object.defineproperty(r,"countlimiter",{enumerable:!0,get:function(){return n(a).default}});var u=t("./limiters/timelimiter");object.defineproperty(r,"timelimiter",{enumerable:!0,get:function(){return n(u).default}})},{"./baseprepare":179,"./canvas/canvasprepare":180,"./limiters/countlimiter":182,"./limiters/timelimiter":183,"./webgl/webglprepare":184}],182:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var i=function(){function t(e){n(this,t),this.maxitemsperframe=e,this.itemsleft=0}return t.prototype.beginframe=function(){this.itemsleft=this.maxitemsperframe},t.prototype.allowedtoupload=function(){return this.itemsleft-- >0},t}();r.default=i},{}],183:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}r.__esmodule=!0;var i=function(){function t(e){n(this,t),this.maxmilliseconds=e,this.framestart=0}return t.prototype.beginframe=function(){this.framestart=date.now()},t.prototype.allowedtoupload=function(){return date.now()-this.framestart<this.maxmilliseconds},t}();r.default=i},{}],184:[function(t,e,r){"use strict";function n(t){return t&&t.__esmodule?t:{default:t}}function i(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}function s(t,e){if(!t)throw new referenceerror("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new typeerror("super expression must either be null or a function, not "+typeof e);t.prototype=object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(object.setprototypeof?object.setprototypeof(t,e):t.__proto__=e)}function u(t,e){return e instanceof d.basetexture&&(e._gltextures[t.context_uid]||t.texturemanager.updatetexture(e),!0)}function h(t,e){return e instanceof d.graphics&&((e.dirty||e.cleardirty||!e._webgl[t.plugins.graphics.context_uid])&&t.plugins.graphics.updategraphics(e),!0)}function l(t,e){return t instanceof d.graphics&&(e.push(t),!0)}r.__esmodule=!0;var c=t("../../core"),d=i(c),f=t("../baseprepare"),p=n(f),v=function(t){function e(r){o(this,e);var n=s(this,t.call(this,r));return n.uploadhookhelper=n.renderer,n.registerfindhook(l),n.registeruploadhook(u),n.registeruploadhook(h),n}return a(e,t),e}(p.default);r.default=v,d.webglrenderer.registerplugin("prepare",v)},{"../../core":63,"../baseprepare":179}],185:[function(t,e,r){(function(e){"use strict";function n(t){if(t&&t.__esmodule)return t;var e={};if(null!=t)for(var r in t)object.prototype.hasownproperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esmodule?t:{default:t}}r.__esmodule=!0,r.loader=r.prepare=r.particles=r.mesh=r.loaders=r.interaction=r.filters=r.extras=r.extract=r.accessibility=void 0;var o=t("./polyfill");object.keys(o).foreach(function(t){"default"!==t&&"__esmodule"!==t&&object.defineproperty(r,t,{enumerable:!0,get:function(){return o[t]}})});var s=t("./core");object.keys(s).foreach(function(t){"default"!==t&&"__esmodule"!==t&&object.defineproperty(r,t,{enumerable:!0,get:function(){return s[t]}})});var a=t("./deprecation"),u=i(a),h=t("./accessibility"),l=n(h),c=t("./extract"),d=n(c),f=t("./extras"),p=n(f),v=t("./filters"),y=n(v),g=t("./interaction"),m=n(g),_=t("./loaders"),b=n(_),x=t("./mesh"),t=n(x),w=t("./particles"),e=n(w),s=t("./prepare"),o=n(s);s.utils.mixins.performmixins();var p=b.shared||null;r.accessibility=l,r.extract=d,r.extras=p,r.filters=y,r.interaction=m,r.loaders=b,r.mesh=t,r.particles=e,r.prepare=o,r.loader=p,"function"==typeof u.default&&(0,u.default)(r),e.pixi=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":40,"./core":63,"./deprecation":127,"./extract":129,"./extras":138,"./filters":149,"./interaction":156,"./loaders":159,"./mesh":168,"./particles":171,"./polyfill":177,"./prepare":181}]},{},[185])(185)});
//# sourcemappingurl=pixi.min.js.map
